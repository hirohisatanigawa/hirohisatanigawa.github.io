(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function cr(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ue(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cr(Object(t),!0).forEach(function(n){mo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cr(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cn(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cn=function(e){return typeof e}:cn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(r)}function mo(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Qe(){return Qe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qe.apply(this,arguments)}function ho(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function _o(r,e){if(r==null)return{};var t=ho(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var go="1.15.6";function Je(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var Ke=Je(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zt=Je(/Edge/i),dr=Je(/firefox/i),Vt=Je(/safari/i)&&!Je(/chrome/i)&&!Je(/android/i),zn=Je(/iP(ad|od|hone)/i),Nr=Je(/chrome/i)&&Je(/android/i),Rr={capture:!1,passive:!1};function O(r,e,t){r.addEventListener(e,t,!Ke&&Rr)}function P(r,e,t){r.removeEventListener(e,t,!Ke&&Rr)}function vn(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function Br(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function Be(r,e,t,n){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&vn(r,e):vn(r,e))||n&&r===t)return r;if(r===t)break}while(r=Br(r))}return null}var fr=/\s+/g;function Ae(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var n=(" "+r.className+" ").replace(fr," ").replace(" "+e+" "," ");r.className=(n+(t?" "+e:"")).replace(fr," ")}}function A(r,e,t){var n=r&&r.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function xt(r,e){var t="";if(typeof r=="string")t=r;else do{var n=A(r,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(r=r.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Fr(r,e,t){if(r){var n=r.getElementsByTagName(e),i=0,s=n.length;if(t)for(;i<s;i++)t(n[i],i);return n}return[]}function Xe(){var r=document.scrollingElement;return r||document.documentElement}function J(r,e,t,n,i){if(!(!r.getBoundingClientRect&&r!==window)){var s,l,p,d,c,g,o;if(r!==window&&r.parentNode&&r!==Xe()?(s=r.getBoundingClientRect(),l=s.top,p=s.left,d=s.bottom,c=s.right,g=s.height,o=s.width):(l=0,p=0,d=window.innerHeight,c=window.innerWidth,g=window.innerHeight,o=window.innerWidth),(e||t)&&r!==window&&(i=i||r.parentNode,!Ke))do if(i&&i.getBoundingClientRect&&(A(i,"transform")!=="none"||t&&A(i,"position")!=="static")){var a=i.getBoundingClientRect();l-=a.top+parseInt(A(i,"border-top-width")),p-=a.left+parseInt(A(i,"border-left-width")),d=l+s.height,c=p+s.width;break}while(i=i.parentNode);if(n&&r!==window){var u=xt(i||r),f=u&&u.a,m=u&&u.d;u&&(l/=m,p/=f,o/=f,g/=m,d=l+g,c=p+o)}return{top:l,left:p,bottom:d,right:c,width:o,height:g}}}function pr(r,e,t){for(var n=at(r,!0),i=J(r)[e];n;){var s=J(n)[t],l=void 0;if(l=i>=s,!l)return n;if(n===Xe())break;n=at(n,!1)}return!1}function It(r,e,t,n){for(var i=0,s=0,l=r.children;s<l.length;){if(l[s].style.display!=="none"&&l[s]!==w.ghost&&(n||l[s]!==w.dragged)&&Be(l[s],t.draggable,r,!1)){if(i===e)return l[s];i++}s++}return null}function er(r,e){for(var t=r.lastElementChild;t&&(t===w.ghost||A(t,"display")==="none"||e&&!vn(t,e));)t=t.previousElementSibling;return t||null}function Pe(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==w.clone&&(!e||vn(r,e))&&t++;return t}function mr(r){var e=0,t=0,n=Xe();if(r)do{var i=xt(r),s=i.a,l=i.d;e+=r.scrollLeft*s,t+=r.scrollTop*l}while(r!==n&&(r=r.parentNode));return[e,t]}function vo(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===r[t][n])return Number(t)}return-1}function at(r,e){if(!r||!r.getBoundingClientRect)return Xe();var t=r,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=A(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Xe();if(n||e)return t;n=!0}}while(t=t.parentNode);return Xe()}function yo(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function On(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var $t;function Lr(r,e){return function(){if(!$t){var t=arguments,n=this;t.length===1?r.call(n,t[0]):r.apply(n,t),$t=setTimeout(function(){$t=void 0},e)}}}function bo(){clearTimeout($t),$t=void 0}function Hr(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function Gr(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function Vr(r,e,t){var n={};return Array.from(r.children).forEach(function(i){var s,l,p,d;if(!(!Be(i,e.draggable,r,!1)||i.animated||i===t)){var c=J(i);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,c.left),n.top=Math.min((l=n.top)!==null&&l!==void 0?l:1/0,c.top),n.right=Math.max((p=n.right)!==null&&p!==void 0?p:-1/0,c.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var be="Sortable"+new Date().getTime();function To(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(A(i,"display")==="none"||i===w.ghost)){r.push({target:i,rect:J(i)});var s=Ue({},r[r.length-1].rect);if(i.thisAnimationDuration){var l=xt(i,!0);l&&(s.top-=l.f,s.left-=l.e)}i.fromRect=s}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(vo(r,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,l=0;r.forEach(function(p){var d=0,c=p.target,g=c.fromRect,o=J(c),a=c.prevFromRect,u=c.prevToRect,f=p.rect,m=xt(c,!0);m&&(o.top-=m.f,o.left-=m.e),c.toRect=o,c.thisAnimationDuration&&On(a,o)&&!On(g,o)&&(f.top-o.top)/(f.left-o.left)===(g.top-o.top)/(g.left-o.left)&&(d=Ao(f,a,u,i.options)),On(o,g)||(c.prevFromRect=g,c.prevToRect=o,d||(d=i.options.animation),i.animate(c,f,o,d)),d&&(s=!0,l=Math.max(l,d),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},d),c.thisAnimationDuration=d)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),r=[]},animate:function(n,i,s,l){if(l){A(n,"transition",""),A(n,"transform","");var p=xt(this.el),d=p&&p.a,c=p&&p.d,g=(i.left-s.left)/(d||1),o=(i.top-s.top)/(c||1);n.animatingX=!!g,n.animatingY=!!o,A(n,"transform","translate3d("+g+"px,"+o+"px,0)"),this.forRepaintDummy=wo(n),A(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),A(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){A(n,"transition",""),A(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function wo(r){return r.offsetWidth}function Ao(r,e,t,n){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var vt=[],kn={initializeByDefault:!0},Jt={mount:function(e){for(var t in kn)kn.hasOwnProperty(t)&&!(t in e)&&(e[t]=kn[t]);vt.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),vt.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var s=e+"Global";vt.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][s]&&t[l.pluginName][s](Ue({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](Ue({sortable:t},n)))})},initializePlugins:function(e,t,n,i){vt.forEach(function(p){var d=p.pluginName;if(!(!e.options[d]&&!p.initializeByDefault)){var c=new p(e,t,e.options);c.sortable=e,c.options=e.options,e[d]=c,Qe(n,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var l=this.modifyOption(e,s,e.options[s]);typeof l<"u"&&(e.options[s]=l)}},getEventProperties:function(e,t){var n={};return vt.forEach(function(i){typeof i.eventProperties=="function"&&Qe(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return vt.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],n))}),i}};function Eo(r){var e=r.sortable,t=r.rootEl,n=r.name,i=r.targetEl,s=r.cloneEl,l=r.toEl,p=r.fromEl,d=r.oldIndex,c=r.newIndex,g=r.oldDraggableIndex,o=r.newDraggableIndex,a=r.originalEvent,u=r.putSortable,f=r.extraEventProperties;if(e=e||t&&t[be],!!e){var m,_=e.options,h="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Ke&&!Zt?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=l||t,m.from=p||t,m.item=i||t,m.clone=s,m.oldIndex=d,m.newIndex=c,m.oldDraggableIndex=g,m.newDraggableIndex=o,m.originalEvent=a,m.pullMode=u?u.lastPutMode:void 0;var v=Ue(Ue({},f),Jt.getEventProperties(n,e));for(var b in v)m[b]=v[b];t&&t.dispatchEvent(m),_[h]&&_[h].call(e,m)}}var So=["evt"],ye=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,s=_o(n,So);Jt.pluginEvent.bind(w)(e,t,Ue({dragEl:y,parentEl:$,ghostEl:x,rootEl:H,nextEl:pt,lastDownEl:dn,cloneEl:V,cloneHidden:it,dragStarted:Ft,putSortable:re,activeSortable:w.active,originalEvent:i,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:ot,hideGhostForTarget:Yr,unhideGhostForTarget:qr,cloneNowHidden:function(){it=!0},cloneNowShown:function(){it=!1},dispatchSortableEvent:function(p){fe({sortable:t,name:p,originalEvent:i})}},s))};function fe(r){Eo(Ue({putSortable:re,cloneEl:V,targetEl:y,rootEl:H,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:ot},r))}var y,$,x,H,pt,dn,V,it,Et,Ee,Xt,ot,tn,re,Tt=!1,yn=!1,bn=[],ut,Ne,Mn,Nn,hr,_r,Ft,yt,Ut,Yt=!1,nn=!1,fn,le,Rn=[],qn=!1,Tn=[],Sn=typeof document<"u",rn=zn,gr=Zt||Ke?"cssFloat":"float",xo=Sn&&!Nr&&!zn&&"draggable"in document.createElement("div"),$r=function(){if(Sn){if(Ke)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),Xr=function(e,t){var n=A(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=It(e,0,t),l=It(e,1,t),p=s&&A(s),d=l&&A(l),c=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+J(s).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+J(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&p.float&&p.float!=="none"){var o=p.float==="left"?"left":"right";return l&&(d.clear==="both"||d.clear===o)?"vertical":"horizontal"}return s&&(p.display==="block"||p.display==="flex"||p.display==="table"||p.display==="grid"||c>=i&&n[gr]==="none"||l&&n[gr]==="none"&&c+g>i)?"vertical":"horizontal"},Co=function(e,t,n){var i=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height,p=n?t.left:t.top,d=n?t.right:t.bottom,c=n?t.width:t.height;return i===p||s===d||i+l/2===p+c/2},Do=function(e,t){var n;return bn.some(function(i){var s=i[be].options.emptyInsertThreshold;if(!(!s||er(i))){var l=J(i),p=e>=l.left-s&&e<=l.right+s,d=t>=l.top-s&&t<=l.bottom+s;if(p&&d)return n=i}}),n},Ur=function(e){function t(s,l){return function(p,d,c,g){var o=p.options.group.name&&d.options.group.name&&p.options.group.name===d.options.group.name;if(s==null&&(l||o))return!0;if(s==null||s===!1)return!1;if(l&&s==="clone")return s;if(typeof s=="function")return t(s(p,d,c,g),l)(p,d,c,g);var a=(l?p:d).options.group.name;return s===!0||typeof s=="string"&&s===a||s.join&&s.indexOf(a)>-1}}var n={},i=e.group;(!i||cn(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Yr=function(){!$r&&x&&A(x,"display","none")},qr=function(){!$r&&x&&A(x,"display","")};Sn&&!Nr&&document.addEventListener("click",function(r){if(yn)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),yn=!1,!1},!0);var ct=function(e){if(y){e=e.touches?e.touches[0]:e;var t=Do(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[be]._onDragOver(n)}}},Io=function(e){y&&y.parentNode[be]._isOutsideThisEl(e.target)};function w(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=Qe({},e),r[be]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Xr(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,p){l.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:w.supportPointer!==!1&&"PointerEvent"in window&&(!Vt||zn),emptyInsertThreshold:5};Jt.initializePlugins(this,r,t);for(var n in t)!(n in e)&&(e[n]=t[n]);Ur(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:xo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?O(r,"pointerdown",this._onTapStart):(O(r,"mousedown",this._onTapStart),O(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(r,"dragover",this),O(r,"dragenter",this)),bn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qe(this,To())}w.prototype={constructor:w,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(yt=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,s=i.preventOnFilter,l=e.type,p=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(p||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,g=i.filter;if(Fo(n),!y&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Vt&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Be(d,i.draggable,n,!1),!(d&&d.animated)&&dn!==d)){if(Et=Pe(d),Xt=Pe(d,i.draggable),typeof g=="function"){if(g.call(this,e,d,this)){fe({sortable:t,rootEl:c,name:"filter",targetEl:d,toEl:n,fromEl:n}),ye("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(o){if(o=Be(c,o.trim(),n,!1),o)return fe({sortable:t,rootEl:o,name:"filter",targetEl:d,fromEl:n,toEl:n}),ye("filter",t,{evt:e}),!0}),g)){s&&e.preventDefault();return}i.handle&&!Be(c,i.handle,n,!1)||this._prepareDragStart(e,p,d)}}},_prepareDragStart:function(e,t,n){var i=this,s=i.el,l=i.options,p=s.ownerDocument,d;if(n&&!y&&n.parentNode===s){var c=J(n);if(H=s,y=n,$=y.parentNode,pt=y.nextSibling,dn=n,tn=l.group,w.dragged=y,ut={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},hr=ut.clientX-c.left,_r=ut.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",d=function(){if(ye("delayEnded",i,{evt:e}),w.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!dr&&i.nativeDraggable&&(y.draggable=!0),i._triggerDragStart(e,t),fe({sortable:i,name:"choose",originalEvent:e}),Ae(y,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){Fr(y,g.trim(),Bn)}),O(p,"dragover",ct),O(p,"mousemove",ct),O(p,"touchmove",ct),l.supportPointer?(O(p,"pointerup",i._onDrop),!this.nativeDraggable&&O(p,"pointercancel",i._onDrop)):(O(p,"mouseup",i._onDrop),O(p,"touchend",i._onDrop),O(p,"touchcancel",i._onDrop)),dr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ye("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Zt||Ke))){if(w.eventCanceled){this._onDrop();return}l.supportPointer?(O(p,"pointerup",i._disableDelayedDrag),O(p,"pointercancel",i._disableDelayedDrag)):(O(p,"mouseup",i._disableDelayedDrag),O(p,"touchend",i._disableDelayedDrag),O(p,"touchcancel",i._disableDelayedDrag)),O(p,"mousemove",i._delayedDragTouchMoveHandler),O(p,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&O(p,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(d,l.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Bn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._disableDelayedDrag),P(e,"touchend",this._disableDelayedDrag),P(e,"touchcancel",this._disableDelayedDrag),P(e,"pointerup",this._disableDelayedDrag),P(e,"pointercancel",this._disableDelayedDrag),P(e,"mousemove",this._delayedDragTouchMoveHandler),P(e,"touchmove",this._delayedDragTouchMoveHandler),P(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):t?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(y,"dragend",this),O(H,"dragstart",this._onDragStart));try{document.selection?pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Tt=!1,H&&y){ye("dragStarted",this,{evt:t}),this.nativeDraggable&&O(document,"dragover",Io);var n=this.options;!e&&Ae(y,n.dragClass,!1),Ae(y,n.ghostClass,!0),w.active=this,e&&this._appendGhost(),fe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ne){this._lastX=Ne.clientX,this._lastY=Ne.clientY,Yr();for(var e=document.elementFromPoint(Ne.clientX,Ne.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ne.clientX,Ne.clientY),e!==t);)t=e;if(y.parentNode[be]._isOutsideThisEl(e),t)do{if(t[be]){var n=void 0;if(n=t[be]._onDragOver({clientX:Ne.clientX,clientY:Ne.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Br(t));qr()}},_onTouchMove:function(e){if(ut){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,l=x&&xt(x,!0),p=x&&l&&l.a,d=x&&l&&l.d,c=rn&&le&&mr(le),g=(s.clientX-ut.clientX+i.x)/(p||1)+(c?c[0]-Rn[0]:0)/(p||1),o=(s.clientY-ut.clientY+i.y)/(d||1)+(c?c[1]-Rn[1]:0)/(d||1);if(!w.active&&!Tt){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(x){l?(l.e+=g-(Mn||0),l.f+=o-(Nn||0)):l={a:1,b:0,c:0,d:1,e:g,f:o};var a="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");A(x,"webkitTransform",a),A(x,"mozTransform",a),A(x,"msTransform",a),A(x,"transform",a),Mn=g,Nn=o,Ne=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:H,t=J(y,!0,rn,!0,e),n=this.options;if(rn){for(le=e;A(le,"position")==="static"&&A(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=Xe()),t.top+=le.scrollTop,t.left+=le.scrollLeft):le=Xe(),Rn=mr(le)}x=y.cloneNode(!0),Ae(x,n.ghostClass,!1),Ae(x,n.fallbackClass,!0),Ae(x,n.dragClass,!0),A(x,"transition",""),A(x,"transform",""),A(x,"box-sizing","border-box"),A(x,"margin",0),A(x,"top",t.top),A(x,"left",t.left),A(x,"width",t.width),A(x,"height",t.height),A(x,"opacity","0.8"),A(x,"position",rn?"absolute":"fixed"),A(x,"zIndex","100000"),A(x,"pointerEvents","none"),w.ghost=x,e.appendChild(x),A(x,"transform-origin",hr/parseInt(x.style.width)*100+"% "+_r/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,s=n.options;if(ye("dragStart",this,{evt:e}),w.eventCanceled){this._onDrop();return}ye("setupClone",this),w.eventCanceled||(V=Gr(y),V.removeAttribute("id"),V.draggable=!1,V.style["will-change"]="",this._hideClone(),Ae(V,this.options.chosenClass,!1),w.clone=V),n.cloneId=pn(function(){ye("clone",n),!w.eventCanceled&&(n.options.removeCloneOnHide||H.insertBefore(V,y),n._hideClone(),fe({sortable:n,name:"clone"}))}),!t&&Ae(y,s.dragClass,!0),t?(yn=!0,n._loopId=setInterval(n._emulateDragOver,50)):(P(document,"mouseup",n._onDrop),P(document,"touchend",n._onDrop),P(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(n,i,y)),O(document,"drop",n),A(y,"transform","translateZ(0)")),Tt=!0,n._dragStartId=pn(n._dragStarted.bind(n,t,e)),O(document,"selectstart",n),Ft=!0,window.getSelection().removeAllRanges(),Vt&&A(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,s,l,p=this.options,d=p.group,c=w.active,g=tn===d,o=p.sort,a=re||c,u,f=this,m=!1;if(qn)return;function _(Y,T){ye(Y,f,Ue({evt:e,isOwner:g,axis:u?"vertical":"horizontal",revert:l,dragRect:i,targetRect:s,canSort:o,fromSortable:a,target:n,completed:v,onMove:function(ae,ze){return on(H,t,y,i,ae,J(ae),e,ze)},changed:b},T))}function h(){_("dragOverAnimationCapture"),f.captureAnimationState(),f!==a&&a.captureAnimationState()}function v(Y){return _("dragOverCompleted",{insertion:Y}),Y&&(g?c._hideClone():c._showClone(f),f!==a&&(Ae(y,re?re.options.ghostClass:c.options.ghostClass,!1),Ae(y,p.ghostClass,!0)),re!==f&&f!==w.active?re=f:f===w.active&&re&&(re=null),a===f&&(f._ignoreWhileAnimating=n),f.animateAll(function(){_("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==a&&(a.animateAll(),a._ignoreWhileAnimating=null)),(n===y&&!y.animated||n===t&&!n.animated)&&(yt=null),!p.dragoverBubble&&!e.rootEl&&n!==document&&(y.parentNode[be]._isOutsideThisEl(e.target),!Y&&ct(e)),!p.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function b(){Ee=Pe(y),ot=Pe(y,p.draggable),fe({sortable:f,name:"change",toEl:t,newIndex:Ee,newDraggableIndex:ot,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Be(n,p.draggable,t,!0),_("dragOver"),w.eventCanceled)return m;if(y.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||f._ignoreWhileAnimating===n)return v(!1);if(yn=!1,c&&!p.disabled&&(g?o||(l=$!==H):re===this||(this.lastPutMode=tn.checkPull(this,c,y,e))&&d.checkPut(this,c,y,e))){if(u=this._getDirection(e,n)==="vertical",i=J(y),_("dragOverValid"),w.eventCanceled)return m;if(l)return $=H,h(),this._hideClone(),_("revert"),w.eventCanceled||(pt?H.insertBefore(y,pt):H.appendChild(y)),v(!0);var S=er(t,p.draggable);if(!S||Mo(e,u,this)&&!S.animated){if(S===y)return v(!1);if(S&&t===e.target&&(n=S),n&&(s=J(n)),on(H,t,y,i,n,s,e,!!n)!==!1)return h(),S&&S.nextSibling?t.insertBefore(y,S.nextSibling):t.appendChild(y),$=t,b(),v(!0)}else if(S&&ko(e,u,this)){var D=It(t,0,p,!0);if(D===y)return v(!1);if(n=D,s=J(n),on(H,t,y,i,n,s,e,!1)!==!1)return h(),t.insertBefore(y,D),$=t,b(),v(!0)}else if(n.parentNode===t){s=J(n);var M=0,G,j=y.parentNode!==t,E=!Co(y.animated&&y.toRect||i,n.animated&&n.toRect||s,u),ie=u?"top":"left",X=pr(n,"top","top")||pr(y,"top","top"),U=X?X.scrollTop:void 0;yt!==n&&(G=s[ie],Yt=!1,nn=!E&&p.invertSwap||j),M=No(e,n,s,u,E?1:p.swapThreshold,p.invertedSwapThreshold==null?p.swapThreshold:p.invertedSwapThreshold,nn,yt===n);var K;if(M!==0){var N=Pe(y);do N-=M,K=$.children[N];while(K&&(A(K,"display")==="none"||K===x))}if(M===0||K===n)return v(!1);yt=n,Ut=M;var L=n.nextElementSibling,W=!1;W=M===1;var Se=on(H,t,y,i,n,s,e,W);if(Se!==!1)return(Se===1||Se===-1)&&(W=Se===1),qn=!0,setTimeout(Oo,30),h(),W&&!L?t.appendChild(y):n.parentNode.insertBefore(y,W?L:n),X&&Hr(X,0,U-X.scrollTop),$=y.parentNode,G!==void 0&&!nn&&(fn=Math.abs(G-J(n)[ie])),b(),v(!0)}if(t.contains(y))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){P(document,"mousemove",this._onTouchMove),P(document,"touchmove",this._onTouchMove),P(document,"pointermove",this._onTouchMove),P(document,"dragover",ct),P(document,"mousemove",ct),P(document,"touchmove",ct)},_offUpEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._onDrop),P(e,"touchend",this._onDrop),P(e,"pointerup",this._onDrop),P(e,"pointercancel",this._onDrop),P(e,"touchcancel",this._onDrop),P(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(Ee=Pe(y),ot=Pe(y,n.draggable),ye("drop",this,{evt:e}),$=y&&y.parentNode,Ee=Pe(y),ot=Pe(y,n.draggable),w.eventCanceled){this._nulling();return}Tt=!1,nn=!1,Yt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),jn(this.cloneId),jn(this._dragStartId),this.nativeDraggable&&(P(document,"drop",this),P(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vt&&A(document.body,"user-select",""),A(y,"transform",""),e&&(Ft&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(H===$||re&&re.lastPutMode!=="clone")&&V&&V.parentNode&&V.parentNode.removeChild(V),y&&(this.nativeDraggable&&P(y,"dragend",this),Bn(y),y.style["will-change"]="",Ft&&!Tt&&Ae(y,re?re.options.ghostClass:this.options.ghostClass,!1),Ae(y,this.options.chosenClass,!1),fe({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==$?(Ee>=0&&(fe({rootEl:$,name:"add",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"remove",toEl:$,originalEvent:e}),fe({rootEl:$,name:"sort",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),re&&re.save()):Ee!==Et&&Ee>=0&&(fe({sortable:this,name:"update",toEl:$,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),w.active&&((Ee==null||Ee===-1)&&(Ee=Et,ot=Xt),fe({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ye("nulling",this),H=y=$=x=pt=V=dn=it=ut=Ne=Ft=Ee=ot=Et=Xt=yt=Ut=re=tn=w.dragged=w.ghost=w.clone=w.active=null,Tn.forEach(function(e){e.checked=!0}),Tn.length=Mn=Nn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Po(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,s=n.length,l=this.options;i<s;i++)t=n[i],Be(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Bo(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(s,l){var p=i.children[l];Be(p,this.options.draggable,i,!1)&&(n[s]=p)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(i.removeChild(n[s]),i.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Jt.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&Ur(n)},destroy:function(){ye("destroy",this);var e=this.el;e[be]=null,P(e,"mousedown",this._onTapStart),P(e,"touchstart",this._onTapStart),P(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(P(e,"dragover",this),P(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bn.splice(bn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!it){if(ye("hideClone",this),w.eventCanceled)return;A(V,"display","none"),this.options.removeCloneOnHide&&V.parentNode&&V.parentNode.removeChild(V),it=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(it){if(ye("showClone",this),w.eventCanceled)return;y.parentNode==H&&!this.options.group.revertClone?H.insertBefore(V,y):pt?H.insertBefore(V,pt):H.appendChild(V),this.options.group.revertClone&&this.animate(y,V),A(V,"display",""),it=!1}}};function Po(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function on(r,e,t,n,i,s,l,p){var d,c=r[be],g=c.options.onMove,o;return window.CustomEvent&&!Ke&&!Zt?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=r,d.dragged=t,d.draggedRect=n,d.related=i||e,d.relatedRect=s||J(e),d.willInsertAfter=p,d.originalEvent=l,r.dispatchEvent(d),g&&(o=g.call(c,d,l)),o}function Bn(r){r.draggable=!1}function Oo(){qn=!1}function ko(r,e,t){var n=J(It(t.el,0,t.options,!0)),i=Vr(t.el,t.options,x),s=10;return e?r.clientX<i.left-s||r.clientY<n.top&&r.clientX<n.right:r.clientY<i.top-s||r.clientY<n.bottom&&r.clientX<n.left}function Mo(r,e,t){var n=J(er(t.el,t.options.draggable)),i=Vr(t.el,t.options,x),s=10;return e?r.clientX>i.right+s||r.clientY>n.bottom&&r.clientX>n.left:r.clientY>i.bottom+s||r.clientX>n.right&&r.clientY>n.top}function No(r,e,t,n,i,s,l,p){var d=n?r.clientY:r.clientX,c=n?t.height:t.width,g=n?t.top:t.left,o=n?t.bottom:t.right,a=!1;if(!l){if(p&&fn<c*i){if(!Yt&&(Ut===1?d>g+c*s/2:d<o-c*s/2)&&(Yt=!0),Yt)a=!0;else if(Ut===1?d<g+fn:d>o-fn)return-Ut}else if(d>g+c*(1-i)/2&&d<o-c*(1-i)/2)return Ro(e)}return a=a||l,a&&(d<g+c*s/2||d>o-c*s/2)?d>g+c/2?1:-1:0}function Ro(r){return Pe(y)<Pe(r)?1:-1}function Bo(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Fo(r){Tn.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&Tn.push(n)}}function pn(r){return setTimeout(r,0)}function jn(r){return clearTimeout(r)}Sn&&O(document,"touchmove",function(r){(w.active||Tt)&&r.cancelable&&r.preventDefault()});w.utils={on:O,off:P,css:A,find:Fr,is:function(e,t){return!!Be(e,t,e,!1)},extend:yo,throttle:Lr,closest:Be,toggleClass:Ae,clone:Gr,index:Pe,nextTick:pn,cancelNextTick:jn,detectDirection:Xr,getChild:It,expando:be};w.get=function(r){return r[be]};w.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(w.utils=Ue(Ue({},w.utils),n.utils)),Jt.mount(n)})};w.create=function(r,e){return new w(r,e)};w.version=go;var Z=[],Lt,Wn,Zn=!1,Fn,Ln,wn,Ht;function Lo(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):n.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):(P(document,"pointermove",this._handleFallbackAutoScroll),P(document,"touchmove",this._handleFallbackAutoScroll),P(document,"mousemove",this._handleFallbackAutoScroll)),vr(),mn(),bo()},nulling:function(){wn=Wn=Lt=Zn=Ht=Fn=Ln=null,Z.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,p=document.elementFromPoint(s,l);if(wn=t,n||this.options.forceAutoScrollFallback||Zt||Ke||Vt){Hn(t,this.options,p,n);var d=at(p,!0);Zn&&(!Ht||s!==Fn||l!==Ln)&&(Ht&&vr(),Ht=setInterval(function(){var c=at(document.elementFromPoint(s,l),!0);c!==d&&(d=c,mn()),Hn(t,i.options,c,n)},10),Fn=s,Ln=l)}else{if(!this.options.bubbleScroll||at(p,!0)===Xe()){mn();return}Hn(t,this.options,at(p,!1),!1)}}},Qe(r,{pluginName:"scroll",initializeByDefault:!0})}function mn(){Z.forEach(function(r){clearInterval(r.pid)}),Z=[]}function vr(){clearInterval(Ht)}var Hn=Lr(function(r,e,t,n){if(e.scroll){var i=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,l=e.scrollSensitivity,p=e.scrollSpeed,d=Xe(),c=!1,g;Wn!==t&&(Wn=t,mn(),Lt=e.scroll,g=e.scrollFn,Lt===!0&&(Lt=at(t,!0)));var o=0,a=Lt;do{var u=a,f=J(u),m=f.top,_=f.bottom,h=f.left,v=f.right,b=f.width,S=f.height,D=void 0,M=void 0,G=u.scrollWidth,j=u.scrollHeight,E=A(u),ie=u.scrollLeft,X=u.scrollTop;u===d?(D=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),M=S<j&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(D=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"),M=S<j&&(E.overflowY==="auto"||E.overflowY==="scroll"));var U=D&&(Math.abs(v-i)<=l&&ie+b<G)-(Math.abs(h-i)<=l&&!!ie),K=M&&(Math.abs(_-s)<=l&&X+S<j)-(Math.abs(m-s)<=l&&!!X);if(!Z[o])for(var N=0;N<=o;N++)Z[N]||(Z[N]={});(Z[o].vx!=U||Z[o].vy!=K||Z[o].el!==u)&&(Z[o].el=u,Z[o].vx=U,Z[o].vy=K,clearInterval(Z[o].pid),(U!=0||K!=0)&&(c=!0,Z[o].pid=setInterval((function(){n&&this.layer===0&&w.active._onTouchMove(wn);var L=Z[this.layer].vy?Z[this.layer].vy*p:0,W=Z[this.layer].vx?Z[this.layer].vx*p:0;typeof g=="function"&&g.call(w.dragged.parentNode[be],W,L,r,wn,Z[this.layer].el)!=="continue"||Hr(Z[this.layer].el,W,L)}).bind({layer:o}),24))),o++}while(e.bubbleScroll&&a!==d&&(a=at(a,!1)));Zn=c}},30),jr=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,s=e.activeSortable,l=e.dispatchSortableEvent,p=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var c=n||s;p();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,o=document.elementFromPoint(g.clientX,g.clientY);d(),c&&!c.el.contains(o)&&(l("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function tr(){}tr.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=It(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:jr};Qe(tr,{pluginName:"revertOnSpill"});function nr(){}nr.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:jr};Qe(nr,{pluginName:"removeOnSpill"});w.mount(new Lo);w.mount(nr,tr);class Ho{constructor(){this.steps=[]}visualizeCarryOver(e,t){const n=[],i=e+t;n.push({action:"show_first",value:e,coins:this.convertToCoins(e),message:`まず ${e}円 があります`}),n.push({action:"show_second",value:t,coins:this.convertToCoins(t),message:`つぎに ${t}円 をたします`});const s=e%10,l=t%10;if(s+l>=10){const d=10-s;n.push({action:"make_ten",value:d,message:`${s} に ${d} をたして 10 をつくります`}),n.push({action:"convert_to_ten",message:"10まいの1円が1まいの10円になります！"});const c=l-d;c>0&&n.push({action:"add_remainder",value:c,message:`のこりの ${c}円 をたします`}),n.push({action:"final_result",value:i,message:`ごうけい ${i}円 です！`})}else n.push({action:"simple_add",value:i,message:`${e} + ${t} = ${i}円 です！`});return n}convertToCoins(e){const t=[],n=Math.floor(e/10),i=e%10;for(let s=0;s<n;s++)t.push({type:"10",value:10});for(let s=0;s<i;s++)t.push({type:"1",value:1});return t}generateCoinsForAmount(e){const t=[];let n=e;const i=Math.floor(n/10);for(let s=0;s<i;s++)t.push(this.createCoin(10));n=n%10;for(let s=0;s<n;s++)t.push(this.createCoin(1));for(let s=0;s<3;s++)t.push(this.createCoin(10));for(let s=0;s<6;s++)t.push(this.createCoin(1));return t}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}checkCarryOverPattern(e,t){const n=e%10,i=t%10;return n+i>=10}getHint(e,t,n){const s=e+t-n;return s===0?"せいかいです！":s>0?`あと ${s}円 たりません`:`${Math.abs(s)}円 おおすぎます`}generateProblemSet(e=1){const t=[];switch(e){case 1:t.push({items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}]},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}]},{items:[{name:"パン",price:9,emoji:"🍞"},{name:"ぎゅうにゅう",price:4,emoji:"🥛"}]});break;case 2:t.push({items:[{name:"ケーキ",price:8,emoji:"🍰"},{name:"ジュース",price:7,emoji:"🧃"}]},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"ほん",price:6,emoji:"📚"}]});break}return t}}var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var yr;function Go(){return yr||(yr=1,function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var o=this||t;return o._counter=1e3,o._html5AudioPool=[],o.html5PoolSize=10,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator=typeof window<"u"&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.autoUnlock=!0,o._setup(),o},volume:function(o){var a=this||t;if(o=parseFloat(o),a.ctx||g(),typeof o<"u"&&o>=0&&o<=1){if(a._volume=o,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(o,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),m=0;m<f.length;m++){var _=a._howls[u]._soundById(f[m]);_&&_._node&&(_._node.volume=_._volume*o)}return a}return a._volume},mute:function(o){var a=this||t;a.ctx||g(),a._muted=o,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(o?0:a._volume,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),m=0;m<f.length;m++){var _=a._howls[u]._soundById(f[m]);_&&_._node&&(_._node.muted=o?!0:_._muted)}return a},stop:function(){for(var o=this||t,a=0;a<o._howls.length;a++)o._howls[a].stop();return o},unload:function(){for(var o=this||t,a=o._howls.length-1;a>=0;a--)o._howls[a].unload();return o.usingWebAudio&&o.ctx&&typeof o.ctx.close<"u"&&(o.ctx.close(),o.ctx=null,g()),o},codecs:function(o){return(this||t)._codecs[o.replace(/^x-/,"")]},_setup:function(){var o=this||t;if(o.state=o.ctx&&o.ctx.state||"suspended",o._autoSuspend(),!o.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(o._canPlayEvent="canplay")}catch{o.noAudio=!0}else o.noAudio=!0;try{var a=new Audio;a.muted&&(o.noAudio=!0)}catch{}return o.noAudio||o._setupCodecs(),o},_setupCodecs:function(){var o=this||t,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return o}if(!a||typeof a.canPlayType!="function")return o;var u=a.canPlayType("audio/mpeg;").replace(/^no$/,""),f=o._navigator?o._navigator.userAgent:"",m=f.match(/OPR\/(\d+)/g),_=m&&parseInt(m[0].split("/")[1],10)<33,h=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,v=f.match(/Version\/(.*?) /),b=h&&v&&parseInt(v[1],10)<15;return o._codecs={mp3:!!(!_&&(u||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},o},_unlockAudio:function(){var o=this||t;if(!(o._audioUnlocked||!o.ctx)){o._audioUnlocked=!1,o.autoUnlock=!1,!o._mobileUnloaded&&o.ctx.sampleRate!==44100&&(o._mobileUnloaded=!0,o.unload()),o._scratchBuffer=o.ctx.createBuffer(1,1,22050);var a=function(u){for(;o._html5AudioPool.length<o.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,o._releaseHtml5Audio(f)}catch{o.noAudio=!0;break}for(var m=0;m<o._howls.length;m++)if(!o._howls[m]._webAudio)for(var _=o._howls[m]._getSoundIds(),h=0;h<_.length;h++){var v=o._howls[m]._soundById(_[h]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}o._autoResume();var b=o.ctx.createBufferSource();b.buffer=o._scratchBuffer,b.connect(o.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof o.ctx.resume=="function"&&o.ctx.resume(),b.onended=function(){b.disconnect(0),o._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var S=0;S<o._howls.length;S++)o._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),o}},_obtainHtml5Audio:function(){var o=this||t;if(o._html5AudioPool.length)return o._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(o){var a=this||t;return o._unlocked&&a._html5AudioPool.push(o),a},_autoSuspend:function(){var o=this;if(!(!o.autoSuspend||!o.ctx||typeof o.ctx.suspend>"u"||!t.usingWebAudio)){for(var a=0;a<o._howls.length;a++)if(o._howls[a]._webAudio){for(var u=0;u<o._howls[a]._sounds.length;u++)if(!o._howls[a]._sounds[u]._paused)return o}return o._suspendTimer&&clearTimeout(o._suspendTimer),o._suspendTimer=setTimeout(function(){if(o.autoSuspend){o._suspendTimer=null,o.state="suspending";var f=function(){o.state="suspended",o._resumeAfterSuspend&&(delete o._resumeAfterSuspend,o._autoResume())};o.ctx.suspend().then(f,f)}},3e4),o}},_autoResume:function(){var o=this;if(!(!o.ctx||typeof o.ctx.resume>"u"||!t.usingWebAudio))return o.state==="running"&&o.ctx.state!=="interrupted"&&o._suspendTimer?(clearTimeout(o._suspendTimer),o._suspendTimer=null):o.state==="suspended"||o.state==="running"&&o.ctx.state==="interrupted"?(o.ctx.resume().then(function(){o.state="running";for(var a=0;a<o._howls.length;a++)o._howls[a]._emit("resume")}),o._suspendTimer&&(clearTimeout(o._suspendTimer),o._suspendTimer=null)):o.state==="suspending"&&(o._resumeAfterSuspend=!0),o}};var t=new e,n=function(o){var a=this;if(!o.src||o.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(o)};n.prototype={init:function(o){var a=this;return t.ctx||g(),a._autoplay=o.autoplay||!1,a._format=typeof o.format!="string"?o.format:[o.format],a._html5=o.html5||!1,a._muted=o.mute||!1,a._loop=o.loop||!1,a._pool=o.pool||5,a._preload=typeof o.preload=="boolean"||o.preload==="metadata"?o.preload:!0,a._rate=o.rate||1,a._sprite=o.sprite||{},a._src=typeof o.src!="string"?o.src:[o.src],a._volume=o.volume!==void 0?o.volume:1,a._xhr={method:o.xhr&&o.xhr.method?o.xhr.method:"GET",headers:o.xhr&&o.xhr.headers?o.xhr.headers:null,withCredentials:o.xhr&&o.xhr.withCredentials?o.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=o.onend?[{fn:o.onend}]:[],a._onfade=o.onfade?[{fn:o.onfade}]:[],a._onload=o.onload?[{fn:o.onload}]:[],a._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],a._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],a._onpause=o.onpause?[{fn:o.onpause}]:[],a._onplay=o.onplay?[{fn:o.onplay}]:[],a._onstop=o.onstop?[{fn:o.onstop}]:[],a._onmute=o.onmute?[{fn:o.onmute}]:[],a._onvolume=o.onvolume?[{fn:o.onvolume}]:[],a._onrate=o.onrate?[{fn:o.onrate}]:[],a._onseek=o.onseek?[{fn:o.onseek}]:[],a._onunlock=o.onunlock?[{fn:o.onunlock}]:[],a._onresume=[],a._webAudio=t.usingWebAudio&&!a._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var o=this,a=null;if(t.noAudio){o._emit("loaderror",null,"No audio support.");return}typeof o._src=="string"&&(o._src=[o._src]);for(var u=0;u<o._src.length;u++){var f,m;if(o._format&&o._format[u])f=o._format[u];else{if(m=o._src[u],typeof m!="string"){o._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(m),f||(f=/\.([^.]+)$/.exec(m.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&t.codecs(f)){a=o._src[u];break}}if(!a){o._emit("loaderror",null,"No codec support for selected audio sources.");return}return o._src=a,o._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(o._html5=!0,o._webAudio=!1),new i(o),o._webAudio&&l(o),o},play:function(o,a){var u=this,f=null;if(typeof o=="number")f=o,o=null;else{if(typeof o=="string"&&u._state==="loaded"&&!u._sprite[o])return null;if(typeof o>"u"&&(o="__default",!u._playLock)){for(var m=0,_=0;_<u._sounds.length;_++)u._sounds[_]._paused&&!u._sounds[_]._ended&&(m++,f=u._sounds[_]._id);m===1?o=null:f=null}}var h=f?u._soundById(f):u._inactiveSound();if(!h)return null;if(f&&!o&&(o=h._sprite||"__default"),u._state!=="loaded"){h._sprite=o,h._ended=!1;var v=h._id;return u._queue.push({event:"play",action:function(){u.play(v)}}),v}if(f&&!h._paused)return a||u._loadQueue("play"),h._id;u._webAudio&&t._autoResume();var b=Math.max(0,h._seek>0?h._seek:u._sprite[o][0]/1e3),S=Math.max(0,(u._sprite[o][0]+u._sprite[o][1])/1e3-b),D=S*1e3/Math.abs(h._rate),M=u._sprite[o][0]/1e3,G=(u._sprite[o][0]+u._sprite[o][1])/1e3;h._sprite=o,h._ended=!1;var j=function(){h._paused=!1,h._seek=b,h._start=M,h._stop=G,h._loop=!!(h._loop||u._sprite[o][2])};if(b>=G){u._ended(h);return}var E=h._node;if(u._webAudio){var ie=function(){u._playLock=!1,j(),u._refreshBuffer(h);var N=h._muted||u._muted?0:h._volume;E.gain.setValueAtTime(N,t.ctx.currentTime),h._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?h._loop?E.bufferSource.noteGrainOn(0,b,86400):E.bufferSource.noteGrainOn(0,b,S):h._loop?E.bufferSource.start(0,b,86400):E.bufferSource.start(0,b,S),D!==1/0&&(u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),D)),a||setTimeout(function(){u._emit("play",h._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ie():(u._playLock=!0,u.once("resume",ie),u._clearTimer(h._id))}else{var X=function(){E.currentTime=b,E.muted=h._muted||u._muted||t._muted||E.muted,E.volume=h._volume*t.volume(),E.playbackRate=h._rate;try{var N=E.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(u._playLock=!0,j(),N.then(function(){u._playLock=!1,E._unlocked=!0,a?u._loadQueue():u._emit("play",h._id)}).catch(function(){u._playLock=!1,u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):a||(u._playLock=!1,j(),u._emit("play",h._id)),E.playbackRate=h._rate,E.paused){u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}o!=="__default"||h._loop?u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),D):(u._endTimers[h._id]=function(){u._ended(h),E.removeEventListener("ended",u._endTimers[h._id],!1)},E.addEventListener("ended",u._endTimers[h._id],!1))}catch(L){u._emit("playerror",h._id,L)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=u._src,E.load());var U=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||U)X();else{u._playLock=!0,u._state="loading";var K=function(){u._state="loaded",X(),E.removeEventListener(t._canPlayEvent,K,!1)};E.addEventListener(t._canPlayEvent,K,!1),u._clearTimer(h._id)}}return h._id},pause:function(o){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(o)}}),a;for(var u=a._getSoundIds(o),f=0;f<u.length;f++){a._clearTimer(u[f]);var m=a._soundById(u[f]);if(m&&!m._paused&&(m._seek=a.seek(u[f]),m._rateSeek=0,m._paused=!0,a._stopFade(u[f]),m._node))if(a._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),a._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||a._emit("pause",m?m._id:null)}return a},stop:function(o,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(o)}}),u;for(var f=u._getSoundIds(o),m=0;m<f.length;m++){u._clearTimer(f[m]);var _=u._soundById(f[m]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,u._stopFade(f[m]),_._node&&(u._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),u._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&u._clearSound(_._node))),a||u._emit("stop",_._id))}return u},mute:function(o,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(o,a)}}),u;if(typeof a>"u")if(typeof o=="boolean")u._muted=o;else return u._muted;for(var f=u._getSoundIds(a),m=0;m<f.length;m++){var _=u._soundById(f[m]);_&&(_._muted=o,_._interval&&u._stopFade(_._id),u._webAudio&&_._node?_._node.gain.setValueAtTime(o?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:o),u._emit("mute",_._id))}return u},volume:function(){var o=this,a=arguments,u,f;if(a.length===0)return o._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var m=o._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length>=2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var h;if(typeof u<"u"&&u>=0&&u<=1){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,a)}}),o;typeof f>"u"&&(o._volume=u),f=o._getSoundIds(f);for(var v=0;v<f.length;v++)h=o._soundById(f[v]),h&&(h._volume=u,a[2]||o._stopFade(f[v]),o._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(u,t.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=u*t.volume()),o._emit("volume",h._id))}else return h=f?o._soundById(f):o._sounds[0],h?h._volume:0;return o},fade:function(o,a,u,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(o,a,u,f)}}),m;o=Math.min(Math.max(0,parseFloat(o)),1),a=Math.min(Math.max(0,parseFloat(a)),1),u=parseFloat(u),m.volume(o,f);for(var _=m._getSoundIds(f),h=0;h<_.length;h++){var v=m._soundById(_[h]);if(v){if(f||m._stopFade(_[h]),m._webAudio&&!v._muted){var b=t.ctx.currentTime,S=b+u/1e3;v._volume=o,v._node.gain.setValueAtTime(o,b),v._node.gain.linearRampToValueAtTime(a,S)}m._startFadeInterval(v,o,a,u,_[h],typeof f>"u")}}return m},_startFadeInterval:function(o,a,u,f,m,_){var h=this,v=a,b=u-a,S=Math.abs(b/.01),D=Math.max(4,S>0?f/S:f),M=Date.now();o._fadeTo=u,o._interval=setInterval(function(){var G=(Date.now()-M)/f;M=Date.now(),v+=b*G,v=Math.round(v*100)/100,b<0?v=Math.max(u,v):v=Math.min(u,v),h._webAudio?o._volume=v:h.volume(v,o._id,!0),_&&(h._volume=v),(u<a&&v<=u||u>a&&v>=u)&&(clearInterval(o._interval),o._interval=null,o._fadeTo=null,h.volume(u,o._id),h._emit("fade",o._id))},D)},_stopFade:function(o){var a=this,u=a._soundById(o);return u&&u._interval&&(a._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,a.volume(u._fadeTo,o),u._fadeTo=null,a._emit("fade",o)),a},loop:function(){var o=this,a=arguments,u,f,m;if(a.length===0)return o._loop;if(a.length===1)if(typeof a[0]=="boolean")u=a[0],o._loop=u;else return m=o._soundById(parseInt(a[0],10)),m?m._loop:!1;else a.length===2&&(u=a[0],f=parseInt(a[1],10));for(var _=o._getSoundIds(f),h=0;h<_.length;h++)m=o._soundById(_[h]),m&&(m._loop=u,o._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=u,u&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,o.playing(_[h])&&(o.pause(_[h],!0),o.play(_[h],!0)))));return o},rate:function(){var o=this,a=arguments,u,f;if(a.length===0)f=o._sounds[0]._id;else if(a.length===1){var m=o._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var h;if(typeof u=="number"){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,a)}}),o;typeof f>"u"&&(o._rate=u),f=o._getSoundIds(f);for(var v=0;v<f.length;v++)if(h=o._soundById(f[v]),h){o.playing(f[v])&&(h._rateSeek=o.seek(f[v]),h._playStart=o._webAudio?t.ctx.currentTime:h._playStart),h._rate=u,o._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):h._node&&(h._node.playbackRate=u);var b=o.seek(f[v]),S=(o._sprite[h._sprite][0]+o._sprite[h._sprite][1])/1e3-b,D=S*1e3/Math.abs(h._rate);(o._endTimers[f[v]]||!h._paused)&&(o._clearTimer(f[v]),o._endTimers[f[v]]=setTimeout(o._ended.bind(o,h),D)),o._emit("rate",h._id)}}else return h=o._soundById(f),h?h._rate:o._rate;return o},seek:function(){var o=this,a=arguments,u,f;if(a.length===0)o._sounds.length&&(f=o._sounds[0]._id);else if(a.length===1){var m=o._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):o._sounds.length&&(f=o._sounds[0]._id,u=parseFloat(a[0]))}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(o._state!=="loaded"||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,a)}}),o;var h=o._soundById(f);if(h)if(typeof u=="number"&&u>=0){var v=o.playing(f);v&&o.pause(f,!0),h._seek=u,h._ended=!1,o._clearTimer(f),!o._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=u);var b=function(){v&&o.play(f,!0),o._emit("seek",f)};if(v&&!o._webAudio){var S=function(){o._playLock?setTimeout(S,0):b()};setTimeout(S,0)}else b()}else if(o._webAudio){var D=o.playing(f)?t.ctx.currentTime-h._playStart:0,M=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(M+D*Math.abs(h._rate))}else return h._node.currentTime;return o},playing:function(o){var a=this;if(typeof o=="number"){var u=a._soundById(o);return u?!u._paused:!1}for(var f=0;f<a._sounds.length;f++)if(!a._sounds[f]._paused)return!0;return!1},duration:function(o){var a=this,u=a._duration,f=a._soundById(o);return f&&(u=a._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var o=this,a=o._sounds,u=0;u<a.length;u++)a[u]._paused||o.stop(a[u]._id),o._webAudio||(o._clearSound(a[u]._node),a[u]._node.removeEventListener("error",a[u]._errorFn,!1),a[u]._node.removeEventListener(t._canPlayEvent,a[u]._loadFn,!1),a[u]._node.removeEventListener("ended",a[u]._endFn,!1),t._releaseHtml5Audio(a[u]._node)),delete a[u]._node,o._clearTimer(a[u]._id);var f=t._howls.indexOf(o);f>=0&&t._howls.splice(f,1);var m=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===o._src||o._src.indexOf(t._howls[u]._src)>=0){m=!1;break}return s&&m&&delete s[o._src],t.noAudio=!1,o._state="unloaded",o._sounds=[],o=null,null},on:function(o,a,u,f){var m=this,_=m["_on"+o];return typeof a=="function"&&_.push(f?{id:u,fn:a,once:f}:{id:u,fn:a}),m},off:function(o,a,u){var f=this,m=f["_on"+o],_=0;if(typeof a=="number"&&(u=a,a=null),a||u)for(_=0;_<m.length;_++){var h=u===m[_].id;if(a===m[_].fn&&h||!a&&h){m.splice(_,1);break}}else if(o)f["_on"+o]=[];else{var v=Object.keys(f);for(_=0;_<v.length;_++)v[_].indexOf("_on")===0&&Array.isArray(f[v[_]])&&(f[v[_]]=[])}return f},once:function(o,a,u){var f=this;return f.on(o,a,u,1),f},_emit:function(o,a,u){for(var f=this,m=f["_on"+o],_=m.length-1;_>=0;_--)(!m[_].id||m[_].id===a||o==="load")&&(setTimeout((function(h){h.call(this,a,u)}).bind(f,m[_].fn),0),m[_].once&&f.off(o,m[_].fn,m[_].id));return f._loadQueue(o),f},_loadQueue:function(o){var a=this;if(a._queue.length>0){var u=a._queue[0];u.event===o&&(a._queue.shift(),a._loadQueue()),o||u.action()}return a},_ended:function(o){var a=this,u=o._sprite;if(!a._webAudio&&o._node&&!o._node.paused&&!o._node.ended&&o._node.currentTime<o._stop)return setTimeout(a._ended.bind(a,o),100),a;var f=!!(o._loop||a._sprite[u][2]);if(a._emit("end",o._id),!a._webAudio&&f&&a.stop(o._id,!0).play(o._id),a._webAudio&&f){a._emit("play",o._id),o._seek=o._start||0,o._rateSeek=0,o._playStart=t.ctx.currentTime;var m=(o._stop-o._start)*1e3/Math.abs(o._rate);a._endTimers[o._id]=setTimeout(a._ended.bind(a,o),m)}return a._webAudio&&!f&&(o._paused=!0,o._ended=!0,o._seek=o._start||0,o._rateSeek=0,a._clearTimer(o._id),a._cleanBuffer(o._node),t._autoSuspend()),!a._webAudio&&!f&&a.stop(o._id,!0),a},_clearTimer:function(o){var a=this;if(a._endTimers[o]){if(typeof a._endTimers[o]!="function")clearTimeout(a._endTimers[o]);else{var u=a._soundById(o);u&&u._node&&u._node.removeEventListener("ended",a._endTimers[o],!1)}delete a._endTimers[o]}return a},_soundById:function(o){for(var a=this,u=0;u<a._sounds.length;u++)if(o===a._sounds[u]._id)return a._sounds[u];return null},_inactiveSound:function(){var o=this;o._drain();for(var a=0;a<o._sounds.length;a++)if(o._sounds[a]._ended)return o._sounds[a].reset();return new i(o)},_drain:function(){var o=this,a=o._pool,u=0,f=0;if(!(o._sounds.length<a)){for(f=0;f<o._sounds.length;f++)o._sounds[f]._ended&&u++;for(f=o._sounds.length-1;f>=0;f--){if(u<=a)return;o._sounds[f]._ended&&(o._webAudio&&o._sounds[f]._node&&o._sounds[f]._node.disconnect(0),o._sounds.splice(f,1),u--)}}},_getSoundIds:function(o){var a=this;if(typeof o>"u"){for(var u=[],f=0;f<a._sounds.length;f++)u.push(a._sounds[f]._id);return u}else return[o]},_refreshBuffer:function(o){var a=this;return o._node.bufferSource=t.ctx.createBufferSource(),o._node.bufferSource.buffer=s[a._src],o._panner?o._node.bufferSource.connect(o._panner):o._node.bufferSource.connect(o._node),o._node.bufferSource.loop=o._loop,o._loop&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop||0),o._node.bufferSource.playbackRate.setValueAtTime(o._rate,t.ctx.currentTime),a},_cleanBuffer:function(o){var a=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!o.bufferSource)return a;if(t._scratchBuffer&&o.bufferSource&&(o.bufferSource.onended=null,o.bufferSource.disconnect(0),u))try{o.bufferSource.buffer=t._scratchBuffer}catch{}return o.bufferSource=null,a},_clearSound:function(o){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(o.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(o){this._parent=o,this.init()};i.prototype={init:function(){var o=this,a=o._parent;return o._muted=a._muted,o._loop=a._loop,o._volume=a._volume,o._rate=a._rate,o._seek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,a._sounds.push(o),o.create(),o},create:function(){var o=this,a=o._parent,u=t._muted||o._muted||o._parent._muted?0:o._volume;return a._webAudio?(o._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),o._node.gain.setValueAtTime(u,t.ctx.currentTime),o._node.paused=!0,o._node.connect(t.masterGain)):t.noAudio||(o._node=t._obtainHtml5Audio(),o._errorFn=o._errorListener.bind(o),o._node.addEventListener("error",o._errorFn,!1),o._loadFn=o._loadListener.bind(o),o._node.addEventListener(t._canPlayEvent,o._loadFn,!1),o._endFn=o._endListener.bind(o),o._node.addEventListener("ended",o._endFn,!1),o._node.src=a._src,o._node.preload=a._preload===!0?"auto":a._preload,o._node.volume=u*t.volume(),o._node.load()),o},reset:function(){var o=this,a=o._parent;return o._muted=a._muted,o._loop=a._loop,o._volume=a._volume,o._rate=a._rate,o._seek=0,o._rateSeek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,o},_errorListener:function(){var o=this;o._parent._emit("loaderror",o._id,o._node.error?o._node.error.code:0),o._node.removeEventListener("error",o._errorFn,!1)},_loadListener:function(){var o=this,a=o._parent;a._duration=Math.ceil(o._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),o._node.removeEventListener(t._canPlayEvent,o._loadFn,!1)},_endListener:function(){var o=this,a=o._parent;a._duration===1/0&&(a._duration=Math.ceil(o._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(o)),o._node.removeEventListener("ended",o._endFn,!1)}};var s={},l=function(o){var a=o._src;if(s[a]){o._duration=s[a].duration,c(o);return}if(/^data:[^;]+;base64,/.test(a)){for(var u=atob(a.split(",")[1]),f=new Uint8Array(u.length),m=0;m<u.length;++m)f[m]=u.charCodeAt(m);d(f.buffer,o)}else{var _=new XMLHttpRequest;_.open(o._xhr.method,a,!0),_.withCredentials=o._xhr.withCredentials,_.responseType="arraybuffer",o._xhr.headers&&Object.keys(o._xhr.headers).forEach(function(h){_.setRequestHeader(h,o._xhr.headers[h])}),_.onload=function(){var h=(_.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){o._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}d(_.response,o)},_.onerror=function(){o._webAudio&&(o._html5=!0,o._webAudio=!1,o._sounds=[],delete s[a],o.load())},p(_)}},p=function(o){try{o.send()}catch{o.onerror()}},d=function(o,a){var u=function(){a._emit("loaderror",null,"Decoding audio data failed.")},f=function(m){m&&a._sounds.length>0?(s[a._src]=m,c(a,m)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(o).then(f).catch(u):t.ctx.decodeAudioData(o,f,u)},c=function(o,a){a&&!o._duration&&(o._duration=a.duration),Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue())},g=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var o=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),a=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=a?parseInt(a[1],10):null;if(o&&u&&u<9){var f=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!f&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=n,typeof Nt<"u"?(Nt.HowlerGlobal=e,Nt.Howler=t,Nt.Howl=n,Nt.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,l,p){var d=this;if(!d.ctx||!d.ctx.listener)return d;var c=d._orientation;if(n=typeof n!="number"?c[1]:n,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,l=typeof l!="number"?c[4]:l,p=typeof p!="number"?c[5]:p,typeof t=="number")d._orientation=[t,n,i,s,l,p],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(t,n,i,s,l,p);else return c;return d},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var l=i._getSoundIds(n),p=0;p<l.length;p++){var d=i._soundById(l[p]);if(d)if(typeof t=="number")d._stereo=t,d._pos=[t,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,s),s==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(t,0,0):d._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",d._id);else return d._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(t,n,i,s)}}),l;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")l._pos=[t,n,i];else return l._pos;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._pos=[t,n,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(t,n,i)),l._emit("pos",c._id);else return c._pos}return l},Howl.prototype.orientation=function(t,n,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(t,n,i,s)}}),l;if(n=typeof n!="number"?l._orientation[1]:n,i=typeof i!="number"?l._orientation[2]:i,typeof s>"u")if(typeof t=="number")l._orientation=[t,n,i];else return l._orientation;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._orientation=[t,n,i],c._node&&(c._panner||(c._pos||(c._pos=l._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(t,n,i)),l._emit("orientation",c._id);else return c._orientation}return l},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,l;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return l=t._soundById(parseInt(n[0],10)),l?l._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var p=t._getSoundIds(s),d=0;d<p.length;d++)if(l=t._soundById(p[d]),l){var c=l._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var g=l._panner;g||(l._pos||(l._pos=t._pos||[0,0,-.5]),e(l,"spatial"),g=l._panner),g.coneInnerAngle=c.coneInnerAngle,g.coneOuterAngle=c.coneOuterAngle,g.coneOuterGain=c.coneOuterGain,g.distanceModel=c.distanceModel,g.maxDistance=c.maxDistance,g.refDistance=c.refDistance,g.rolloffFactor=c.rolloffFactor,g.panningModel=c.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Gn)),Gn}Go();class Vo{constructor(){this.sounds={},this.soundEnabled=!0,this.volume=.7,this.initializeDummySounds()}initializeDummySounds(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sounds={"coin-pickup":this.createToneSound(800,.1),"coin-drop":this.createToneSound(400,.2),"register-open":this.createToneSound(600,.3),success:this.createSuccessSound(),wrong:this.createErrorSound(),"level-up":this.createLevelUpSound(),"ten-conversion":this.createMagicSound()}}createToneSound(e,t){return{play:()=>{if(!this.soundEnabled)return;const n=this.audioContext.createOscillator(),i=this.audioContext.createGain();n.connect(i),i.connect(this.audioContext.destination),n.frequency.value=e,n.type="sine",i.gain.setValueAtTime(0,this.audioContext.currentTime),i.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),n.start(this.audioContext.currentTime),n.stop(this.audioContext.currentTime+t)}}}createSuccessSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,659,784,1047],t=.15;e.forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=n,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*100)})}}}createErrorSound(){return{play:()=>{if(!this.soundEnabled)return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(200,this.audioContext.currentTime),e.frequency.linearRampToValueAtTime(100,this.audioContext.currentTime+.3),e.type="sawtooth",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3)}}}createLevelUpSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,587,659,698,784,880,988,1047],t=.1;e.forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=n,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.15,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*50)})}}}createMagicSound(){return{play:()=>{if(this.soundEnabled)for(let e=0;e<5;e++)setTimeout(()=>{const t=this.audioContext.createOscillator(),n=this.audioContext.createGain();t.connect(n),n.connect(this.audioContext.destination);const i=800+Math.random()*800;t.frequency.value=i,t.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.3)},e*100)}}}play(e){if(this.sounds[e]&&this.soundEnabled)try{this.sounds[e].play()}catch(t){console.warn(`Could not play sound: ${e}`,t)}}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}enableSound(){this.soundEnabled=!0}disableSound(){this.soundEnabled=!1}toggleSound(){return this.soundEnabled=!this.soundEnabled,this.soundEnabled}}const Ze=new Vo;/**
 * anime.js - ESM
 * @version v4.0.2
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const Ye=typeof window<"u",Vn=Ye?window:null,Pt=Ye?document:null,q={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},k={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},ke={NONE:0,AUTO:1,FORCE:2},Te={replace:0,none:1,blend:2},br=Symbol(),rr=Symbol(),Wr=Symbol(),xn=Symbol(),$o=Symbol(),F=1e-11,Zr=1e12,Ot=1e3,Jn=120,mt="",Qt=new Map;Qt.set("x","translateX");Qt.set("y","translateY");Qt.set("z","translateZ");const or=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Jr=or.reduce((r,e)=>({...r,[e]:e+"("}),{}),Oe=()=>{},Xo=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,Uo=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Yo=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,qo=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,jo=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,Tr=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Wo=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Zo=/([a-z])([A-Z])/g,Jo=/(\w+)(\([^)]+\)+)/g,Qr={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:Jn,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Ot,delay:0,loopDelay:0,ease:"out(2)",composition:Te.replace,modifier:r=>r,onBegin:Oe,onBeforeUpdate:Oe,onUpdate:Oe,onLoop:Oe,onPause:Oe,onComplete:Oe,onRender:Oe},oe={defaults:Qr,root:Pt,precision:4,timeScale:1,tickThreshold:200},Kr={version:"4.0.2",engine:null};Ye&&(Vn.AnimeJS||(Vn.AnimeJS=[]),Vn.AnimeJS.push(Kr));const Qo=r=>r.replace(Zo,"$1-$2").toLowerCase(),Ct=(r,e)=>r.indexOf(e)===0,jt=Date.now,Wt=Array.isArray,$n=r=>r&&r.constructor===Object,Ko=r=>typeof r=="number"&&!isNaN(r),Cn=r=>typeof r=="string",An=r=>typeof r=="function",B=r=>typeof r>"u",Xn=r=>B(r)||r===null,zr=r=>Ye&&r instanceof SVGElement,eo=r=>Xo.test(r),to=r=>Ct(r,"rgb"),no=r=>Ct(r,"hsl"),zo=r=>eo(r)||to(r)||no(r),hn=r=>!oe.defaults.hasOwnProperty(r),an=r=>Cn(r)?parseFloat(r):r,wt=Math.pow,ei=Math.sqrt,ti=Math.sin,ni=Math.cos,ri=Math.abs,oi=Math.ceil,ro=Math.floor,ii=Math.asin,ir=Math.PI,wr=Math.round,ce=(r,e,t)=>r<e?e:r>t?t:r,Ar={},Q=(r,e)=>{if(e<0)return r;if(!e)return wr(r);let t=Ar[e];return t||(t=Ar[e]=10**e),wr(r*t)/t},dt=(r,e,t)=>r+(e-r)*t,ar=r=>r===1/0?Zr:r===-1/0?-1e12:r,qt=r=>r<=F?F:ar(Q(r,11)),pe=r=>Wt(r)?[...r]:r,ai=(r,e)=>{const t={...r};for(let n in e){const i=r[n];t[n]=B(i)?e[n]:i}return t},ee=(r,e,t,n="_prev",i="_next")=>{let s=r._head,l=i;for(t&&(s=r._tail,l=n);s;){const p=s[l];e(s),s=p}},Gt=(r,e,t="_prev",n="_next")=>{const i=e[t],s=e[n];i?i[n]=s:r._head=s,s?s[t]=i:r._tail=i,e[t]=null,e[n]=null},St=(r,e,t,n="_prev",i="_next")=>{let s=r._tail;for(;s&&t&&t(s,e);)s=s[n];const l=s?s[i]:r._head;s?s[i]=e:r._head=e,l?l[n]=e:r._tail=e,e[n]=s,e[i]=l};class oo{constructor(e=0){this.deltaTime=0,this._currentTime=e,this._elapsedTime=e,this._startTime=e,this._lastTime=e,this._scheduledTime=0,this._frameDuration=Q(Ot/Jn,0),this._fps=Jn,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(e){const t=this._frameDuration,n=+e,i=n<F?F:n,s=Q(Ot/i,0);this._fps=i,this._frameDuration=s,this._scheduledTime+=s-t}get speed(){return this._speed}set speed(e){const t=+e;this._speed=t<F?F:t}requestTick(e){const t=this._scheduledTime,n=this._elapsedTime;if(this._elapsedTime+=e-n,n<t)return ke.NONE;const i=this._frameDuration,s=n-t;return this._scheduledTime+=s<i?i:s,ke.AUTO}computeDeltaTime(e){const t=e-this._lastTime;return this.deltaTime=t,this._lastTime=e,t}}const _n=(r,e,t,n,i)=>{const s=r.parent,l=r.duration,p=r.completed,d=r.iterationDuration,c=r.iterationCount,g=r._currentIteration,o=r._loopDelay,a=r._reversed,u=r._alternate,f=r._hasChildren,m=r._delay,_=r._currentTime,h=m+d,v=e-m,b=ce(_,-m,l),S=ce(v,-m,l),D=v-_,M=S>0,G=S>=l,j=l<=F,E=i===ke.FORCE;let ie=0,X=v,U=0;if(c>1){const Se=~~(S/(d+(G?0:o)));r._currentIteration=ce(Se,0,c),G&&r._currentIteration--,ie=r._currentIteration%2,X=S%(d+o)||0}const K=a^(u&&ie),N=r._ease;let L=G?K?0:l:K?d-X:X;N&&(L=d*N(L/d)||0);const W=(s?s.backwards:v<_)?!K:!!K;if(r._currentTime=v,r._iterationTime=L,r.backwards=W,M&&!r.began?(r.began=!0,!t&&!(s&&(W||!s.began))&&r.onBegin(r)):v<=0&&(r.began=!1),!t&&!f&&M&&r._currentIteration!==g&&r.onLoop(r),E||i===ke.AUTO&&(e>=m&&e<=h||e<=m&&b>m||e>=h&&b!==l)||L>=h&&b!==l||L<=m&&b>0||e<=b&&b===l&&p||G&&!p&&j){if(M&&(r.computeDeltaTime(b),t||r.onBeforeUpdate(r)),!f){const Se=E||(W?D*-1:D)>=oe.tickThreshold,Y=r._offset+(s?s._offset:0)+m+L;let T=r._head,ne,ae,ze,st,xe=0;for(;T;){const he=T._composition,Ce=T._currentTime,we=T._changeDuration,Mt=T._absoluteStartTime+T._changeDuration,Fe=T._nextRep,De=T._prevRep,qe=he!==Te.none;if((Se||(Ce!==we||Y<=Mt+(Fe?Fe._delay:0))&&(Ce!==0||Y>=T._absoluteStartTime))&&(!qe||!T._isOverridden&&(!T._isOverlapped||Y<=Mt)&&(!Fe||Fe._isOverridden||Y<=Fe._absoluteStartTime)&&(!De||De._isOverridden||Y>=De._absoluteStartTime+De._changeDuration+T._delay))){const je=T._currentTime=ce(L-T._startTime,0,we),te=T._ease(je/T._updateDuration),_e=T._modifier,Me=T._valueType,de=T._tweenType,ge=de===q.OBJECT,ht=Me===k.NUMBER,Le=ht&&ge||te===0||te===1?-1:oe.precision;let ve,_t;if(ht)ve=_t=_e(Q(dt(T._fromNumber,T._toNumber,te),Le));else if(Me===k.UNIT)_t=_e(Q(dt(T._fromNumber,T._toNumber,te),Le)),ve=`${_t}${T._unit}`;else if(Me===k.COLOR){const z=T._fromNumbers,He=T._toNumbers,Ge=Q(ce(_e(dt(z[0],He[0],te)),0,255),0),We=Q(ce(_e(dt(z[1],He[1],te)),0,255),0),Kt=Q(ce(_e(dt(z[2],He[2],te)),0,255),0),gt=ce(_e(Q(dt(z[3],He[3],te),Le)),0,1);if(ve=`rgba(${Ge},${We},${Kt},${gt})`,qe){const lt=T._numbers;lt[0]=Ge,lt[1]=We,lt[2]=Kt,lt[3]=gt}}else if(Me===k.COMPLEX){ve=T._strings[0];for(let z=0,He=T._toNumbers.length;z<He;z++){const Ge=_e(Q(dt(T._fromNumbers[z],T._toNumbers[z],te),Le)),We=T._strings[z+1];ve+=`${We?Ge+We:Ge}`,qe&&(T._numbers[z]=Ge)}}if(qe&&(T._number=_t),!n&&he!==Te.blend){const z=T.property;ne=T.target,ge?ne[z]=ve:de===q.ATTRIBUTE?ne.setAttribute(z,ve):(ae=ne.style,de===q.TRANSFORM?(ne!==ze&&(ze=ne,st=ne[xn]),st[z]=ve,xe=1):de===q.CSS?ae[z]=ve:de===q.CSS_VAR&&ae.setProperty(z,ve)),M&&(U=1)}else T._value=ve}if(xe&&T._renderTransforms){let je=mt;for(let te in st)je+=`${Jr[te]}${st[te]}) `;ae.transform=je,xe=0}T=T._next}!t&&U&&r.onRender(r)}!t&&M&&r.onUpdate(r)}return s&&j?!t&&(s.began&&!W&&v>=l&&!p||W&&v<=F&&p)&&(r.onComplete(r),r.completed=!W):M&&G?c===1/0?r._startTime+=r.duration:r._currentIteration>=c-1&&(r.paused=!0,!p&&!f&&(r.completed=!0,!t&&!(s&&(W||!s.began))&&(r.onComplete(r),r._resolve(r)))):r.completed=!1,U},At=(r,e,t,n,i)=>{const s=r._currentIteration;if(_n(r,e,t,n,i),r._hasChildren){const l=r,p=l.backwards,d=n?e:l._iterationTime,c=jt();let g=0,o=!0;if(!n&&l._currentIteration!==s){const a=l.iterationDuration;ee(l,u=>{if(!p)!u.completed&&!u.backwards&&u._currentTime<u.iterationDuration&&_n(u,a,t,1,ke.FORCE),u.began=!1,u.completed=!1;else{const f=u.duration,m=u._offset+u._delay,_=m+f;!t&&f<=F&&(!m||_===a)&&u.onComplete(u)}}),t||l.onLoop(l)}ee(l,a=>{const u=Q((d-a._offset)*a._speed,12),f=a._fps<l._fps?a.requestTick(c):i;g+=_n(a,u,t,n,f),!a.completed&&o&&(o=!1)},p),!t&&g&&l.onRender(l),o&&l._currentTime>=l.duration&&(l.paused=!0,l.completed||(l.completed=!0,t||(l.onComplete(l),l._resolve(l))))}},Dt={animation:null,update:Oe},si=r=>{let e=Dt.animation;return e||(e={duration:F,computeDeltaTime:Oe,_offset:0,_delay:0,_head:null,_tail:null},Dt.animation=e,Dt.update=()=>{r.forEach(t=>{for(let n in t){const i=t[n],s=i._head;if(s){const l=s._valueType,p=l===k.COMPLEX||l===k.COLOR?pe(s._fromNumbers):null;let d=s._fromNumber,c=i._tail;for(;c&&c!==s;){if(p)for(let g=0,o=c._numbers.length;g<o;g++)p[g]+=c._numbers[g];else d+=c._number;c=c._prevAdd}s._toNumber=d,s._toNumbers=p}}}),_n(e,1,1,0,ke.FORCE)}),e},io=Ye?requestAnimationFrame:setImmediate,li=Ye?cancelAnimationFrame:clearImmediate;class ui extends oo{constructor(e){super(e),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=Qr,this.paused=!!(Ye&&Pt.hidden),this.reqId=null}update(){const e=this._currentTime=jt();if(this.requestTick(e)){this.computeDeltaTime(e);const t=this._speed,n=this._fps;let i=this._head;for(;i;){const s=i._next;i.paused?(Gt(this,i),this._hasChildren=!!this._tail,i._running=!1,i.completed&&!i._cancelled&&i.cancel()):At(i,(e-i._startTime)*i._speed*t,0,0,i._fps<n?i.requestTick(e):ke.AUTO),i=s}Dt.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=io(ao)),this}pause(){return this.paused=!0,ci()}resume(){if(this.paused)return this.paused=!1,ee(this,e=>e.resetTime()),this.wake()}get speed(){return this._speed*(oe.timeScale===1?1:Ot)}set speed(e){this._speed=e*oe.timeScale,ee(this,t=>t.speed=t._speed)}get timeUnit(){return oe.timeScale===1?"ms":"s"}set timeUnit(e){const n=e==="s",i=n?.001:1;if(oe.timeScale!==i){oe.timeScale=i,oe.tickThreshold=200*i;const s=n?.001:Ot;this.defaults.duration*=s,this._speed*=s}}get precision(){return oe.precision}set precision(e){oe.precision=e}}const ue=(()=>{const r=new ui(jt());return Ye&&(Kr.engine=r,Pt.addEventListener("visibilitychange",()=>{r.pauseOnDocumentHidden&&(Pt.hidden?r.pause():r.resume())})),r})(),ao=()=>{ue._head?(ue.reqId=io(ao),ue.update()):ue.reqId=0},ci=()=>(li(ue.reqId),ue.reqId=0,ue),di=(r,e,t)=>{const n=r.style.transform;let i;if(n){const s=r[xn];let l;for(;l=Jo.exec(n);){const p=l[1],d=l[2].slice(1,-1);s[p]=d,p===e&&(i=d,t&&(t[e]=d))}}return n&&!B(i)?i:Ct(e,"scale")?"1":Ct(e,"rotate")||Ct(e,"skew")?"0deg":"0px"};function Er(r){const e=Cn(r)?oe.root.querySelectorAll(r):r;if(e instanceof NodeList||e instanceof HTMLCollection)return e}function fi(r){if(Xn(r))return[];if(Wt(r)){const t=r.flat(1/0),n=[];for(let i=0,s=t.length;i<s;i++){const l=t[i];if(!Xn(l)){const p=Er(l);if(p)for(let d=0,c=p.length;d<c;d++){const g=p[d];if(!Xn(g)){let o=!1;for(let a=0,u=n.length;a<u;a++)if(n[a]===g){o=!0;break}o||n.push(g)}}else{let d=!1;for(let c=0,g=n.length;c<g;c++)if(n[c]===l){d=!0;break}d||n.push(l)}}}return n}if(!Ye)return[r];const e=Er(r);return e?Array.from(e):[r]}function pi(r){const e=fi(r),t=e.length;if(t)for(let n=0;n<t;n++){const i=e[n];if(!i[br]){i[br]=!0;const s=zr(i);(i.nodeType||s)&&(i[rr]=!0,i[Wr]=s,i[xn]={})}}return e}const mi=["opacity","rotate","overflow","color"],hi=(r,e)=>{if(mi.includes(e))return!1;if(r.getAttribute(e)||e in r){if(e==="scale"){const t=r.parentNode;return t&&t.tagName==="filter"}return!0}},_i=r=>{const e=Uo.exec(r)||Yo.exec(r),t=B(e[4])?1:+e[4];return[+e[1],+e[2],+e[3],t]},gi=r=>{const e=r.length,t=e===4||e===5;return[+("0x"+r[1]+r[t?1:2]),+("0x"+r[t?2:3]+r[t?2:4]),+("0x"+r[t?3:5]+r[t?3:6]),e===5||e===9?+(+("0x"+r[t?4:7]+r[t?4:8])/255).toFixed(3):1]},Un=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r),vi=r=>{const e=qo.exec(r)||jo.exec(r),t=+e[1]/360,n=+e[2]/100,i=+e[3]/100,s=B(e[4])?1:+e[4];let l,p,d;if(n===0)l=p=d=i;else{const c=i<.5?i*(1+n):i+n-i*n,g=2*i-c;l=Q(Un(g,c,t+1/3)*255,0),p=Q(Un(g,c,t)*255,0),d=Q(Un(g,c,t-1/3)*255,0)}return[l,p,d,s]},yi=r=>to(r)?_i(r):eo(r)?gi(r):no(r)?vi(r):[0,0,0,1],me=(r,e)=>B(r)?e:r,et=(r,e,t,n,i)=>{if(An(r)){const s=()=>{const l=r(e,t,n);return isNaN(+l)?l||0:+l};return i&&(i.func=s),s()}else return r},so=(r,e)=>r[rr]?r[Wr]&&hi(r,e)?q.ATTRIBUTE:or.includes(e)||Qt.get(e)?q.TRANSFORM:Ct(e,"--")?q.CSS_VAR:e in r.style?q.CSS:e in r?q.OBJECT:q.ATTRIBUTE:q.OBJECT,Sr=(r,e,t)=>{const n=r.style[e];n&&t&&(t[e]=n);const i=n||getComputedStyle(r[$o]||r).getPropertyValue(e);return i==="auto"?"0":i},Rt=(r,e,t,n)=>{const i=B(t)?so(r,e):t;return i===q.OBJECT?r[e]||0:i===q.ATTRIBUTE?r.getAttribute(e):i===q.TRANSFORM?di(r,e,n):i===q.CSS_VAR?Sr(r,e,n).trimStart():Sr(r,e,n)},xr=(r,e,t)=>t==="-"?r-e:t==="+"?r+e:r*e,sr=()=>({t:k.NUMBER,n:0,u:null,o:null,d:null,s:null}),Ve=(r,e)=>{if(e.t=k.NUMBER,e.n=0,e.u=null,e.o=null,e.d=null,e.s=null,!r)return e;const t=+r;if(isNaN(t)){let n=r;n[1]==="="&&(e.o=n[0],n=n.slice(2));const i=n.includes(" ")?!1:Wo.exec(n);if(i)return e.t=k.UNIT,e.n=+i[1],e.u=i[2],e;if(e.o)return e.n=+n,e;if(zo(n))return e.t=k.COLOR,e.d=yi(n),e;{const s=n.match(Tr);return e.t=k.COMPLEX,e.d=s?s.map(Number):[],e.s=n.split(Tr)||[],e}}else return e.n=t,e},Cr=(r,e)=>(e.t=r._valueType,e.n=r._toNumber,e.u=r._unit,e.o=null,e.d=pe(r._toNumbers),e.s=pe(r._strings),e),ft=sr(),En={_rep:new WeakMap,_add:new Map},lr=(r,e,t="_rep")=>{const n=En[t];let i=n.get(r);return i||(i={},n.set(r,i)),i[e]?i[e]:i[e]={_head:null,_tail:null}},bi=(r,e)=>r._isOverridden||r._absoluteStartTime>e._absoluteStartTime,gn=r=>{r._isOverlapped=1,r._isOverridden=1,r._changeDuration=F,r._currentTime=F},lo=(r,e)=>{const t=r._composition;if(t===Te.replace){const n=r._absoluteStartTime;St(e,r,bi,"_prevRep","_nextRep");const i=r._prevRep;if(i){const s=i.parent,l=i._absoluteStartTime+i._changeDuration;if(r.parent.id!==s.id&&s.iterationCount>1&&l+(s.duration-s.iterationDuration)>n){gn(i);let c=i._prevRep;for(;c&&c.parent.id===s.id;)gn(c),c=c._prevRep}const p=n-r._delay;if(l>p){const c=i._startTime,g=l-(c+i._updateDuration);i._changeDuration=p-g-c,i._currentTime=i._changeDuration,i._isOverlapped=1,i._changeDuration<F&&gn(i)}let d=!0;if(ee(s,c=>{c._isOverlapped||(d=!1)}),d){const c=s.parent;if(c){let g=!0;ee(c,o=>{o!==s&&ee(o,a=>{a._isOverlapped||(g=!1)})}),g&&c.cancel()}else s.cancel()}}}else if(t===Te.blend){const n=lr(r.target,r.property,"_add"),i=si(En._add);let s=n._head;s||(s={...r},s._composition=Te.replace,s._updateDuration=F,s._startTime=0,s._numbers=pe(r._fromNumbers),s._number=0,s._next=null,s._prev=null,St(n,s),St(i,s));const l=r._toNumber;if(r._fromNumber=s._fromNumber-l,r._toNumber=0,r._numbers=pe(r._fromNumbers),r._number=0,s._fromNumber=l,r._toNumbers){const p=pe(r._toNumbers);p&&p.forEach((d,c)=>{r._fromNumbers[c]=s._fromNumbers[c]-d,r._toNumbers[c]=0}),s._fromNumbers=p}St(n,r,null,"_prevAdd","_nextAdd")}return r},Ti=r=>{const e=r._composition;if(e!==Te.none){const t=r.target,n=r.property,l=En._rep.get(t)[n];if(Gt(l,r,"_prevRep","_nextRep"),e===Te.blend){const p=En._add,d=p.get(t);if(!d)return;const c=d[n],g=Dt.animation;Gt(c,r,"_prevAdd","_nextAdd");const o=c._head;if(o&&o===c._tail){Gt(c,o,"_prevAdd","_nextAdd"),Gt(g,o);let a=!0;for(let u in d)if(d[u]._head){a=!1;break}a&&p.delete(t)}}}return r},Dr=r=>(r.paused=!0,r.began=!1,r.completed=!1,r),Qn=r=>(r._cancelled&&(r._hasChildren?ee(r,Qn):ee(r,e=>{e._composition!==Te.none&&lo(e,lr(e.target,e.property))}),r._cancelled=0),r);let wi=0;class Ai extends oo{constructor(e={},t=null,n=0){super(0);const{id:i,delay:s,duration:l,reversed:p,alternate:d,loop:c,loopDelay:g,autoplay:o,frameRate:a,playbackRate:u,onComplete:f,onLoop:m,onPause:_,onBegin:h,onBeforeUpdate:v,onUpdate:b}=e,S=t?0:ue._elapsedTime,D=t?t.defaults:oe.defaults,M=An(s)||B(s)?D.delay:+s,G=An(l)||B(l)?1/0:+l,j=me(c,D.loop),E=me(g,D.loopDelay),ie=j===!0||j===1/0||j<0?1/0:j+1;let X=0;if(t)X=n;else{let U=jt();ue.paused&&(ue.requestTick(U),U=ue._elapsedTime),X=U-ue._startTime}this.id=B(i)?++wi:i,this.parent=t,this.duration=ar((G+E)*ie-E)||F,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=h||D.onBegin,this.onBeforeUpdate=v||D.onBeforeUpdate,this.onUpdate=b||D.onUpdate,this.onLoop=m||D.onLoop,this.onPause=_||D.onPause,this.onComplete=f||D.onComplete,this.iterationDuration=G,this.iterationCount=ie,this._autoplay=t?!1:me(o,D.autoplay),this._offset=X,this._delay=M,this._loopDelay=E,this._iterationTime=0,this._currentIteration=0,this._resolve=Oe,this._running=!1,this._reversed=+me(p,D.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=me(d,D.alternate),this._prev=null,this._next=null,this._elapsedTime=S,this._startTime=S,this._lastTime=S,this._fps=me(a,D.frameRate),this._speed=me(u,D.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(e){e?this.cancel():this.reset(1).play()}get currentTime(){return ce(Q(this._currentTime,oe.precision),-this._delay,this.duration)}set currentTime(e){const t=this.paused;this.pause().seek(+e),t||this.resume()}get iterationCurrentTime(){return Q(this._iterationTime,oe.precision)}set iterationCurrentTime(e){this.currentTime=this.iterationDuration*this._currentIteration+e}get progress(){return ce(Q(this._currentTime/this.duration,5),0,1)}set progress(e){this.currentTime=this.duration*e}get iterationProgress(){return ce(Q(this._iterationTime/this.iterationDuration,5),0,1)}set iterationProgress(e){const t=this.iterationDuration;this.currentTime=t*this._currentIteration+t*e}get currentIteration(){return this._currentIteration}set currentIteration(e){this.currentTime=this.iterationDuration*ce(+e,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(e){e?this.reverse():this.play()}get speed(){return super.speed}set speed(e){super.speed=e,this.resetTime()}reset(e=0){return Qn(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,At(this,0,1,e,ke.FORCE),Dr(this),this._hasChildren&&ee(this,Dr),this}init(e=0){this.fps=this._fps,this.speed=this._speed,!e&&this._hasChildren&&At(this,this.duration,1,e,ke.FORCE),this.reset(e);const t=this._autoplay;return t===!0?this.resume():t&&!B(t.linked)&&t.link(this),this}resetTime(){const e=1/(this._speed*ue._speed);return this._startTime=jt()-(this._currentTime+this._delay)*e,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=F&&!this._hasChildren?At(this,F,0,0,ke.FORCE):(this._running||(St(ue,this),ue._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,ue.wake()),this):this}restart(){return this.reset(0).resume()}seek(e,t=0,n=0){Qn(this),this.completed=!1;const i=this.paused;return this.paused=!0,At(this,e+this._delay,~~t,~~n,ke.AUTO),i?this:this.resume()}alternate(){const e=this._reversed,t=this.iterationCount,n=this.iterationDuration,i=t===1/0?ro(Zr/n):t;return this._reversed=+(this._alternate&&!(i%2)?e:!e),t===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(n*i-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?ee(this,e=>e.cancel(),!0):ee(this,Ti),this._cancelled=1,this.pause()}stretch(e){const t=this.duration,n=qt(e);if(t===n)return this;const i=e/t,s=e<=F;return this.duration=s?F:n,this.iterationDuration=s?F:qt(this.iterationDuration*i),this._offset*=i,this._delay*=i,this._loopDelay*=i,this}revert(){At(this,0,1,0,ke.AUTO);const e=this._autoplay;return e&&e.linked&&e.linked===this&&e.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(e=Oe){const t=this.then,n=()=>{this.then=null,e(this),this.then=t,this._resolve=Oe};return new Promise(i=>(this._resolve=()=>i(n()),this.completed&&this._resolve(),this))}}const kt=r=>r,uo=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,Ei=(r,e,t)=>{let n=0,i=1,s,l,p=0;do l=n+(i-n)/2,s=uo(l,e,t)-r,s>0?i=l:n=l;while(ri(s)>1e-7&&++p<100);return l},Si=(r=.5,e=0,t=.5,n=1)=>r===e&&t===n?kt:i=>i===0||i===1?i:uo(Ei(i,r,t),e,n),xi=(r=10,e)=>{const t=e?oi:ro;return n=>t(ce(n,0,1)*r)*(1/r)},co=(...r)=>{const e=r.length;if(!e)return kt;const t=e-1,n=r[0],i=r[t],s=[0],l=[an(n)];for(let p=1;p<t;p++){const d=r[p],c=Cn(d)?d.trim().split(" "):[d],g=c[0],o=c[1];s.push(B(o)?p/t:an(o)/100),l.push(an(g))}return l.push(an(i)),s.push(1),function(d){for(let c=1,g=s.length;c<g;c++){const o=s[c];if(d<=o){const a=s[c-1],u=l[c-1];return u+(l[c]-u)*(d-a)/(o-a)}}return l[l.length-1]}},Ci=(r=10,e=1)=>{const t=[0],n=r-1;for(let i=1;i<n;i++){const s=t[i-1],l=i/n,p=(i+1)/n,d=l+(p-l)*Math.random(),c=l*(1-e)+d*e;t.push(ce(c,s,1))}return t.push(1),co(...t)},Di=ir/2,Ir=ir*2,Bt=(r=1.68)=>e=>wt(e,+r),Pr={[mt]:Bt,Quad:Bt(2),Cubic:Bt(3),Quart:Bt(4),Quint:Bt(5),Sine:r=>1-ni(r*Di),Circ:r=>1-ei(1-r*r),Expo:r=>r?wt(2,10*r-10):0,Bounce:r=>{let e,t=4;for(;r<((e=wt(2,--t))-1)/11;);return 1/wt(4,3-t)-7.5625*wt((e*3-2)/22-r,2)},Back:(r=1.70158)=>e=>(+r+1)*e*e*e-+r*e*e,Elastic:(r=1,e=.3)=>{const t=ce(+r,1,10),n=ce(+e,F,2),i=n/Ir*ii(1/t),s=Ir/n;return l=>l===0||l===1?l:-t*wt(2,-10*(1-l))*ti((1-l-i)*s)}},Kn={in:r=>e=>r(e),out:r=>e=>1-r(1-e),inOut:r=>e=>e<.5?r(e*2)/2:1-r(e*-2+2)/2,outIn:r=>e=>e<.5?(1-r(1-e*2))/2:(r(e*2-1)+1)/2},Ii=(r,e,t)=>{if(t[r])return t[r];if(r.indexOf("(")<=-1){const i=Kn[r]||r.includes("Back")||r.includes("Elastic")?e[r]():e[r];return i?t[r]=i:kt}else{const n=r.slice(0,-1).split("("),i=e[n[0]];return i?t[r]=i(...n[1].split(",")):kt}},Pi=(()=>{const r={linear:co,irregular:Ci,steps:xi,cubicBezier:Si};for(let e in Kn)for(let t in Pr){const n=Pr[t],i=Kn[e];r[e+t]=t===mt||t==="Back"||t==="Elastic"?(s,l)=>i(n(s,l)):i(n)}return r})(),Oi={linear:kt},Or=r=>An(r)?r:Cn(r)?Ii(r,Pi,Oi):kt,kr={},ki=(r,e,t)=>{if(t===q.TRANSFORM){const n=Qt.get(r);return n||r}else if(t===q.CSS||t===q.ATTRIBUTE&&zr(e)&&r in e.style){const n=kr[r];if(n)return n;{const i=r&&Qo(r);return kr[r]=i,i}}else return r},Yn={deg:1,rad:180/ir,turn:360},Mr={},Mi=(r,e,t,n=!1)=>{const i=e.u,s=e.n;if(e.t===k.UNIT&&i===t)return e;const l=s+i+t,p=Mr[l];if(!B(p)&&!n)e.n=p;else{let d;if(i in Yn)d=s*Yn[i]/Yn[t];else{const g=r.cloneNode(),o=r.parentNode,a=o&&o!==Pt?o:Pt.body;a.appendChild(g);const u=g.style;u.width=100+i;const f=g.offsetWidth||100;u.width=100+t;const m=g.offsetWidth||100,_=f/m;a.removeChild(g),d=_*s}e.n=d,Mr[l]=d}return e.t,k.UNIT,e.u=t,e},fo=r=>{if(r._hasChildren)ee(r,fo,!0);else{const e=r;e.pause(),ee(e,t=>{const n=t.property,i=t.target;if(i[rr]){const s=i.style,l=e._inlineStyles[n];if(t._tweenType===q.TRANSFORM){const p=i[xn];if(B(l)||l===mt?delete p[n]:p[n]=l,t._renderTransforms)if(!Object.keys(p).length)s.removeProperty("transform");else{let d=mt;for(let c in p)d+=Jr[c]+p[c]+") ";s.transform=d}}else B(l)||l===mt?s.removeProperty(n):s[n]=l;e._tail===t&&e.targets.forEach(p=>{p.getAttribute&&p.getAttribute("style")===mt&&p.removeAttribute("style")})}})}return r},C=sr(),I=sr(),sn={func:null},ln=[null],bt=[null,null],un={to:null};let Ni=0,tt,$e;const Ri=(r,e)=>{const t={};if(Wt(r)){const n=[].concat(...r.map(i=>Object.keys(i))).filter(hn);for(let i=0,s=n.length;i<s;i++){const l=n[i],p=r.map(d=>{const c={};for(let g in d){const o=d[g];hn(g)?g===l&&(c.to=o):c[g]=o}return c});t[l]=p}}else{const n=me(e.duration,oe.defaults.duration);Object.keys(r).map(s=>({o:parseFloat(s)/100,p:r[s]})).sort((s,l)=>s.o-l.o).forEach(s=>{const l=s.o,p=s.p;for(let d in p)if(hn(d)){let c=t[d];c||(c=t[d]=[]);const g=l*n;let o=c.length,a=c[o-1];const u={to:p[d]};let f=0;for(let m=0;m<o;m++)f+=c[m].duration;o===1&&(u.from=a.to),p.ease&&(u.ease=p.ease),u.duration=g-(o?f:0),c.push(u)}return s});for(let s in t){const l=t[s];let p;for(let d=0,c=l.length;d<c;d++){const g=l[d],o=g.ease;g.ease=p||void 0,p=o}l[0].duration||l.shift()}}return t};class Bi extends Ai{constructor(e,t,n,i,s=!1,l=0,p=0){super(t,n,i);const d=pi(e),c=d.length,g=t.keyframes,o=g?ai(Ri(g,t),t):t,{delay:a,duration:u,ease:f,playbackEase:m,modifier:_,composition:h,onRender:v}=o,b=n?n.defaults:oe.defaults,S=me(m,b.playbackEase),D=S?Or(S):null,M=!B(f)&&!B(f.ease),G=M?f.ease:me(f,D?"linear":b.ease),j=M?f.duration:me(u,b.duration),E=me(a,b.delay),ie=_||b.modifier,X=B(h)&&c>=Ot?Te.none:B(h)?b.composition:h,U={},K=this._offset+(n?n._offset:0);let N=NaN,L=NaN,W=0,Se=0;for(let Y=0;Y<c;Y++){const T=d[Y],ne=l||Y,ae=p||c;let ze=NaN,st=NaN;for(let xe in o)if(hn(xe)){const he=so(T,xe),Ce=ki(xe,T,he);let we=o[xe];const Mt=Wt(we);if(s&&!Mt&&(bt[0]=we,bt[1]=we,we=bt),Mt){const _e=we.length,Me=!$n(we[0]);_e===2&&Me?(un.to=we,ln[0]=un,tt=ln):_e>2&&Me?(tt=[],we.forEach((de,ge)=>{ge?ge===1?(bt[1]=de,tt.push(bt)):tt.push(de):bt[0]=de})):tt=we}else ln[0]=we,tt=ln;let Fe=null,De=null,qe=NaN,je=0,te=0;for(let _e=tt.length;te<_e;te++){const Me=tt[te];$n(Me)?$e=Me:(un.to=Me,$e=un),sn.func=null;const de=et($e.to,T,ne,ae,sn);let ge;$n(de)&&!B(de.to)?($e=de,ge=de.to):ge=de;const ht=et($e.from,T,ne,ae),Le=$e.ease,ve=!B(Le)&&!B(Le.ease),_t=ve?Le.ease:Le||G,z=ve?Le.duration:et(me($e.duration,_e>1?et(j,T,ne,ae)/_e:j),T,ne,ae),He=et(me($e.delay,te?0:E),T,ne,ae),Ge=et(me($e.composition,X),T,ne,ae),We=Ko(Ge)?Ge:Te[Ge],Kt=$e.modifier||ie,gt=!B(ht),lt=!B(ge),zt=Wt(ge),po=zt||gt&&lt,Dn=De?je+He:He,In=K+Dn;!Se&&(gt||zt)&&(Se=1);let Ie=De;if(We!==Te.none){Fe||(Fe=lr(T,Ce));let R=Fe._head;for(;R&&!R._isOverridden&&R._absoluteStartTime<=In;)if(Ie=R,R=R._nextRep,R&&R._absoluteStartTime>=In)for(;R;)gn(R),R=R._nextRep}if(po?(Ve(zt?et(ge[0],T,ne,ae):ht,C),Ve(zt?et(ge[1],T,ne,ae,sn):ge,I),C.t===k.NUMBER&&(Ie?Ie._valueType===k.UNIT&&(C.t=k.UNIT,C.u=Ie._unit):(Ve(Rt(T,Ce,he,U),ft),ft.t===k.UNIT&&(C.t=k.UNIT,C.u=ft.u)))):(lt?Ve(ge,I):De?Cr(De,I):Ve(n&&Ie&&Ie.parent.parent===n?Ie._value:Rt(T,Ce,he,U),I),gt?Ve(ht,C):De?Cr(De,C):Ve(n&&Ie&&Ie.parent.parent===n?Ie._value:Rt(T,Ce,he,U),C)),C.o&&(C.n=xr(Ie?Ie._toNumber:Ve(Rt(T,Ce,he,U),ft).n,C.n,C.o)),I.o&&(I.n=xr(C.n,I.n,I.o)),C.t!==I.t){if(C.t===k.COMPLEX||I.t===k.COMPLEX){const R=C.t===k.COMPLEX?C:I,se=C.t===k.COMPLEX?I:C;se.t=k.COMPLEX,se.s=pe(R.s),se.d=R.d.map(()=>se.n)}else if(C.t===k.UNIT||I.t===k.UNIT){const R=C.t===k.UNIT?C:I,se=C.t===k.UNIT?I:C;se.t=k.UNIT,se.u=R.u}else if(C.t===k.COLOR||I.t===k.COLOR){const R=C.t===k.COLOR?C:I,se=C.t===k.COLOR?I:C;se.t=k.COLOR,se.s=R.s,se.d=[0,0,0,1]}}if(C.u!==I.u){let R=I.u?C:I;R=Mi(T,R,I.u?I.u:C.u,!1)}if(I.d&&C.d&&I.d.length!==C.d.length){const R=C.d.length>I.d.length?C:I,se=R===C?I:C;se.d=R.d.map(($i,ur)=>B(se.d[ur])?0:se.d[ur]),se.s=pe(R.s)}const Pn=Q(+z||F,12),en={parent:this,id:Ni++,property:Ce,target:T,_value:null,_func:sn.func,_ease:Or(_t),_fromNumbers:pe(C.d),_toNumbers:pe(I.d),_strings:pe(I.s),_fromNumber:C.n,_toNumber:I.n,_numbers:pe(C.d),_number:C.n,_unit:I.u,_modifier:Kt,_currentTime:0,_startTime:Dn,_delay:+He,_updateDuration:Pn,_changeDuration:Pn,_absoluteStartTime:In,_tweenType:he,_valueType:I.t,_composition:We,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};We!==Te.none&&lo(en,Fe),isNaN(qe)&&(qe=en._startTime),je=Q(Dn+Pn,12),De=en,W++,St(this,en)}(isNaN(L)||qe<L)&&(L=qe),(isNaN(N)||je>N)&&(N=je),he===q.TRANSFORM&&(ze=W-te,st=W)}if(!isNaN(ze)){let xe=0;ee(this,he=>{xe>=ze&&xe<st&&(he._renderTransforms=1,he._composition===Te.blend&&ee(Dt.animation,Ce=>{Ce.id===he.id&&(Ce._renderTransforms=1)})),xe++})}}c||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),L?(ee(this,Y=>{Y._startTime-Y._delay||(Y._delay-=L),Y._startTime-=L}),N-=L):L=0,N||(N=F,this.iterationCount=0),this.targets=d,this.duration=N===F?F:ar((N+this._loopDelay)*this.iterationCount-this._loopDelay)||F,this.onRender=v||b.onRender,this._ease=D,this._delay=L,this.iterationDuration=N,this._inlineStyles=U,!this._autoplay&&Se&&this.onRender(this)}stretch(e){const t=this.duration;if(t===qt(e))return this;const n=e/t;return ee(this,i=>{i._updateDuration=qt(i._updateDuration*n),i._changeDuration=qt(i._changeDuration*n),i._currentTime*=n,i._startTime*=n,i._absoluteStartTime*=n}),super.stretch(e)}refresh(){return ee(this,e=>{const t=Rt(e.target,e.property,e._tweenType);Ve(t,ft),e._fromNumbers=pe(ft.d),e._fromNumber=ft.n,e._func&&(Ve(e._func(),I),e._toNumbers=pe(I.d),e._strings=pe(I.s),e._toNumber=I.n)}),this}revert(){return super.revert(),fo(this)}then(e){return super.then(e)}}const Re=(r,e)=>new Bi(r,e,null,0,!1).init(),Fi=["x","y","z"];[...Fi,...or.filter(r=>["X","Y","Z"].some(e=>r.endsWith(e)))];Ye&&(B(CSS)||Object.hasOwnProperty.call(CSS,"registerProperty"));class Li{constructor(){this.animationsEnabled=!0,this.currentAnimations=[]}coinMove(e,t,n,i=500){return this.animationsEnabled?new Promise(s=>{const l=Re({targets:e,translateX:t,translateY:n,duration:i,ease:"out(4)",complete:s});this.currentAnimations.push(l)}):Promise.resolve()}coinBounce(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,scale:[1,1.2,1],duration:300,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}correctAnswer(e){return this.animationsEnabled?new Promise(t=>{this.createConfetti();const n=Re({targets:e,scale:[1,1.1,1],backgroundColor:["#ffffff","#95E1D3","#ffffff"],duration:1e3,ease:"inOut(2)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}wrongAnswer(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,translateX:[-5,5,-5,5,0],backgroundColor:["#ffffff","#F38181","#ffffff"],duration:500,ease:"inOut(2)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}tenConversion(e){return this.animationsEnabled?new Promise(t=>{const s=anime({targets:e,translateX:0,translateY:0,scale:[1,.5],rotate:360,duration:800,ease:"inOut(2)",complete:()=>{e.forEach(l=>{l.classList.remove("coin-1"),l.classList.add("coin-10"),l.textContent="10",l.dataset.value="10"});for(let l=1;l<e.length;l++)e[l].remove();Re({targets:e[0],scale:[.5,1.2,1],rotate:[360,0],duration:500,ease:"outElastic(1, .6)",complete:t})}});this.currentAnimations.push(s)}):Promise.resolve()}customerJump(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,translateY:[-20,0],duration:400,ease:"out(4)",loop:3,complete:t});this.currentAnimations.push(n)}):Promise.resolve()}levelUp(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,scale:[1,1.5,1],rotate:[0,360],duration:1500,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}fadeIn(e,t=500){return this.animationsEnabled?new Promise(n=>{const i=Re({targets:e,opacity:[0,1],translateY:[20,0],duration:t,ease:"out(2)",complete:n});this.currentAnimations.push(i)}):(e.style.opacity="1",Promise.resolve())}fadeOut(e,t=500){return this.animationsEnabled?new Promise(n=>{const i=Re({targets:e,opacity:[1,0],translateY:[0,-20],duration:t,ease:"in(2)",complete:n});this.currentAnimations.push(i)}):(e.style.opacity="0",Promise.resolve())}createConfetti(){const e=document.createElement("div");e.className="confetti-container",document.body.appendChild(e);const t=["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3","#F38181"];for(let n=0;n<30;n++){const i=document.createElement("div");i.style.position="absolute",i.style.width="10px",i.style.height="10px",i.style.backgroundColor=t[Math.floor(Math.random()*t.length)],i.style.left=Math.random()*window.innerWidth+"px",i.style.top="-10px",i.style.borderRadius="50%",e.appendChild(i),Re({targets:i,translateY:window.innerHeight+100,translateX:(Math.random()-.5)*200,rotate:Math.random()*720,duration:Math.random()*2e3+1e3,ease:"in(2)",complete:()=>{i.remove()}})}setTimeout(()=>{e.parentNode&&e.remove()},3e3)}createSparkles(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1000",e.style.position="relative",e.appendChild(t);for(let n=0;n<8;n++){const i=document.createElement("div");i.textContent="✨",i.style.position="absolute",i.style.fontSize="20px",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%",i.style.opacity="0",t.appendChild(i),Re({targets:i,opacity:[0,1,0],scale:[.5,1.5,.5],rotate:Math.random()*360,duration:1e3,delay:n*100,ease:"inOut(2)",complete:()=>{i.remove()}})}setTimeout(()=>{t.parentNode&&t.remove()},1500)}stopAllAnimations(){this.currentAnimations.forEach(e=>{e.pause&&e.pause()}),this.currentAnimations=[]}enableAnimations(){this.animationsEnabled=!0}disableAnimations(){this.animationsEnabled=!1}toggleAnimations(){return this.animationsEnabled=!this.animationsEnabled,this.animationsEnabled}}const nt=new Li;class Hi{constructor(){this.storageKey="coin-park-game-data",this.defaultData={currentLevel:1,currentProblemIndex:0,completedProblems:[],totalCoins:50,achievements:[],statistics:{correctAnswers:0,totalAttempts:0,totalPlayTime:0,averageTime:0,bestStreaks:0,currentStreak:0},settings:{soundEnabled:!0,animationsEnabled:!0,volume:.7},lastPlayDate:null}}loadGameData(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);return{...this.defaultData,...t}}}catch(e){console.warn("Failed to load game data:",e)}return{...this.defaultData}}saveGameData(e){try{const t={...e,lastPlayDate:new Date().toISOString()};return localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(t){return console.error("Failed to save game data:",t),!1}}updateProgress(e,t,n,i){const s=this.loadGameData();return s.statistics.totalAttempts+=n,s.statistics.totalPlayTime+=i,t?(s.statistics.correctAnswers++,s.statistics.currentStreak++,s.statistics.bestStreaks=Math.max(s.statistics.bestStreaks,s.statistics.currentStreak),s.completedProblems.includes(e)||s.completedProblems.push(e),s.totalCoins+=Math.max(1,4-n)):s.statistics.currentStreak=0,s.statistics.correctAnswers>0&&(s.statistics.averageTime=s.statistics.totalPlayTime/s.statistics.correctAnswers),t&&(s.currentProblemIndex=e+1),this.saveGameData(s),s}updateSettings(e){const t=this.loadGameData();return t.settings={...t.settings,...e},this.saveGameData(t),t.settings}addAchievement(e,t,n){const i=this.loadGameData();return i.achievements.find(s=>s.id===e)?!1:(i.achievements.push({id:e,title:t,description:n,unlockedAt:new Date().toISOString()}),this.saveGameData(i),!0)}checkAchievements(e){const t=[];return[{id:"first_correct",title:"はじめのいっぽ",description:"はじめてせいかいしました！",condition:()=>e.statistics.correctAnswers>=1},{id:"five_correct",title:"がんばりや",description:"5もんせいかいしました！",condition:()=>e.statistics.correctAnswers>=5},{id:"perfect_streak",title:"パーフェクト",description:"3もんれんぞくせいかい！",condition:()=>e.statistics.currentStreak>=3},{id:"coin_collector",title:"コインコレクター",description:"100まいコインをあつめました！",condition:()=>e.totalCoins>=100},{id:"speed_master",title:"はやわざマスター",description:"へいきん10びょう以内でせいかい！",condition:()=>e.statistics.averageTime<=1e4}].forEach(i=>{i.condition()&&!e.achievements.find(s=>s.id===i.id)&&this.addAchievement(i.id,i.title,i.description)&&t.push(i)}),t}resetGameData(){try{return localStorage.removeItem(this.storageKey),!0}catch(e){return console.error("Failed to reset game data:",e),!1}}exportGameData(){const t={...this.loadGameData(),exportedAt:new Date().toISOString(),version:"1.0.0"};return JSON.stringify(t,null,2)}importGameData(e){try{const t=JSON.parse(e);if(!t.statistics||!t.settings)throw new Error("Invalid game data format");const n={...this.defaultData,...t};return this.saveGameData(n),!0}catch(t){return console.error("Failed to import game data:",t),!1}}getPlayStats(){const e=this.loadGameData(),t=e.statistics.totalAttempts>0?(e.statistics.correctAnswers/e.statistics.totalAttempts*100).toFixed(1):0;return{totalProblems:e.completedProblems.length,correctAnswers:e.statistics.correctAnswers,totalAttempts:e.statistics.totalAttempts,accuracyRate:t+"%",totalPlayTime:this.formatTime(e.statistics.totalPlayTime),averageTime:this.formatTime(e.statistics.averageTime),bestStreak:e.statistics.bestStreaks,currentStreak:e.statistics.currentStreak,totalCoins:e.totalCoins,achievements:e.achievements.length}}formatTime(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),i=t%60;return n>0?`${n}分${i}秒`:`${i}秒`}}const rt=new Hi;class Gi{constructor(){this.calculator=new Ho,this.currentProblem=null,this.registerAmount=0,this.wrongAttempts=0,this.maxAttempts=3,this.problemStartTime=null,this.allProblems=[{items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}],shopType:"くだものやさん"},{items:[{name:"みかん",price:6,emoji:"🍊"},{name:"ぶどう",price:8,emoji:"🍇"}],shopType:"くだものやさん"},{items:[{name:"いちご",price:9,emoji:"🍓"},{name:"もも",price:4,emoji:"🍑"}],shopType:"くだものやさん"},{items:[{name:"にんじん",price:5,emoji:"🥕"},{name:"たまねぎ",price:7,emoji:"🧅"}],shopType:"やおやさん"},{items:[{name:"トマト",price:8,emoji:"🍅"},{name:"きゅうり",price:6,emoji:"🥒"}],shopType:"やおやさん"},{items:[{name:"レタス",price:9,emoji:"🥬"},{name:"だいこん",price:3,emoji:"🌿"}],shopType:"やおやさん"},{items:[{name:"さけ",price:8,emoji:"🐟"},{name:"まぐろ",price:9,emoji:"🐠"}],shopType:"さかなやさん"},{items:[{name:"えび",price:7,emoji:"🦐"},{name:"いか",price:6,emoji:"🦑"}],shopType:"さかなやさん"},{items:[{name:"たこ",price:5,emoji:"🐙"},{name:"かに",price:8,emoji:"🦀"}],shopType:"さかなやさん"},{items:[{name:"チョコ",price:6,emoji:"🍫"},{name:"アメ",price:7,emoji:"🍬"}],shopType:"おかしやさん"},{items:[{name:"ケーキ",price:9,emoji:"🍰"},{name:"クッキー",price:4,emoji:"🍪"}],shopType:"おかしやさん"},{items:[{name:"ドーナツ",price:8,emoji:"🍩"},{name:"アイス",price:5,emoji:"🍦"}],shopType:"おかしやさん"},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ノート",price:7,emoji:"📓"},{name:"ペン",price:9,emoji:"🖊️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"クレヨン",price:5,emoji:"🖍️"},{name:"はさみ",price:8,emoji:"✂️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"つみき",price:4,emoji:"🧱"}],shopType:"おもちゃやさん"},{items:[{name:"ぬいぐるみ",price:8,emoji:"🧸"},{name:"パズル",price:6,emoji:"🧩"}],shopType:"おもちゃやさん"},{items:[{name:"くるま",price:7,emoji:"🚗"},{name:"でんしゃ",price:5,emoji:"🚆"}],shopType:"おもちゃやさん"}],this.totalProblems=10,this.problems=this.generateRandomProblems(),this.gameData=rt.loadGameData(),this.currentProblemIndex=this.gameData.currentProblemIndex}start(){this.initElements(),this.setupDragAndDrop(),this.setupEventListeners(),this.loadSettings(),this.updateUI(),this.loadProblem()}initElements(){this.walletElement=document.getElementById("wallet"),this.registerElement=document.getElementById("register-coins"),this.registerAmountElement=document.getElementById("register-amount"),this.checkAnswerBtn=document.getElementById("check-answer"),this.feedbackElement=document.getElementById("feedback"),this.feedbackMessageElement=document.getElementById("feedback-message"),this.nextProblemBtn=document.getElementById("next-problem"),this.customerMessageElement=document.getElementById("customer-message"),this.totalAmountElement=document.getElementById("total-amount"),this.totalHintElement=document.getElementById("total-hint"),this.hintButtonElement=document.getElementById("hint-button"),this.shopTitleElement=document.querySelector(".shop-title"),this.shopItemsElement=document.getElementById("shop-items"),this.totalCoinsElement=document.getElementById("total-coins"),this.currentProblemElement=document.getElementById("current-problem"),this.totalProblemsElement=document.getElementById("total-problems")}setupDragAndDrop(){this.tenCoinsSortable=new w(document.getElementById("ten-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Ze.play("coin-pickup"),nt.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.oneCoinsSortable=new w(document.getElementById("one-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Ze.play("coin-pickup"),nt.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.registerSortable=new w(this.registerElement,{group:{name:"coins",pull:!0,put:!0},animation:150,onAdd:e=>{Ze.play("coin-drop"),this.updateRegisterAmount(),nt.coinBounce(e.item)},onRemove:e=>{this.updateRegisterAmount()}})}setupEventListeners(){this.checkAnswerBtn.addEventListener("click",()=>{this.checkAnswer()}),this.nextProblemBtn.addEventListener("click",()=>{this.nextProblem()}),this.hintButtonElement.addEventListener("click",()=>{this.showHint()}),document.getElementById("settings-btn").addEventListener("click",()=>{this.showSettings()}),document.getElementById("help-btn").addEventListener("click",()=>{this.showHelp()})}generateRandomProblems(){return[...this.allProblems].sort(()=>Math.random()-.5).slice(0,this.totalProblems)}loadProblem(){if(this.currentProblemIndex>=this.totalProblems){this.showGameComplete();return}this.currentProblem=this.problems[this.currentProblemIndex],this.wrongAttempts=0,this.registerAmount=0,this.problemStartTime=Date.now(),this.registerElement.innerHTML="",this.updateRegisterAmount(),this.updateShopDisplay(),this.updateCustomerMessage();const e=this.currentProblem.items.reduce((t,n)=>t+n.price,0);this.totalAmountElement.textContent=e,this.totalHintElement.style.display="none",this.hintButtonElement.style.display="block",this.initializeCoins(e),this.updateUI()}updateShopDisplay(){this.shopTitleElement.textContent=this.currentProblem.shopType,this.shopItemsElement.innerHTML="",this.currentProblem.items.forEach(e=>{const t=document.createElement("div");t.className="shop-item",t.innerHTML=`
        <div class="item-image">${e.emoji}</div>
        <div class="item-name">${e.name}</div>
        <div class="item-price">${e.price}円</div>
      `,this.shopItemsElement.appendChild(t)})}updateCustomerMessage(){const e=this.currentProblem.items.map(t=>t.name).join("と");this.customerMessageElement.textContent=`${e}ください`}initializeCoins(e){document.getElementById("ten-coins").innerHTML="",document.getElementById("one-coins").innerHTML="";const t=Math.max(2,Math.ceil(e/10)+1),n=Math.max(10,e%10+5);for(let i=0;i<t;i++){const s=this.createCoin(10);document.getElementById("ten-coins").appendChild(s)}for(let i=0;i<n;i++){const s=this.createCoin(1);document.getElementById("one-coins").appendChild(s)}}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}updateRegisterAmount(){const e=this.registerElement.querySelectorAll(".coin");this.registerAmount=Array.from(e).reduce((t,n)=>t+parseInt(n.dataset.value),0),this.registerAmountElement.textContent=`${this.registerAmount}円`}checkAnswer(){const e=this.currentProblem.items.reduce((t,n)=>t+n.price,0);this.registerAmount===e?this.showCorrectFeedback():(this.wrongAttempts++,this.wrongAttempts>=this.maxAttempts?this.showCorrectAnswerWithExplanation(e):this.showIncorrectFeedback())}showCorrectFeedback(){Ze.play("success"),nt.correctAnswer(this.registerElement);const e=Date.now()-this.problemStartTime,t=this.wrongAttempts+1;this.gameData=rt.updateProgress(this.currentProblemIndex,!0,t,e);const n=rt.checkAchievements(this.gameData);let i="";n.length>0&&(i='<div class="achievement-notification">',n.forEach(p=>{i+=`<p>🏆 ${p.title}: ${p.description}</p>`}),i+="</div>");const s=Math.max(1,4-t);this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🎉 せいかい！</h2>
        <p>よくできました！</p>
        <p>💰 ${s}まいコインをゲット！</p>
        ${i}
      </div>
    `,this.showFeedback(),this.updateUI();const l=document.querySelector(".customer");nt.customerJump(l),nt.createSparkles(l)}showIncorrectFeedback(){Ze.play("wrong"),nt.wrongAnswer(this.registerElement);const e=this.maxAttempts-this.wrongAttempts;let t=`
      <div class="error-feedback">
        <h2>❌ ちがいます</h2>
        <p>もう一度かんがえてみましょう</p>
    `;e===1&&(t+="<p>あと1回だけチャンスがあります</p>"),t+="</div>",this.feedbackMessageElement.innerHTML=t,this.showFeedback()}showCorrectAnswerWithExplanation(e){Ze.play("wrong");const t=this.calculator.visualizeCarryOver(this.currentProblem.items[0].price,this.currentProblem.items[1].price);let n='<div class="calculation-steps">';t.forEach(i=>{n+=`<div class="calculation-step">${i.message||i.action}</div>`}),n+="</div>",this.feedbackMessageElement.innerHTML=`
      <div class="error-feedback">
        <h2>📚 せいかいは ${e}円 です</h2>
        <p>けいさんのしかた：</p>
        ${n}
      </div>
    `,this.showFeedback()}showFeedback(){this.feedbackElement.style.display="flex",this.feedbackElement.style.opacity="1"}hideFeedback(){this.feedbackElement.style.display!=="none"&&(this.feedbackElement.style.opacity="0",setTimeout(()=>{this.feedbackElement.style.display="none",this.feedbackElement.style.opacity="1"},300))}nextProblem(){this.hideFeedback(),this.currentProblemIndex++,setTimeout(()=>{console.log(`Loading problem ${this.currentProblemIndex+1}/${this.totalProblems}`),this.loadProblem()},100)}showGameComplete(){const e=rt.getPlayStats();this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🏆 ゲームクリア！</h2>
        <p>10もんだいすべてクリアしました！</p>
        <p>せいかいりつ: ${e.accuracyRate}</p>
        <p>おつかれさまでした！</p>
      </div>
    `,this.showFeedback(),this.nextProblemBtn.textContent="もう一度あそぶ";const t=this.nextProblemBtn.cloneNode(!0);this.nextProblemBtn.parentNode.replaceChild(t,this.nextProblemBtn),this.nextProblemBtn=t,this.nextProblemBtn.addEventListener("click",()=>{this.currentProblemIndex=0,this.problems=this.generateRandomProblems(),this.hideFeedback(),setTimeout(()=>{console.log("Restarting game with new problems"),this.loadProblem(),this.nextProblemBtn.textContent="つぎのもんだい"},100)})}loadSettings(){Ze.enableSound=this.gameData.settings.soundEnabled,Ze.setVolume(this.gameData.settings.volume),nt.animationsEnabled=this.gameData.settings.animationsEnabled}updateUI(){this.totalCoinsElement.textContent=this.gameData.totalCoins,this.currentProblemElement.textContent=this.currentProblemIndex+1,this.totalProblemsElement.textContent=this.totalProblems}resetCurrentGame(){this.currentProblemIndex=0,this.problems=this.generateRandomProblems(),this.wrongAttempts=0,this.registerAmount=0,this.registerElement.innerHTML="",this.updateRegisterAmount(),this.feedbackElement.style.display="none",this.loadProblem(),console.log("Game reset to first problem")}showHint(){Ze.play("ten-conversion"),this.totalHintElement.style.display="block",this.hintButtonElement.style.display="none",this.totalHintElement.classList.add("fade-in"),setTimeout(()=>{this.totalHintElement.classList.remove("fade-in")},500)}showSettings(){const e=rt.getPlayStats(),t=`
      <div class="modal-content">
        <div class="modal-header">
          <h3>設定</h3>
          <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">×</button>
        </div>
        <div class="modal-body">
          <div class="setting-item">
            <label>
              <input type="checkbox" id="sound-toggle" ${this.gameData.settings.soundEnabled?"checked":""}>
              音声をONにする
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="animation-toggle" ${this.gameData.settings.animationsEnabled?"checked":""}>
              アニメーションをONにする
            </label>
          </div>
          
          <h4>ゲームとうけい</h4>
          <div class="stats">
            <p>せいかいすう: ${e.correctAnswers}</p>
            <p>せいかいりつ: ${e.accuracyRate}</p>
            <p>さいこうれんぞく: ${e.bestStreak}</p>
            <p>コインすう: ${e.totalCoins}</p>
            <p>じっせき: ${e.achievements}こ</p>
          </div>
          
          <div class="setting-buttons">
            <button onclick="this.closest('.modal-overlay').remove()">とじる</button>
            <button id="reset-game-btn">ゲームをさいしょから</button>
            <button id="reset-data-btn">データリセット</button>
          </div>
        </div>
      </div>
    `,n=document.createElement("div");n.className="modal-overlay",n.innerHTML=t,document.body.appendChild(n),n.querySelector("#sound-toggle").addEventListener("change",i=>{this.gameData.settings.soundEnabled=i.target.checked,rt.updateSettings(this.gameData.settings),this.loadSettings()}),n.querySelector("#animation-toggle").addEventListener("change",i=>{this.gameData.settings.animationsEnabled=i.target.checked,rt.updateSettings(this.gameData.settings),this.loadSettings()}),n.querySelector("#reset-game-btn").addEventListener("click",()=>{confirm("げんざいのゲームをリセットして、さいしょからはじめますか？")&&(this.resetCurrentGame(),n.remove())}),n.querySelector("#reset-data-btn").addEventListener("click",()=>{confirm(`すべてのデータ（とうけい、じっせき、コイン）をリセットしますか？
このそうさはもとにもどせません。`)&&(rt.resetGameData(),location.reload())}),n.addEventListener("click",i=>{i.target===n&&n.remove()})}showHelp(){const e=`
      <div class="modal-content">
        <div class="modal-header">
          <h3>あそびかた</h3>
          <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">×</button>
        </div>
        <div class="modal-body">
          <div class="help-content">
            <p>1. おきゃくさんがほしいものをいいます</p>
            <p>2. おねだんをけいさんします</p>
            <p>3. おさいふからコインをレジにうつします</p>
            <p>4. 「おしはらい」ボタンをおします</p>
            
            <h4>コインについて</h4>
            <p>🪙 10円玉：きんいろのコイン</p>
            <p>🪙 1円玉：ぎんいろのコイン</p>
            
            <h4>けいさんのコツ</h4>
            <p>10になるくみあわせをさがしてみよう！</p>
            <p>たとえば 7 + 5 = 12 のときは</p>
            <p>7 + 3 = 10、あと 2 をたして 12！</p>
            
            <div class="setting-buttons">
              <button onclick="this.closest('.modal-overlay').remove()">とじる</button>
            </div>
          </div>
        </div>
      </div>
    `,t=document.createElement("div");t.className="modal-overlay",t.innerHTML=e,document.body.appendChild(t),t.addEventListener("click",n=>{n.target===t&&t.remove()})}}class Vi{constructor(){this.gameEngine=new Gi,this.init()}init(){document.addEventListener("DOMContentLoaded",()=>{this.gameEngine.start()})}}new Vi;
