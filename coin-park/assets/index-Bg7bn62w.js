(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function co(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,o)}return t}function Ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?co(Object(t),!0).forEach(function(o){mr(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):co(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function cn(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cn=function(e){return typeof e}:cn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(n)}function mr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qe(){return Qe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Qe.apply(this,arguments)}function hr(n,e){if(n==null)return{};var t={},o=Object.keys(n),i,s;for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function _r(n,e){if(n==null)return{};var t=hr(n,e),o,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)o=s[i],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(t[o]=n[o])}return t}var gr="1.15.6";function Je(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Ke=Je(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zt=Je(/Edge/i),fo=Je(/firefox/i),Vt=Je(/safari/i)&&!Je(/chrome/i)&&!Je(/android/i),zn=Je(/iP(ad|od|hone)/i),Ro=Je(/chrome/i)&&Je(/android/i),Bo={capture:!1,passive:!1};function O(n,e,t){n.addEventListener(e,t,!Ke&&Bo)}function P(n,e,t){n.removeEventListener(e,t,!Ke&&Bo)}function vn(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Fo(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Be(n,e,t,o){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&vn(n,e):vn(n,e))||o&&n===t)return n;if(n===t)break}while(n=Fo(n))}return null}var po=/\s+/g;function Ae(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var o=(" "+n.className+" ").replace(po," ").replace(" "+e+" "," ");n.className=(o+(t?" "+e:"")).replace(po," ")}}function A(n,e,t){var o=n&&n.style;if(o){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=t+(typeof t=="string"?"":"px")}}function xt(n,e){var t="";if(typeof n=="string")t=n;else do{var o=A(n,"transform");o&&o!=="none"&&(t=o+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Lo(n,e,t){if(n){var o=n.getElementsByTagName(e),i=0,s=o.length;if(t)for(;i<s;i++)t(o[i],i);return o}return[]}function Xe(){var n=document.scrollingElement;return n||document.documentElement}function J(n,e,t,o,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,l,p,d,c,g,r;if(n!==window&&n.parentNode&&n!==Xe()?(s=n.getBoundingClientRect(),l=s.top,p=s.left,d=s.bottom,c=s.right,g=s.height,r=s.width):(l=0,p=0,d=window.innerHeight,c=window.innerWidth,g=window.innerHeight,r=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Ke))do if(i&&i.getBoundingClientRect&&(A(i,"transform")!=="none"||t&&A(i,"position")!=="static")){var a=i.getBoundingClientRect();l-=a.top+parseInt(A(i,"border-top-width")),p-=a.left+parseInt(A(i,"border-left-width")),d=l+s.height,c=p+s.width;break}while(i=i.parentNode);if(o&&n!==window){var u=xt(i||n),f=u&&u.a,m=u&&u.d;u&&(l/=m,p/=f,r/=f,g/=m,d=l+g,c=p+r)}return{top:l,left:p,bottom:d,right:c,width:r,height:g}}}function mo(n,e,t){for(var o=it(n,!0),i=J(n)[e];o;){var s=J(o)[t],l=void 0;if(l=i>=s,!l)return o;if(o===Xe())break;o=it(o,!1)}return!1}function It(n,e,t,o){for(var i=0,s=0,l=n.children;s<l.length;){if(l[s].style.display!=="none"&&l[s]!==w.ghost&&(o||l[s]!==w.dragged)&&Be(l[s],t.draggable,n,!1)){if(i===e)return l[s];i++}s++}return null}function eo(n,e){for(var t=n.lastElementChild;t&&(t===w.ghost||A(t,"display")==="none"||e&&!vn(t,e));)t=t.previousElementSibling;return t||null}function Pe(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==w.clone&&(!e||vn(n,e))&&t++;return t}function ho(n){var e=0,t=0,o=Xe();if(n)do{var i=xt(n),s=i.a,l=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*l}while(n!==o&&(n=n.parentNode));return[e,t]}function vr(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===n[t][o])return Number(t)}return-1}function it(n,e){if(!n||!n.getBoundingClientRect)return Xe();var t=n,o=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=A(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Xe();if(o||e)return t;o=!0}}while(t=t.parentNode);return Xe()}function yr(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function On(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var $t;function Ho(n,e){return function(){if(!$t){var t=arguments,o=this;t.length===1?n.call(o,t[0]):n.apply(o,t),$t=setTimeout(function(){$t=void 0},e)}}}function br(){clearTimeout($t),$t=void 0}function Go(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Vo(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function $o(n,e,t){var o={};return Array.from(n.children).forEach(function(i){var s,l,p,d;if(!(!Be(i,e.draggable,n,!1)||i.animated||i===t)){var c=J(i);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,c.left),o.top=Math.min((l=o.top)!==null&&l!==void 0?l:1/0,c.top),o.right=Math.max((p=o.right)!==null&&p!==void 0?p:-1/0,c.right),o.bottom=Math.max((d=o.bottom)!==null&&d!==void 0?d:-1/0,c.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var be="Sortable"+new Date().getTime();function Tr(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(i){if(!(A(i,"display")==="none"||i===w.ghost)){n.push({target:i,rect:J(i)});var s=Ue({},n[n.length-1].rect);if(i.thisAnimationDuration){var l=xt(i,!0);l&&(s.top-=l.f,s.left-=l.e)}i.fromRect=s}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(vr(n,{target:o}),1)},animateAll:function(o){var i=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var s=!1,l=0;n.forEach(function(p){var d=0,c=p.target,g=c.fromRect,r=J(c),a=c.prevFromRect,u=c.prevToRect,f=p.rect,m=xt(c,!0);m&&(r.top-=m.f,r.left-=m.e),c.toRect=r,c.thisAnimationDuration&&On(a,r)&&!On(g,r)&&(f.top-r.top)/(f.left-r.left)===(g.top-r.top)/(g.left-r.left)&&(d=Ar(f,a,u,i.options)),On(r,g)||(c.prevFromRect=g,c.prevToRect=r,d||(d=i.options.animation),i.animate(c,f,r,d)),d&&(s=!0,l=Math.max(l,d),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},d),c.thisAnimationDuration=d)}),clearTimeout(e),s?e=setTimeout(function(){typeof o=="function"&&o()},l):typeof o=="function"&&o(),n=[]},animate:function(o,i,s,l){if(l){A(o,"transition",""),A(o,"transform","");var p=xt(this.el),d=p&&p.a,c=p&&p.d,g=(i.left-s.left)/(d||1),r=(i.top-s.top)/(c||1);o.animatingX=!!g,o.animatingY=!!r,A(o,"transform","translate3d("+g+"px,"+r+"px,0)"),this.forRepaintDummy=wr(o),A(o,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),A(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){A(o,"transition",""),A(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},l)}}}}function wr(n){return n.offsetWidth}function Ar(n,e,t,o){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*o.animation}var vt=[],kn={initializeByDefault:!0},Jt={mount:function(e){for(var t in kn)kn.hasOwnProperty(t)&&!(t in e)&&(e[t]=kn[t]);vt.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),vt.push(e)},pluginEvent:function(e,t,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var s=e+"Global";vt.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][s]&&t[l.pluginName][s](Ue({sortable:t},o)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](Ue({sortable:t},o)))})},initializePlugins:function(e,t,o,i){vt.forEach(function(p){var d=p.pluginName;if(!(!e.options[d]&&!p.initializeByDefault)){var c=new p(e,t,e.options);c.sortable=e,c.options=e.options,e[d]=c,Qe(o,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var l=this.modifyOption(e,s,e.options[s]);typeof l<"u"&&(e.options[s]=l)}},getEventProperties:function(e,t){var o={};return vt.forEach(function(i){typeof i.eventProperties=="function"&&Qe(o,i.eventProperties.call(t[i.pluginName],e))}),o},modifyOption:function(e,t,o){var i;return vt.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],o))}),i}};function Er(n){var e=n.sortable,t=n.rootEl,o=n.name,i=n.targetEl,s=n.cloneEl,l=n.toEl,p=n.fromEl,d=n.oldIndex,c=n.newIndex,g=n.oldDraggableIndex,r=n.newDraggableIndex,a=n.originalEvent,u=n.putSortable,f=n.extraEventProperties;if(e=e||t&&t[be],!!e){var m,_=e.options,h="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ke&&!Zt?m=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(o,!0,!0)),m.to=l||t,m.from=p||t,m.item=i||t,m.clone=s,m.oldIndex=d,m.newIndex=c,m.oldDraggableIndex=g,m.newDraggableIndex=r,m.originalEvent=a,m.pullMode=u?u.lastPutMode:void 0;var v=Ue(Ue({},f),Jt.getEventProperties(o,e));for(var b in v)m[b]=v[b];t&&t.dispatchEvent(m),_[h]&&_[h].call(e,m)}}var Sr=["evt"],ye=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.evt,s=_r(o,Sr);Jt.pluginEvent.bind(w)(e,t,Ue({dragEl:y,parentEl:$,ghostEl:x,rootEl:H,nextEl:pt,lastDownEl:dn,cloneEl:V,cloneHidden:rt,dragStarted:Ft,putSortable:oe,activeSortable:w.active,originalEvent:i,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:ot,hideGhostForTarget:qo,unhideGhostForTarget:jo,cloneNowHidden:function(){rt=!0},cloneNowShown:function(){rt=!1},dispatchSortableEvent:function(p){fe({sortable:t,name:p,originalEvent:i})}},s))};function fe(n){Er(Ue({putSortable:oe,cloneEl:V,targetEl:y,rootEl:H,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:ot},n))}var y,$,x,H,pt,dn,V,rt,Et,Ee,Xt,ot,tn,oe,Tt=!1,yn=!1,bn=[],lt,Ne,Mn,Nn,_o,go,Ft,yt,Ut,Yt=!1,nn=!1,fn,le,Rn=[],qn=!1,Tn=[],Sn=typeof document<"u",on=zn,vo=Zt||Ke?"cssFloat":"float",xr=Sn&&!Ro&&!zn&&"draggable"in document.createElement("div"),Xo=function(){if(Sn){if(Ke)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Uo=function(e,t){var o=A(e),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=It(e,0,t),l=It(e,1,t),p=s&&A(s),d=l&&A(l),c=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+J(s).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+J(l).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&p.float&&p.float!=="none"){var r=p.float==="left"?"left":"right";return l&&(d.clear==="both"||d.clear===r)?"vertical":"horizontal"}return s&&(p.display==="block"||p.display==="flex"||p.display==="table"||p.display==="grid"||c>=i&&o[vo]==="none"||l&&o[vo]==="none"&&c+g>i)?"vertical":"horizontal"},Dr=function(e,t,o){var i=o?e.left:e.top,s=o?e.right:e.bottom,l=o?e.width:e.height,p=o?t.left:t.top,d=o?t.right:t.bottom,c=o?t.width:t.height;return i===p||s===d||i+l/2===p+c/2},Cr=function(e,t){var o;return bn.some(function(i){var s=i[be].options.emptyInsertThreshold;if(!(!s||eo(i))){var l=J(i),p=e>=l.left-s&&e<=l.right+s,d=t>=l.top-s&&t<=l.bottom+s;if(p&&d)return o=i}}),o},Yo=function(e){function t(s,l){return function(p,d,c,g){var r=p.options.group.name&&d.options.group.name&&p.options.group.name===d.options.group.name;if(s==null&&(l||r))return!0;if(s==null||s===!1)return!1;if(l&&s==="clone")return s;if(typeof s=="function")return t(s(p,d,c,g),l)(p,d,c,g);var a=(l?p:d).options.group.name;return s===!0||typeof s=="string"&&s===a||s.join&&s.indexOf(a)>-1}}var o={},i=e.group;(!i||cn(i)!="object")&&(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o},qo=function(){!Xo&&x&&A(x,"display","none")},jo=function(){!Xo&&x&&A(x,"display","")};Sn&&!Ro&&document.addEventListener("click",function(n){if(yn)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),yn=!1,!1},!0);var ut=function(e){if(y){e=e.touches?e.touches[0]:e;var t=Cr(e.clientX,e.clientY);if(t){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[be]._onDragOver(o)}}},Ir=function(e){y&&y.parentNode[be]._isOutsideThisEl(e.target)};function w(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Qe({},e),n[be]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Uo(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,p){l.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:w.supportPointer!==!1&&"PointerEvent"in window&&(!Vt||zn),emptyInsertThreshold:5};Jt.initializePlugins(this,n,t);for(var o in t)!(o in e)&&(e[o]=t[o]);Yo(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:xr,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?O(n,"pointerdown",this._onTapStart):(O(n,"mousedown",this._onTapStart),O(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(n,"dragover",this),O(n,"dragenter",this)),bn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qe(this,Tr())}w.prototype={constructor:w,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(yt=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,i=this.options,s=i.preventOnFilter,l=e.type,p=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(p||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,g=i.filter;if(Fr(o),!y&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Vt&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Be(d,i.draggable,o,!1),!(d&&d.animated)&&dn!==d)){if(Et=Pe(d),Xt=Pe(d,i.draggable),typeof g=="function"){if(g.call(this,e,d,this)){fe({sortable:t,rootEl:c,name:"filter",targetEl:d,toEl:o,fromEl:o}),ye("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(r){if(r=Be(c,r.trim(),o,!1),r)return fe({sortable:t,rootEl:r,name:"filter",targetEl:d,fromEl:o,toEl:o}),ye("filter",t,{evt:e}),!0}),g)){s&&e.preventDefault();return}i.handle&&!Be(c,i.handle,o,!1)||this._prepareDragStart(e,p,d)}}},_prepareDragStart:function(e,t,o){var i=this,s=i.el,l=i.options,p=s.ownerDocument,d;if(o&&!y&&o.parentNode===s){var c=J(o);if(H=s,y=o,$=y.parentNode,pt=y.nextSibling,dn=o,tn=l.group,w.dragged=y,lt={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},_o=lt.clientX-c.left,go=lt.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",d=function(){if(ye("delayEnded",i,{evt:e}),w.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!fo&&i.nativeDraggable&&(y.draggable=!0),i._triggerDragStart(e,t),fe({sortable:i,name:"choose",originalEvent:e}),Ae(y,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){Lo(y,g.trim(),Bn)}),O(p,"dragover",ut),O(p,"mousemove",ut),O(p,"touchmove",ut),l.supportPointer?(O(p,"pointerup",i._onDrop),!this.nativeDraggable&&O(p,"pointercancel",i._onDrop)):(O(p,"mouseup",i._onDrop),O(p,"touchend",i._onDrop),O(p,"touchcancel",i._onDrop)),fo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ye("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Zt||Ke))){if(w.eventCanceled){this._onDrop();return}l.supportPointer?(O(p,"pointerup",i._disableDelayedDrag),O(p,"pointercancel",i._disableDelayedDrag)):(O(p,"mouseup",i._disableDelayedDrag),O(p,"touchend",i._disableDelayedDrag),O(p,"touchcancel",i._disableDelayedDrag)),O(p,"mousemove",i._delayedDragTouchMoveHandler),O(p,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&O(p,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(d,l.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Bn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._disableDelayedDrag),P(e,"touchend",this._disableDelayedDrag),P(e,"touchcancel",this._disableDelayedDrag),P(e,"pointerup",this._disableDelayedDrag),P(e,"pointercancel",this._disableDelayedDrag),P(e,"mousemove",this._delayedDragTouchMoveHandler),P(e,"touchmove",this._delayedDragTouchMoveHandler),P(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):t?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(y,"dragend",this),O(H,"dragstart",this._onDragStart));try{document.selection?pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Tt=!1,H&&y){ye("dragStarted",this,{evt:t}),this.nativeDraggable&&O(document,"dragover",Ir);var o=this.options;!e&&Ae(y,o.dragClass,!1),Ae(y,o.ghostClass,!0),w.active=this,e&&this._appendGhost(),fe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ne){this._lastX=Ne.clientX,this._lastY=Ne.clientY,qo();for(var e=document.elementFromPoint(Ne.clientX,Ne.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ne.clientX,Ne.clientY),e!==t);)t=e;if(y.parentNode[be]._isOutsideThisEl(e),t)do{if(t[be]){var o=void 0;if(o=t[be]._onDragOver({clientX:Ne.clientX,clientY:Ne.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=Fo(t));jo()}},_onTouchMove:function(e){if(lt){var t=this.options,o=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,l=x&&xt(x,!0),p=x&&l&&l.a,d=x&&l&&l.d,c=on&&le&&ho(le),g=(s.clientX-lt.clientX+i.x)/(p||1)+(c?c[0]-Rn[0]:0)/(p||1),r=(s.clientY-lt.clientY+i.y)/(d||1)+(c?c[1]-Rn[1]:0)/(d||1);if(!w.active&&!Tt){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(x){l?(l.e+=g-(Mn||0),l.f+=r-(Nn||0)):l={a:1,b:0,c:0,d:1,e:g,f:r};var a="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");A(x,"webkitTransform",a),A(x,"mozTransform",a),A(x,"msTransform",a),A(x,"transform",a),Mn=g,Nn=r,Ne=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:H,t=J(y,!0,on,!0,e),o=this.options;if(on){for(le=e;A(le,"position")==="static"&&A(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=Xe()),t.top+=le.scrollTop,t.left+=le.scrollLeft):le=Xe(),Rn=ho(le)}x=y.cloneNode(!0),Ae(x,o.ghostClass,!1),Ae(x,o.fallbackClass,!0),Ae(x,o.dragClass,!0),A(x,"transition",""),A(x,"transform",""),A(x,"box-sizing","border-box"),A(x,"margin",0),A(x,"top",t.top),A(x,"left",t.left),A(x,"width",t.width),A(x,"height",t.height),A(x,"opacity","0.8"),A(x,"position",on?"absolute":"fixed"),A(x,"zIndex","100000"),A(x,"pointerEvents","none"),w.ghost=x,e.appendChild(x),A(x,"transform-origin",_o/parseInt(x.style.width)*100+"% "+go/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,i=e.dataTransfer,s=o.options;if(ye("dragStart",this,{evt:e}),w.eventCanceled){this._onDrop();return}ye("setupClone",this),w.eventCanceled||(V=Vo(y),V.removeAttribute("id"),V.draggable=!1,V.style["will-change"]="",this._hideClone(),Ae(V,this.options.chosenClass,!1),w.clone=V),o.cloneId=pn(function(){ye("clone",o),!w.eventCanceled&&(o.options.removeCloneOnHide||H.insertBefore(V,y),o._hideClone(),fe({sortable:o,name:"clone"}))}),!t&&Ae(y,s.dragClass,!0),t?(yn=!0,o._loopId=setInterval(o._emulateDragOver,50)):(P(document,"mouseup",o._onDrop),P(document,"touchend",o._onDrop),P(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(o,i,y)),O(document,"drop",o),A(y,"transform","translateZ(0)")),Tt=!0,o._dragStartId=pn(o._dragStarted.bind(o,t,e)),O(document,"selectstart",o),Ft=!0,window.getSelection().removeAllRanges(),Vt&&A(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,i,s,l,p=this.options,d=p.group,c=w.active,g=tn===d,r=p.sort,a=oe||c,u,f=this,m=!1;if(qn)return;function _(Y,T){ye(Y,f,Ue({evt:e,isOwner:g,axis:u?"vertical":"horizontal",revert:l,dragRect:i,targetRect:s,canSort:r,fromSortable:a,target:o,completed:v,onMove:function(ae,ze){return rn(H,t,y,i,ae,J(ae),e,ze)},changed:b},T))}function h(){_("dragOverAnimationCapture"),f.captureAnimationState(),f!==a&&a.captureAnimationState()}function v(Y){return _("dragOverCompleted",{insertion:Y}),Y&&(g?c._hideClone():c._showClone(f),f!==a&&(Ae(y,oe?oe.options.ghostClass:c.options.ghostClass,!1),Ae(y,p.ghostClass,!0)),oe!==f&&f!==w.active?oe=f:f===w.active&&oe&&(oe=null),a===f&&(f._ignoreWhileAnimating=o),f.animateAll(function(){_("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==a&&(a.animateAll(),a._ignoreWhileAnimating=null)),(o===y&&!y.animated||o===t&&!o.animated)&&(yt=null),!p.dragoverBubble&&!e.rootEl&&o!==document&&(y.parentNode[be]._isOutsideThisEl(e.target),!Y&&ut(e)),!p.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function b(){Ee=Pe(y),ot=Pe(y,p.draggable),fe({sortable:f,name:"change",toEl:t,newIndex:Ee,newDraggableIndex:ot,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=Be(o,p.draggable,t,!0),_("dragOver"),w.eventCanceled)return m;if(y.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||f._ignoreWhileAnimating===o)return v(!1);if(yn=!1,c&&!p.disabled&&(g?r||(l=$!==H):oe===this||(this.lastPutMode=tn.checkPull(this,c,y,e))&&d.checkPut(this,c,y,e))){if(u=this._getDirection(e,o)==="vertical",i=J(y),_("dragOverValid"),w.eventCanceled)return m;if(l)return $=H,h(),this._hideClone(),_("revert"),w.eventCanceled||(pt?H.insertBefore(y,pt):H.appendChild(y)),v(!0);var S=eo(t,p.draggable);if(!S||Mr(e,u,this)&&!S.animated){if(S===y)return v(!1);if(S&&t===e.target&&(o=S),o&&(s=J(o)),rn(H,t,y,i,o,s,e,!!o)!==!1)return h(),S&&S.nextSibling?t.insertBefore(y,S.nextSibling):t.appendChild(y),$=t,b(),v(!0)}else if(S&&kr(e,u,this)){var C=It(t,0,p,!0);if(C===y)return v(!1);if(o=C,s=J(o),rn(H,t,y,i,o,s,e,!1)!==!1)return h(),t.insertBefore(y,C),$=t,b(),v(!0)}else if(o.parentNode===t){s=J(o);var M=0,G,j=y.parentNode!==t,E=!Dr(y.animated&&y.toRect||i,o.animated&&o.toRect||s,u),ie=u?"top":"left",X=mo(o,"top","top")||mo(y,"top","top"),U=X?X.scrollTop:void 0;yt!==o&&(G=s[ie],Yt=!1,nn=!E&&p.invertSwap||j),M=Nr(e,o,s,u,E?1:p.swapThreshold,p.invertedSwapThreshold==null?p.swapThreshold:p.invertedSwapThreshold,nn,yt===o);var K;if(M!==0){var N=Pe(y);do N-=M,K=$.children[N];while(K&&(A(K,"display")==="none"||K===x))}if(M===0||K===o)return v(!1);yt=o,Ut=M;var L=o.nextElementSibling,W=!1;W=M===1;var Se=rn(H,t,y,i,o,s,e,W);if(Se!==!1)return(Se===1||Se===-1)&&(W=Se===1),qn=!0,setTimeout(Or,30),h(),W&&!L?t.appendChild(y):o.parentNode.insertBefore(y,W?L:o),X&&Go(X,0,U-X.scrollTop),$=y.parentNode,G!==void 0&&!nn&&(fn=Math.abs(G-J(o)[ie])),b(),v(!0)}if(t.contains(y))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){P(document,"mousemove",this._onTouchMove),P(document,"touchmove",this._onTouchMove),P(document,"pointermove",this._onTouchMove),P(document,"dragover",ut),P(document,"mousemove",ut),P(document,"touchmove",ut)},_offUpEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._onDrop),P(e,"touchend",this._onDrop),P(e,"pointerup",this._onDrop),P(e,"pointercancel",this._onDrop),P(e,"touchcancel",this._onDrop),P(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(Ee=Pe(y),ot=Pe(y,o.draggable),ye("drop",this,{evt:e}),$=y&&y.parentNode,Ee=Pe(y),ot=Pe(y,o.draggable),w.eventCanceled){this._nulling();return}Tt=!1,nn=!1,Yt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),jn(this.cloneId),jn(this._dragStartId),this.nativeDraggable&&(P(document,"drop",this),P(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vt&&A(document.body,"user-select",""),A(y,"transform",""),e&&(Ft&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(H===$||oe&&oe.lastPutMode!=="clone")&&V&&V.parentNode&&V.parentNode.removeChild(V),y&&(this.nativeDraggable&&P(y,"dragend",this),Bn(y),y.style["will-change"]="",Ft&&!Tt&&Ae(y,oe?oe.options.ghostClass:this.options.ghostClass,!1),Ae(y,this.options.chosenClass,!1),fe({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==$?(Ee>=0&&(fe({rootEl:$,name:"add",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"remove",toEl:$,originalEvent:e}),fe({rootEl:$,name:"sort",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),oe&&oe.save()):Ee!==Et&&Ee>=0&&(fe({sortable:this,name:"update",toEl:$,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),w.active&&((Ee==null||Ee===-1)&&(Ee=Et,ot=Xt),fe({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ye("nulling",this),H=y=$=x=pt=V=dn=rt=lt=Ne=Ft=Ee=ot=Et=Xt=yt=Ut=oe=tn=w.dragged=w.ghost=w.clone=w.active=null,Tn.forEach(function(e){e.checked=!0}),Tn.length=Mn=Nn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Pr(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,i=0,s=o.length,l=this.options;i<s;i++)t=o[i],Be(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Br(t));return e},sort:function(e,t){var o={},i=this.el;this.toArray().forEach(function(s,l){var p=i.children[l];Be(p,this.options.draggable,i,!1)&&(o[s]=p)},this),t&&this.captureAnimationState(),e.forEach(function(s){o[s]&&(i.removeChild(o[s]),i.appendChild(o[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var i=Jt.modifyOption(this,e,t);typeof i<"u"?o[e]=i:o[e]=t,e==="group"&&Yo(o)},destroy:function(){ye("destroy",this);var e=this.el;e[be]=null,P(e,"mousedown",this._onTapStart),P(e,"touchstart",this._onTapStart),P(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(P(e,"dragover",this),P(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bn.splice(bn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!rt){if(ye("hideClone",this),w.eventCanceled)return;A(V,"display","none"),this.options.removeCloneOnHide&&V.parentNode&&V.parentNode.removeChild(V),rt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(rt){if(ye("showClone",this),w.eventCanceled)return;y.parentNode==H&&!this.options.group.revertClone?H.insertBefore(V,y):pt?H.insertBefore(V,pt):H.appendChild(V),this.options.group.revertClone&&this.animate(y,V),A(V,"display",""),rt=!1}}};function Pr(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function rn(n,e,t,o,i,s,l,p){var d,c=n[be],g=c.options.onMove,r;return window.CustomEvent&&!Ke&&!Zt?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=n,d.dragged=t,d.draggedRect=o,d.related=i||e,d.relatedRect=s||J(e),d.willInsertAfter=p,d.originalEvent=l,n.dispatchEvent(d),g&&(r=g.call(c,d,l)),r}function Bn(n){n.draggable=!1}function Or(){qn=!1}function kr(n,e,t){var o=J(It(t.el,0,t.options,!0)),i=$o(t.el,t.options,x),s=10;return e?n.clientX<i.left-s||n.clientY<o.top&&n.clientX<o.right:n.clientY<i.top-s||n.clientY<o.bottom&&n.clientX<o.left}function Mr(n,e,t){var o=J(eo(t.el,t.options.draggable)),i=$o(t.el,t.options,x),s=10;return e?n.clientX>i.right+s||n.clientY>o.bottom&&n.clientX>o.left:n.clientY>i.bottom+s||n.clientX>o.right&&n.clientY>o.top}function Nr(n,e,t,o,i,s,l,p){var d=o?n.clientY:n.clientX,c=o?t.height:t.width,g=o?t.top:t.left,r=o?t.bottom:t.right,a=!1;if(!l){if(p&&fn<c*i){if(!Yt&&(Ut===1?d>g+c*s/2:d<r-c*s/2)&&(Yt=!0),Yt)a=!0;else if(Ut===1?d<g+fn:d>r-fn)return-Ut}else if(d>g+c*(1-i)/2&&d<r-c*(1-i)/2)return Rr(e)}return a=a||l,a&&(d<g+c*s/2||d>r-c*s/2)?d>g+c/2?1:-1:0}function Rr(n){return Pe(y)<Pe(n)?1:-1}function Br(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,o=0;t--;)o+=e.charCodeAt(t);return o.toString(36)}function Fr(n){Tn.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var o=e[t];o.checked&&Tn.push(o)}}function pn(n){return setTimeout(n,0)}function jn(n){return clearTimeout(n)}Sn&&O(document,"touchmove",function(n){(w.active||Tt)&&n.cancelable&&n.preventDefault()});w.utils={on:O,off:P,css:A,find:Lo,is:function(e,t){return!!Be(e,t,e,!1)},extend:yr,throttle:Ho,closest:Be,toggleClass:Ae,clone:Vo,index:Pe,nextTick:pn,cancelNextTick:jn,detectDirection:Uo,getChild:It,expando:be};w.get=function(n){return n[be]};w.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(w.utils=Ue(Ue({},w.utils),o.utils)),Jt.mount(o)})};w.create=function(n,e){return new w(n,e)};w.version=gr;var Z=[],Lt,Wn,Zn=!1,Fn,Ln,wn,Ht;function Lr(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):o.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):(P(document,"pointermove",this._handleFallbackAutoScroll),P(document,"touchmove",this._handleFallbackAutoScroll),P(document,"mousemove",this._handleFallbackAutoScroll)),yo(),mn(),br()},nulling:function(){wn=Wn=Lt=Zn=Ht=Fn=Ln=null,Z.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var i=this,s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,p=document.elementFromPoint(s,l);if(wn=t,o||this.options.forceAutoScrollFallback||Zt||Ke||Vt){Hn(t,this.options,p,o);var d=it(p,!0);Zn&&(!Ht||s!==Fn||l!==Ln)&&(Ht&&yo(),Ht=setInterval(function(){var c=it(document.elementFromPoint(s,l),!0);c!==d&&(d=c,mn()),Hn(t,i.options,c,o)},10),Fn=s,Ln=l)}else{if(!this.options.bubbleScroll||it(p,!0)===Xe()){mn();return}Hn(t,this.options,it(p,!1),!1)}}},Qe(n,{pluginName:"scroll",initializeByDefault:!0})}function mn(){Z.forEach(function(n){clearInterval(n.pid)}),Z=[]}function yo(){clearInterval(Ht)}var Hn=Ho(function(n,e,t,o){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,l=e.scrollSensitivity,p=e.scrollSpeed,d=Xe(),c=!1,g;Wn!==t&&(Wn=t,mn(),Lt=e.scroll,g=e.scrollFn,Lt===!0&&(Lt=it(t,!0)));var r=0,a=Lt;do{var u=a,f=J(u),m=f.top,_=f.bottom,h=f.left,v=f.right,b=f.width,S=f.height,C=void 0,M=void 0,G=u.scrollWidth,j=u.scrollHeight,E=A(u),ie=u.scrollLeft,X=u.scrollTop;u===d?(C=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),M=S<j&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(C=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"),M=S<j&&(E.overflowY==="auto"||E.overflowY==="scroll"));var U=C&&(Math.abs(v-i)<=l&&ie+b<G)-(Math.abs(h-i)<=l&&!!ie),K=M&&(Math.abs(_-s)<=l&&X+S<j)-(Math.abs(m-s)<=l&&!!X);if(!Z[r])for(var N=0;N<=r;N++)Z[N]||(Z[N]={});(Z[r].vx!=U||Z[r].vy!=K||Z[r].el!==u)&&(Z[r].el=u,Z[r].vx=U,Z[r].vy=K,clearInterval(Z[r].pid),(U!=0||K!=0)&&(c=!0,Z[r].pid=setInterval((function(){o&&this.layer===0&&w.active._onTouchMove(wn);var L=Z[this.layer].vy?Z[this.layer].vy*p:0,W=Z[this.layer].vx?Z[this.layer].vx*p:0;typeof g=="function"&&g.call(w.dragged.parentNode[be],W,L,n,wn,Z[this.layer].el)!=="continue"||Go(Z[this.layer].el,W,L)}).bind({layer:r}),24))),r++}while(e.bubbleScroll&&a!==d&&(a=it(a,!1)));Zn=c}},30),Wo=function(e){var t=e.originalEvent,o=e.putSortable,i=e.dragEl,s=e.activeSortable,l=e.dispatchSortableEvent,p=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var c=o||s;p();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,r=document.elementFromPoint(g.clientX,g.clientY);d(),c&&!c.el.contains(r)&&(l("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function to(){}to.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=It(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:Wo};Qe(to,{pluginName:"revertOnSpill"});function no(){}no.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,i=o||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Wo};Qe(no,{pluginName:"removeOnSpill"});w.mount(new Lr);w.mount(no,to);class Hr{constructor(){this.steps=[]}visualizeCarryOver(e,t){const o=[],i=e+t;o.push({action:"show_first",value:e,coins:this.convertToCoins(e),message:`まず ${e}円 があります`}),o.push({action:"show_second",value:t,coins:this.convertToCoins(t),message:`つぎに ${t}円 をたします`});const s=e%10,l=t%10;if(s+l>=10){const d=10-s;o.push({action:"make_ten",value:d,message:`${s} に ${d} をたして 10 をつくります`}),o.push({action:"convert_to_ten",message:"10まいの1円が1まいの10円になります！"});const c=l-d;c>0&&o.push({action:"add_remainder",value:c,message:`のこりの ${c}円 をたします`}),o.push({action:"final_result",value:i,message:`ごうけい ${i}円 です！`})}else o.push({action:"simple_add",value:i,message:`${e} + ${t} = ${i}円 です！`});return o}convertToCoins(e){const t=[],o=Math.floor(e/10),i=e%10;for(let s=0;s<o;s++)t.push({type:"10",value:10});for(let s=0;s<i;s++)t.push({type:"1",value:1});return t}generateCoinsForAmount(e){const t=[];let o=e;const i=Math.floor(o/10);for(let s=0;s<i;s++)t.push(this.createCoin(10));o=o%10;for(let s=0;s<o;s++)t.push(this.createCoin(1));for(let s=0;s<3;s++)t.push(this.createCoin(10));for(let s=0;s<6;s++)t.push(this.createCoin(1));return t}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}checkCarryOverPattern(e,t){const o=e%10,i=t%10;return o+i>=10}getHint(e,t,o){const s=e+t-o;return s===0?"せいかいです！":s>0?`あと ${s}円 たりません`:`${Math.abs(s)}円 おおすぎます`}generateProblemSet(e=1){const t=[];switch(e){case 1:t.push({items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}]},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}]},{items:[{name:"パン",price:9,emoji:"🍞"},{name:"ぎゅうにゅう",price:4,emoji:"🥛"}]});break;case 2:t.push({items:[{name:"ケーキ",price:8,emoji:"🍰"},{name:"ジュース",price:7,emoji:"🧃"}]},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"ほん",price:6,emoji:"📚"}]});break}return t}}var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var bo;function Gr(){return bo||(bo=1,function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var a=this||t;if(r=parseFloat(r),a.ctx||g(),typeof r<"u"&&r>=0&&r<=1){if(a._volume=r,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),m=0;m<f.length;m++){var _=a._howls[u]._soundById(f[m]);_&&_._node&&(_._node.volume=_._volume*r)}return a}return a._volume},mute:function(r){var a=this||t;a.ctx||g(),a._muted=r,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r?0:a._volume,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),m=0;m<f.length;m++){var _=a._howls[u]._soundById(f[m]);_&&_._node&&(_._node.muted=r?!0:_._muted)}return a},stop:function(){for(var r=this||t,a=0;a<r._howls.length;a++)r._howls[a].stop();return r},unload:function(){for(var r=this||t,a=r._howls.length-1;a>=0;a--)r._howls[a].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,g()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var a=new Audio;a.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return r}if(!a||typeof a.canPlayType!="function")return r;var u=a.canPlayType("audio/mpeg;").replace(/^no$/,""),f=r._navigator?r._navigator.userAgent:"",m=f.match(/OPR\/(\d+)/g),_=m&&parseInt(m[0].split("/")[1],10)<33,h=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,v=f.match(/Version\/(.*?) /),b=h&&v&&parseInt(v[1],10)<15;return r._codecs={mp3:!!(!_&&(u||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var a=function(u){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,r._releaseHtml5Audio(f)}catch{r.noAudio=!0;break}for(var m=0;m<r._howls.length;m++)if(!r._howls[m]._webAudio)for(var _=r._howls[m]._getSoundIds(),h=0;h<_.length;h++){var v=r._howls[m]._soundById(_[h]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}r._autoResume();var b=r.ctx.createBufferSource();b.buffer=r._scratchBuffer,b.connect(r.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),b.onended=function(){b.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var S=0;S<r._howls.length;S++)r._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var a=this||t;return r._unlocked&&a._html5AudioPool.push(r),a},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!t.usingWebAudio)){for(var a=0;a<r._howls.length;a++)if(r._howls[a]._webAudio){for(var u=0;u<r._howls[a]._sounds.length;u++)if(!r._howls[a]._sounds[u]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(r.autoSuspend){r._suspendTimer=null,r.state="suspending";var f=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(f,f)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var a=0;a<r._howls.length;a++)r._howls[a]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,o=function(r){var a=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(r)};o.prototype={init:function(r){var a=this;return t.ctx||g(),a._autoplay=r.autoplay||!1,a._format=typeof r.format!="string"?r.format:[r.format],a._html5=r.html5||!1,a._muted=r.mute||!1,a._loop=r.loop||!1,a._pool=r.pool||5,a._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,a._rate=r.rate||1,a._sprite=r.sprite||{},a._src=typeof r.src!="string"?r.src:[r.src],a._volume=r.volume!==void 0?r.volume:1,a._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=r.onend?[{fn:r.onend}]:[],a._onfade=r.onfade?[{fn:r.onfade}]:[],a._onload=r.onload?[{fn:r.onload}]:[],a._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],a._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],a._onpause=r.onpause?[{fn:r.onpause}]:[],a._onplay=r.onplay?[{fn:r.onplay}]:[],a._onstop=r.onstop?[{fn:r.onstop}]:[],a._onmute=r.onmute?[{fn:r.onmute}]:[],a._onvolume=r.onvolume?[{fn:r.onvolume}]:[],a._onrate=r.onrate?[{fn:r.onrate}]:[],a._onseek=r.onseek?[{fn:r.onseek}]:[],a._onunlock=r.onunlock?[{fn:r.onunlock}]:[],a._onresume=[],a._webAudio=t.usingWebAudio&&!a._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var r=this,a=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var u=0;u<r._src.length;u++){var f,m;if(r._format&&r._format[u])f=r._format[u];else{if(m=r._src[u],typeof m!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(m),f||(f=/\.([^.]+)$/.exec(m.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&t.codecs(f)){a=r._src[u];break}}if(!a){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=a,r._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new i(r),r._webAudio&&l(r),r},play:function(r,a){var u=this,f=null;if(typeof r=="number")f=r,r=null;else{if(typeof r=="string"&&u._state==="loaded"&&!u._sprite[r])return null;if(typeof r>"u"&&(r="__default",!u._playLock)){for(var m=0,_=0;_<u._sounds.length;_++)u._sounds[_]._paused&&!u._sounds[_]._ended&&(m++,f=u._sounds[_]._id);m===1?r=null:f=null}}var h=f?u._soundById(f):u._inactiveSound();if(!h)return null;if(f&&!r&&(r=h._sprite||"__default"),u._state!=="loaded"){h._sprite=r,h._ended=!1;var v=h._id;return u._queue.push({event:"play",action:function(){u.play(v)}}),v}if(f&&!h._paused)return a||u._loadQueue("play"),h._id;u._webAudio&&t._autoResume();var b=Math.max(0,h._seek>0?h._seek:u._sprite[r][0]/1e3),S=Math.max(0,(u._sprite[r][0]+u._sprite[r][1])/1e3-b),C=S*1e3/Math.abs(h._rate),M=u._sprite[r][0]/1e3,G=(u._sprite[r][0]+u._sprite[r][1])/1e3;h._sprite=r,h._ended=!1;var j=function(){h._paused=!1,h._seek=b,h._start=M,h._stop=G,h._loop=!!(h._loop||u._sprite[r][2])};if(b>=G){u._ended(h);return}var E=h._node;if(u._webAudio){var ie=function(){u._playLock=!1,j(),u._refreshBuffer(h);var N=h._muted||u._muted?0:h._volume;E.gain.setValueAtTime(N,t.ctx.currentTime),h._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?h._loop?E.bufferSource.noteGrainOn(0,b,86400):E.bufferSource.noteGrainOn(0,b,S):h._loop?E.bufferSource.start(0,b,86400):E.bufferSource.start(0,b,S),C!==1/0&&(u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),C)),a||setTimeout(function(){u._emit("play",h._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ie():(u._playLock=!0,u.once("resume",ie),u._clearTimer(h._id))}else{var X=function(){E.currentTime=b,E.muted=h._muted||u._muted||t._muted||E.muted,E.volume=h._volume*t.volume(),E.playbackRate=h._rate;try{var N=E.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(u._playLock=!0,j(),N.then(function(){u._playLock=!1,E._unlocked=!0,a?u._loadQueue():u._emit("play",h._id)}).catch(function(){u._playLock=!1,u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):a||(u._playLock=!1,j(),u._emit("play",h._id)),E.playbackRate=h._rate,E.paused){u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||h._loop?u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),C):(u._endTimers[h._id]=function(){u._ended(h),E.removeEventListener("ended",u._endTimers[h._id],!1)},E.addEventListener("ended",u._endTimers[h._id],!1))}catch(L){u._emit("playerror",h._id,L)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=u._src,E.load());var U=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||U)X();else{u._playLock=!0,u._state="loading";var K=function(){u._state="loaded",X(),E.removeEventListener(t._canPlayEvent,K,!1)};E.addEventListener(t._canPlayEvent,K,!1),u._clearTimer(h._id)}}return h._id},pause:function(r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(r)}}),a;for(var u=a._getSoundIds(r),f=0;f<u.length;f++){a._clearTimer(u[f]);var m=a._soundById(u[f]);if(m&&!m._paused&&(m._seek=a.seek(u[f]),m._rateSeek=0,m._paused=!0,a._stopFade(u[f]),m._node))if(a._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),a._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||a._emit("pause",m?m._id:null)}return a},stop:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(r)}}),u;for(var f=u._getSoundIds(r),m=0;m<f.length;m++){u._clearTimer(f[m]);var _=u._soundById(f[m]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,u._stopFade(f[m]),_._node&&(u._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),u._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&u._clearSound(_._node))),a||u._emit("stop",_._id))}return u},mute:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(r,a)}}),u;if(typeof a>"u")if(typeof r=="boolean")u._muted=r;else return u._muted;for(var f=u._getSoundIds(a),m=0;m<f.length;m++){var _=u._soundById(f[m]);_&&(_._muted=r,_._interval&&u._stopFade(_._id),u._webAudio&&_._node?_._node.gain.setValueAtTime(r?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:r),u._emit("mute",_._id))}return u},volume:function(){var r=this,a=arguments,u,f;if(a.length===0)return r._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var m=r._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length>=2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var h;if(typeof u<"u"&&u>=0&&u<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;typeof f>"u"&&(r._volume=u),f=r._getSoundIds(f);for(var v=0;v<f.length;v++)h=r._soundById(f[v]),h&&(h._volume=u,a[2]||r._stopFade(f[v]),r._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(u,t.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=u*t.volume()),r._emit("volume",h._id))}else return h=f?r._soundById(f):r._sounds[0],h?h._volume:0;return r},fade:function(r,a,u,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(r,a,u,f)}}),m;r=Math.min(Math.max(0,parseFloat(r)),1),a=Math.min(Math.max(0,parseFloat(a)),1),u=parseFloat(u),m.volume(r,f);for(var _=m._getSoundIds(f),h=0;h<_.length;h++){var v=m._soundById(_[h]);if(v){if(f||m._stopFade(_[h]),m._webAudio&&!v._muted){var b=t.ctx.currentTime,S=b+u/1e3;v._volume=r,v._node.gain.setValueAtTime(r,b),v._node.gain.linearRampToValueAtTime(a,S)}m._startFadeInterval(v,r,a,u,_[h],typeof f>"u")}}return m},_startFadeInterval:function(r,a,u,f,m,_){var h=this,v=a,b=u-a,S=Math.abs(b/.01),C=Math.max(4,S>0?f/S:f),M=Date.now();r._fadeTo=u,r._interval=setInterval(function(){var G=(Date.now()-M)/f;M=Date.now(),v+=b*G,v=Math.round(v*100)/100,b<0?v=Math.max(u,v):v=Math.min(u,v),h._webAudio?r._volume=v:h.volume(v,r._id,!0),_&&(h._volume=v),(u<a&&v<=u||u>a&&v>=u)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,h.volume(u,r._id),h._emit("fade",r._id))},C)},_stopFade:function(r){var a=this,u=a._soundById(r);return u&&u._interval&&(a._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,a.volume(u._fadeTo,r),u._fadeTo=null,a._emit("fade",r)),a},loop:function(){var r=this,a=arguments,u,f,m;if(a.length===0)return r._loop;if(a.length===1)if(typeof a[0]=="boolean")u=a[0],r._loop=u;else return m=r._soundById(parseInt(a[0],10)),m?m._loop:!1;else a.length===2&&(u=a[0],f=parseInt(a[1],10));for(var _=r._getSoundIds(f),h=0;h<_.length;h++)m=r._soundById(_[h]),m&&(m._loop=u,r._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=u,u&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,r.playing(_[h])&&(r.pause(_[h],!0),r.play(_[h],!0)))));return r},rate:function(){var r=this,a=arguments,u,f;if(a.length===0)f=r._sounds[0]._id;else if(a.length===1){var m=r._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var h;if(typeof u=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;typeof f>"u"&&(r._rate=u),f=r._getSoundIds(f);for(var v=0;v<f.length;v++)if(h=r._soundById(f[v]),h){r.playing(f[v])&&(h._rateSeek=r.seek(f[v]),h._playStart=r._webAudio?t.ctx.currentTime:h._playStart),h._rate=u,r._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):h._node&&(h._node.playbackRate=u);var b=r.seek(f[v]),S=(r._sprite[h._sprite][0]+r._sprite[h._sprite][1])/1e3-b,C=S*1e3/Math.abs(h._rate);(r._endTimers[f[v]]||!h._paused)&&(r._clearTimer(f[v]),r._endTimers[f[v]]=setTimeout(r._ended.bind(r,h),C)),r._emit("rate",h._id)}}else return h=r._soundById(f),h?h._rate:r._rate;return r},seek:function(){var r=this,a=arguments,u,f;if(a.length===0)r._sounds.length&&(f=r._sounds[0]._id);else if(a.length===1){var m=r._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):r._sounds.length&&(f=r._sounds[0]._id,u=parseFloat(a[0]))}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var h=r._soundById(f);if(h)if(typeof u=="number"&&u>=0){var v=r.playing(f);v&&r.pause(f,!0),h._seek=u,h._ended=!1,r._clearTimer(f),!r._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=u);var b=function(){v&&r.play(f,!0),r._emit("seek",f)};if(v&&!r._webAudio){var S=function(){r._playLock?setTimeout(S,0):b()};setTimeout(S,0)}else b()}else if(r._webAudio){var C=r.playing(f)?t.ctx.currentTime-h._playStart:0,M=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(M+C*Math.abs(h._rate))}else return h._node.currentTime;return r},playing:function(r){var a=this;if(typeof r=="number"){var u=a._soundById(r);return u?!u._paused:!1}for(var f=0;f<a._sounds.length;f++)if(!a._sounds[f]._paused)return!0;return!1},duration:function(r){var a=this,u=a._duration,f=a._soundById(r);return f&&(u=a._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var r=this,a=r._sounds,u=0;u<a.length;u++)a[u]._paused||r.stop(a[u]._id),r._webAudio||(r._clearSound(a[u]._node),a[u]._node.removeEventListener("error",a[u]._errorFn,!1),a[u]._node.removeEventListener(t._canPlayEvent,a[u]._loadFn,!1),a[u]._node.removeEventListener("ended",a[u]._endFn,!1),t._releaseHtml5Audio(a[u]._node)),delete a[u]._node,r._clearTimer(a[u]._id);var f=t._howls.indexOf(r);f>=0&&t._howls.splice(f,1);var m=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===r._src||r._src.indexOf(t._howls[u]._src)>=0){m=!1;break}return s&&m&&delete s[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,a,u,f){var m=this,_=m["_on"+r];return typeof a=="function"&&_.push(f?{id:u,fn:a,once:f}:{id:u,fn:a}),m},off:function(r,a,u){var f=this,m=f["_on"+r],_=0;if(typeof a=="number"&&(u=a,a=null),a||u)for(_=0;_<m.length;_++){var h=u===m[_].id;if(a===m[_].fn&&h||!a&&h){m.splice(_,1);break}}else if(r)f["_on"+r]=[];else{var v=Object.keys(f);for(_=0;_<v.length;_++)v[_].indexOf("_on")===0&&Array.isArray(f[v[_]])&&(f[v[_]]=[])}return f},once:function(r,a,u){var f=this;return f.on(r,a,u,1),f},_emit:function(r,a,u){for(var f=this,m=f["_on"+r],_=m.length-1;_>=0;_--)(!m[_].id||m[_].id===a||r==="load")&&(setTimeout((function(h){h.call(this,a,u)}).bind(f,m[_].fn),0),m[_].once&&f.off(r,m[_].fn,m[_].id));return f._loadQueue(r),f},_loadQueue:function(r){var a=this;if(a._queue.length>0){var u=a._queue[0];u.event===r&&(a._queue.shift(),a._loadQueue()),r||u.action()}return a},_ended:function(r){var a=this,u=r._sprite;if(!a._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(a._ended.bind(a,r),100),a;var f=!!(r._loop||a._sprite[u][2]);if(a._emit("end",r._id),!a._webAudio&&f&&a.stop(r._id,!0).play(r._id),a._webAudio&&f){a._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var m=(r._stop-r._start)*1e3/Math.abs(r._rate);a._endTimers[r._id]=setTimeout(a._ended.bind(a,r),m)}return a._webAudio&&!f&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,a._clearTimer(r._id),a._cleanBuffer(r._node),t._autoSuspend()),!a._webAudio&&!f&&a.stop(r._id,!0),a},_clearTimer:function(r){var a=this;if(a._endTimers[r]){if(typeof a._endTimers[r]!="function")clearTimeout(a._endTimers[r]);else{var u=a._soundById(r);u&&u._node&&u._node.removeEventListener("ended",a._endTimers[r],!1)}delete a._endTimers[r]}return a},_soundById:function(r){for(var a=this,u=0;u<a._sounds.length;u++)if(r===a._sounds[u]._id)return a._sounds[u];return null},_inactiveSound:function(){var r=this;r._drain();for(var a=0;a<r._sounds.length;a++)if(r._sounds[a]._ended)return r._sounds[a].reset();return new i(r)},_drain:function(){var r=this,a=r._pool,u=0,f=0;if(!(r._sounds.length<a)){for(f=0;f<r._sounds.length;f++)r._sounds[f]._ended&&u++;for(f=r._sounds.length-1;f>=0;f--){if(u<=a)return;r._sounds[f]._ended&&(r._webAudio&&r._sounds[f]._node&&r._sounds[f]._node.disconnect(0),r._sounds.splice(f,1),u--)}}},_getSoundIds:function(r){var a=this;if(typeof r>"u"){for(var u=[],f=0;f<a._sounds.length;f++)u.push(a._sounds[f]._id);return u}else return[r]},_refreshBuffer:function(r){var a=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=s[a._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),a},_cleanBuffer:function(r){var a=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!r.bufferSource)return a;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),u))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,a},_clearSound:function(r){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(r){this._parent=r,this.init()};i.prototype={init:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,a._sounds.push(r),r.create(),r},create:function(){var r=this,a=r._parent,u=t._muted||r._muted||r._parent._muted?0:r._volume;return a._webAudio?(r._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(u,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=a._src,r._node.preload=a._preload===!0?"auto":a._preload,r._node.volume=u*t.volume(),r._node.load()),r},reset:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,a=r._parent;a._duration=Math.ceil(r._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,a=r._parent;a._duration===1/0&&(a._duration=Math.ceil(r._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var s={},l=function(r){var a=r._src;if(s[a]){r._duration=s[a].duration,c(r);return}if(/^data:[^;]+;base64,/.test(a)){for(var u=atob(a.split(",")[1]),f=new Uint8Array(u.length),m=0;m<u.length;++m)f[m]=u.charCodeAt(m);d(f.buffer,r)}else{var _=new XMLHttpRequest;_.open(r._xhr.method,a,!0),_.withCredentials=r._xhr.withCredentials,_.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(h){_.setRequestHeader(h,r._xhr.headers[h])}),_.onload=function(){var h=(_.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}d(_.response,r)},_.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete s[a],r.load())},p(_)}},p=function(r){try{r.send()}catch{r.onerror()}},d=function(r,a){var u=function(){a._emit("loaderror",null,"Decoding audio data failed.")},f=function(m){m&&a._sounds.length>0?(s[a._src]=m,c(a,m)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(f).catch(u):t.ctx.decodeAudioData(r,f,u)},c=function(r,a){a&&!r._duration&&(r._duration=a.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},g=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),a=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=a?parseInt(a[1],10):null;if(r&&u&&u<9){var f=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!f&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=o,typeof Nt<"u"?(Nt.HowlerGlobal=e,Nt.Howler=t,Nt.Howl=o,Nt.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=o,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var i=o._howls.length-1;i>=0;i--)o._howls[i].stereo(t);return o},HowlerGlobal.prototype.pos=function(t,o,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(o=typeof o!="number"?s._pos[1]:o,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,o,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,o,i,s,l,p){var d=this;if(!d.ctx||!d.ctx.listener)return d;var c=d._orientation;if(o=typeof o!="number"?c[1]:o,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,l=typeof l!="number"?c[4]:l,p=typeof p!="number"?c[5]:p,typeof t=="number")d._orientation=[t,o,i,s,l,p],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(t,o,i,s,l,p);else return c;return d},Howl.prototype.init=function(t){return function(o){var i=this;return i._orientation=o.orientation||[1,0,0],i._stereo=o.stereo||null,i._pos=o.pos||null,i._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},i._onstereo=o.onstereo?[{fn:o.onstereo}]:[],i._onpos=o.onpos?[{fn:o.onpos}]:[],i._onorientation=o.onorientation?[{fn:o.onorientation}]:[],t.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,o){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,o)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var l=i._getSoundIds(o),p=0;p<l.length;p++){var d=i._soundById(l[p]);if(d)if(typeof t=="number")d._stereo=t,d._pos=[t,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,s),s==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(t,0,0):d._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",d._id);else return d._stereo}return i},Howl.prototype.pos=function(t,o,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(t,o,i,s)}}),l;if(o=typeof o!="number"?0:o,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")l._pos=[t,o,i];else return l._pos;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._pos=[t,o,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(t,o,i)),l._emit("pos",c._id);else return c._pos}return l},Howl.prototype.orientation=function(t,o,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(t,o,i,s)}}),l;if(o=typeof o!="number"?l._orientation[1]:o,i=typeof i!="number"?l._orientation[2]:i,typeof s>"u")if(typeof t=="number")l._orientation=[t,o,i];else return l._orientation;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._orientation=[t,o,i],c._node&&(c._panner||(c._pos||(c._pos=l._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(t,o,i)),l._emit("orientation",c._id);else return c._orientation}return l},Howl.prototype.pannerAttr=function(){var t=this,o=arguments,i,s,l;if(!t._webAudio)return t;if(o.length===0)return t._pannerAttr;if(o.length===1)if(typeof o[0]=="object")i=o[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return l=t._soundById(parseInt(o[0],10)),l?l._pannerAttr:t._pannerAttr;else o.length===2&&(i=o[0],s=parseInt(o[1],10));for(var p=t._getSoundIds(s),d=0;d<p.length;d++)if(l=t._soundById(p[d]),l){var c=l._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var g=l._panner;g||(l._pos||(l._pos=t._pos||[0,0,-.5]),e(l,"spatial"),g=l._panner),g.coneInnerAngle=c.coneInnerAngle,g.coneOuterAngle=c.coneOuterAngle,g.coneOuterGain=c.coneOuterGain,g.distanceModel=c.distanceModel,g.maxDistance=c.maxDistance,g.refDistance=c.refDistance,g.rolloffFactor=c.rolloffFactor,g.panningModel=c.panningModel}return t},Sound.prototype.init=function(t){return function(){var o=this,i=o._parent;o._orientation=i._orientation,o._stereo=i._stereo,o._pos=i._pos,o._pannerAttr=i._pannerAttr,t.call(this),o._stereo?i.stereo(o._stereo):o._pos&&i.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var o=this,i=o._parent;return o._orientation=i._orientation,o._stereo=i._stereo,o._pos=i._pos,o._pannerAttr=i._pannerAttr,o._stereo?i.stereo(o._stereo):o._pos?i.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,i._refreshBuffer(o)),t.call(this)}}(Sound.prototype.reset);var e=function(t,o){o=o||"spatial",o==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Gn)),Gn}Gr();class Vr{constructor(){this.sounds={},this.soundEnabled=!0,this.volume=.7,this.initializeDummySounds()}initializeDummySounds(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sounds={"coin-pickup":this.createToneSound(800,.1),"coin-drop":this.createToneSound(400,.2),"register-open":this.createToneSound(600,.3),success:this.createSuccessSound(),wrong:this.createErrorSound(),"level-up":this.createLevelUpSound(),"ten-conversion":this.createMagicSound()}}createToneSound(e,t){return{play:()=>{if(!this.soundEnabled)return;const o=this.audioContext.createOscillator(),i=this.audioContext.createGain();o.connect(i),i.connect(this.audioContext.destination),o.frequency.value=e,o.type="sine",i.gain.setValueAtTime(0,this.audioContext.currentTime),i.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),o.start(this.audioContext.currentTime),o.stop(this.audioContext.currentTime+t)}}}createSuccessSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,659,784,1047],t=.15;e.forEach((o,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=o,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*100)})}}}createErrorSound(){return{play:()=>{if(!this.soundEnabled)return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(200,this.audioContext.currentTime),e.frequency.linearRampToValueAtTime(100,this.audioContext.currentTime+.3),e.type="sawtooth",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3)}}}createLevelUpSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,587,659,698,784,880,988,1047],t=.1;e.forEach((o,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=o,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.15,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*50)})}}}createMagicSound(){return{play:()=>{if(this.soundEnabled)for(let e=0;e<5;e++)setTimeout(()=>{const t=this.audioContext.createOscillator(),o=this.audioContext.createGain();t.connect(o),o.connect(this.audioContext.destination);const i=800+Math.random()*800;t.frequency.value=i,t.type="sine",o.gain.setValueAtTime(0,this.audioContext.currentTime),o.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),o.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.3)},e*100)}}}play(e){if(this.sounds[e]&&this.soundEnabled)try{this.sounds[e].play()}catch(t){console.warn(`Could not play sound: ${e}`,t)}}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}enableSound(){this.soundEnabled=!0}disableSound(){this.soundEnabled=!1}toggleSound(){return this.soundEnabled=!this.soundEnabled,this.soundEnabled}}const Ze=new Vr;/**
 * anime.js - ESM
 * @version v4.0.2
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const Ye=typeof window<"u",Vn=Ye?window:null,Pt=Ye?document:null,q={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},k={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},ke={NONE:0,AUTO:1,FORCE:2},Te={replace:0,none:1,blend:2},To=Symbol(),oo=Symbol(),Zo=Symbol(),xn=Symbol(),$r=Symbol(),F=1e-11,Jo=1e12,Ot=1e3,Jn=120,mt="",Qt=new Map;Qt.set("x","translateX");Qt.set("y","translateY");Qt.set("z","translateZ");const ro=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Qo=ro.reduce((n,e)=>({...n,[e]:e+"("}),{}),Oe=()=>{},Xr=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,Ur=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Yr=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,qr=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,jr=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,wo=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Wr=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Zr=/([a-z])([A-Z])/g,Jr=/(\w+)(\([^)]+\)+)/g,Ko={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:Jn,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Ot,delay:0,loopDelay:0,ease:"out(2)",composition:Te.replace,modifier:n=>n,onBegin:Oe,onBeforeUpdate:Oe,onUpdate:Oe,onLoop:Oe,onPause:Oe,onComplete:Oe,onRender:Oe},re={defaults:Ko,root:Pt,precision:4,timeScale:1,tickThreshold:200},zo={version:"4.0.2",engine:null};Ye&&(Vn.AnimeJS||(Vn.AnimeJS=[]),Vn.AnimeJS.push(zo));const Qr=n=>n.replace(Zr,"$1-$2").toLowerCase(),Dt=(n,e)=>n.indexOf(e)===0,jt=Date.now,Wt=Array.isArray,$n=n=>n&&n.constructor===Object,Kr=n=>typeof n=="number"&&!isNaN(n),Dn=n=>typeof n=="string",An=n=>typeof n=="function",B=n=>typeof n>"u",Xn=n=>B(n)||n===null,er=n=>Ye&&n instanceof SVGElement,tr=n=>Xr.test(n),nr=n=>Dt(n,"rgb"),or=n=>Dt(n,"hsl"),zr=n=>tr(n)||nr(n)||or(n),hn=n=>!re.defaults.hasOwnProperty(n),an=n=>Dn(n)?parseFloat(n):n,wt=Math.pow,ei=Math.sqrt,ti=Math.sin,ni=Math.cos,oi=Math.abs,ri=Math.ceil,rr=Math.floor,ii=Math.asin,io=Math.PI,Ao=Math.round,ce=(n,e,t)=>n<e?e:n>t?t:n,Eo={},Q=(n,e)=>{if(e<0)return n;if(!e)return Ao(n);let t=Eo[e];return t||(t=Eo[e]=10**e),Ao(n*t)/t},ct=(n,e,t)=>n+(e-n)*t,ao=n=>n===1/0?Jo:n===-1/0?-1e12:n,qt=n=>n<=F?F:ao(Q(n,11)),pe=n=>Wt(n)?[...n]:n,ai=(n,e)=>{const t={...n};for(let o in e){const i=n[o];t[o]=B(i)?e[o]:i}return t},ee=(n,e,t,o="_prev",i="_next")=>{let s=n._head,l=i;for(t&&(s=n._tail,l=o);s;){const p=s[l];e(s),s=p}},Gt=(n,e,t="_prev",o="_next")=>{const i=e[t],s=e[o];i?i[o]=s:n._head=s,s?s[t]=i:n._tail=i,e[t]=null,e[o]=null},St=(n,e,t,o="_prev",i="_next")=>{let s=n._tail;for(;s&&t&&t(s,e);)s=s[o];const l=s?s[i]:n._head;s?s[i]=e:n._head=e,l?l[o]=e:n._tail=e,e[o]=s,e[i]=l};class ir{constructor(e=0){this.deltaTime=0,this._currentTime=e,this._elapsedTime=e,this._startTime=e,this._lastTime=e,this._scheduledTime=0,this._frameDuration=Q(Ot/Jn,0),this._fps=Jn,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(e){const t=this._frameDuration,o=+e,i=o<F?F:o,s=Q(Ot/i,0);this._fps=i,this._frameDuration=s,this._scheduledTime+=s-t}get speed(){return this._speed}set speed(e){const t=+e;this._speed=t<F?F:t}requestTick(e){const t=this._scheduledTime,o=this._elapsedTime;if(this._elapsedTime+=e-o,o<t)return ke.NONE;const i=this._frameDuration,s=o-t;return this._scheduledTime+=s<i?i:s,ke.AUTO}computeDeltaTime(e){const t=e-this._lastTime;return this.deltaTime=t,this._lastTime=e,t}}const _n=(n,e,t,o,i)=>{const s=n.parent,l=n.duration,p=n.completed,d=n.iterationDuration,c=n.iterationCount,g=n._currentIteration,r=n._loopDelay,a=n._reversed,u=n._alternate,f=n._hasChildren,m=n._delay,_=n._currentTime,h=m+d,v=e-m,b=ce(_,-m,l),S=ce(v,-m,l),C=v-_,M=S>0,G=S>=l,j=l<=F,E=i===ke.FORCE;let ie=0,X=v,U=0;if(c>1){const Se=~~(S/(d+(G?0:r)));n._currentIteration=ce(Se,0,c),G&&n._currentIteration--,ie=n._currentIteration%2,X=S%(d+r)||0}const K=a^(u&&ie),N=n._ease;let L=G?K?0:l:K?d-X:X;N&&(L=d*N(L/d)||0);const W=(s?s.backwards:v<_)?!K:!!K;if(n._currentTime=v,n._iterationTime=L,n.backwards=W,M&&!n.began?(n.began=!0,!t&&!(s&&(W||!s.began))&&n.onBegin(n)):v<=0&&(n.began=!1),!t&&!f&&M&&n._currentIteration!==g&&n.onLoop(n),E||i===ke.AUTO&&(e>=m&&e<=h||e<=m&&b>m||e>=h&&b!==l)||L>=h&&b!==l||L<=m&&b>0||e<=b&&b===l&&p||G&&!p&&j){if(M&&(n.computeDeltaTime(b),t||n.onBeforeUpdate(n)),!f){const Se=E||(W?C*-1:C)>=re.tickThreshold,Y=n._offset+(s?s._offset:0)+m+L;let T=n._head,ne,ae,ze,at,xe=0;for(;T;){const he=T._composition,De=T._currentTime,we=T._changeDuration,Mt=T._absoluteStartTime+T._changeDuration,Fe=T._nextRep,Ce=T._prevRep,qe=he!==Te.none;if((Se||(De!==we||Y<=Mt+(Fe?Fe._delay:0))&&(De!==0||Y>=T._absoluteStartTime))&&(!qe||!T._isOverridden&&(!T._isOverlapped||Y<=Mt)&&(!Fe||Fe._isOverridden||Y<=Fe._absoluteStartTime)&&(!Ce||Ce._isOverridden||Y>=Ce._absoluteStartTime+Ce._changeDuration+T._delay))){const je=T._currentTime=ce(L-T._startTime,0,we),te=T._ease(je/T._updateDuration),_e=T._modifier,Me=T._valueType,de=T._tweenType,ge=de===q.OBJECT,ht=Me===k.NUMBER,Le=ht&&ge||te===0||te===1?-1:re.precision;let ve,_t;if(ht)ve=_t=_e(Q(ct(T._fromNumber,T._toNumber,te),Le));else if(Me===k.UNIT)_t=_e(Q(ct(T._fromNumber,T._toNumber,te),Le)),ve=`${_t}${T._unit}`;else if(Me===k.COLOR){const z=T._fromNumbers,He=T._toNumbers,Ge=Q(ce(_e(ct(z[0],He[0],te)),0,255),0),We=Q(ce(_e(ct(z[1],He[1],te)),0,255),0),Kt=Q(ce(_e(ct(z[2],He[2],te)),0,255),0),gt=ce(_e(Q(ct(z[3],He[3],te),Le)),0,1);if(ve=`rgba(${Ge},${We},${Kt},${gt})`,qe){const st=T._numbers;st[0]=Ge,st[1]=We,st[2]=Kt,st[3]=gt}}else if(Me===k.COMPLEX){ve=T._strings[0];for(let z=0,He=T._toNumbers.length;z<He;z++){const Ge=_e(Q(ct(T._fromNumbers[z],T._toNumbers[z],te),Le)),We=T._strings[z+1];ve+=`${We?Ge+We:Ge}`,qe&&(T._numbers[z]=Ge)}}if(qe&&(T._number=_t),!o&&he!==Te.blend){const z=T.property;ne=T.target,ge?ne[z]=ve:de===q.ATTRIBUTE?ne.setAttribute(z,ve):(ae=ne.style,de===q.TRANSFORM?(ne!==ze&&(ze=ne,at=ne[xn]),at[z]=ve,xe=1):de===q.CSS?ae[z]=ve:de===q.CSS_VAR&&ae.setProperty(z,ve)),M&&(U=1)}else T._value=ve}if(xe&&T._renderTransforms){let je=mt;for(let te in at)je+=`${Qo[te]}${at[te]}) `;ae.transform=je,xe=0}T=T._next}!t&&U&&n.onRender(n)}!t&&M&&n.onUpdate(n)}return s&&j?!t&&(s.began&&!W&&v>=l&&!p||W&&v<=F&&p)&&(n.onComplete(n),n.completed=!W):M&&G?c===1/0?n._startTime+=n.duration:n._currentIteration>=c-1&&(n.paused=!0,!p&&!f&&(n.completed=!0,!t&&!(s&&(W||!s.began))&&(n.onComplete(n),n._resolve(n)))):n.completed=!1,U},At=(n,e,t,o,i)=>{const s=n._currentIteration;if(_n(n,e,t,o,i),n._hasChildren){const l=n,p=l.backwards,d=o?e:l._iterationTime,c=jt();let g=0,r=!0;if(!o&&l._currentIteration!==s){const a=l.iterationDuration;ee(l,u=>{if(!p)!u.completed&&!u.backwards&&u._currentTime<u.iterationDuration&&_n(u,a,t,1,ke.FORCE),u.began=!1,u.completed=!1;else{const f=u.duration,m=u._offset+u._delay,_=m+f;!t&&f<=F&&(!m||_===a)&&u.onComplete(u)}}),t||l.onLoop(l)}ee(l,a=>{const u=Q((d-a._offset)*a._speed,12),f=a._fps<l._fps?a.requestTick(c):i;g+=_n(a,u,t,o,f),!a.completed&&r&&(r=!1)},p),!t&&g&&l.onRender(l),r&&l._currentTime>=l.duration&&(l.paused=!0,l.completed||(l.completed=!0,t||(l.onComplete(l),l._resolve(l))))}},Ct={animation:null,update:Oe},si=n=>{let e=Ct.animation;return e||(e={duration:F,computeDeltaTime:Oe,_offset:0,_delay:0,_head:null,_tail:null},Ct.animation=e,Ct.update=()=>{n.forEach(t=>{for(let o in t){const i=t[o],s=i._head;if(s){const l=s._valueType,p=l===k.COMPLEX||l===k.COLOR?pe(s._fromNumbers):null;let d=s._fromNumber,c=i._tail;for(;c&&c!==s;){if(p)for(let g=0,r=c._numbers.length;g<r;g++)p[g]+=c._numbers[g];else d+=c._number;c=c._prevAdd}s._toNumber=d,s._toNumbers=p}}}),_n(e,1,1,0,ke.FORCE)}),e},ar=Ye?requestAnimationFrame:setImmediate,li=Ye?cancelAnimationFrame:clearImmediate;class ui extends ir{constructor(e){super(e),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=Ko,this.paused=!!(Ye&&Pt.hidden),this.reqId=null}update(){const e=this._currentTime=jt();if(this.requestTick(e)){this.computeDeltaTime(e);const t=this._speed,o=this._fps;let i=this._head;for(;i;){const s=i._next;i.paused?(Gt(this,i),this._hasChildren=!!this._tail,i._running=!1,i.completed&&!i._cancelled&&i.cancel()):At(i,(e-i._startTime)*i._speed*t,0,0,i._fps<o?i.requestTick(e):ke.AUTO),i=s}Ct.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=ar(sr)),this}pause(){return this.paused=!0,ci()}resume(){if(this.paused)return this.paused=!1,ee(this,e=>e.resetTime()),this.wake()}get speed(){return this._speed*(re.timeScale===1?1:Ot)}set speed(e){this._speed=e*re.timeScale,ee(this,t=>t.speed=t._speed)}get timeUnit(){return re.timeScale===1?"ms":"s"}set timeUnit(e){const o=e==="s",i=o?.001:1;if(re.timeScale!==i){re.timeScale=i,re.tickThreshold=200*i;const s=o?.001:Ot;this.defaults.duration*=s,this._speed*=s}}get precision(){return re.precision}set precision(e){re.precision=e}}const ue=(()=>{const n=new ui(jt());return Ye&&(zo.engine=n,Pt.addEventListener("visibilitychange",()=>{n.pauseOnDocumentHidden&&(Pt.hidden?n.pause():n.resume())})),n})(),sr=()=>{ue._head?(ue.reqId=ar(sr),ue.update()):ue.reqId=0},ci=()=>(li(ue.reqId),ue.reqId=0,ue),di=(n,e,t)=>{const o=n.style.transform;let i;if(o){const s=n[xn];let l;for(;l=Jr.exec(o);){const p=l[1],d=l[2].slice(1,-1);s[p]=d,p===e&&(i=d,t&&(t[e]=d))}}return o&&!B(i)?i:Dt(e,"scale")?"1":Dt(e,"rotate")||Dt(e,"skew")?"0deg":"0px"};function So(n){const e=Dn(n)?re.root.querySelectorAll(n):n;if(e instanceof NodeList||e instanceof HTMLCollection)return e}function fi(n){if(Xn(n))return[];if(Wt(n)){const t=n.flat(1/0),o=[];for(let i=0,s=t.length;i<s;i++){const l=t[i];if(!Xn(l)){const p=So(l);if(p)for(let d=0,c=p.length;d<c;d++){const g=p[d];if(!Xn(g)){let r=!1;for(let a=0,u=o.length;a<u;a++)if(o[a]===g){r=!0;break}r||o.push(g)}}else{let d=!1;for(let c=0,g=o.length;c<g;c++)if(o[c]===l){d=!0;break}d||o.push(l)}}}return o}if(!Ye)return[n];const e=So(n);return e?Array.from(e):[n]}function pi(n){const e=fi(n),t=e.length;if(t)for(let o=0;o<t;o++){const i=e[o];if(!i[To]){i[To]=!0;const s=er(i);(i.nodeType||s)&&(i[oo]=!0,i[Zo]=s,i[xn]={})}}return e}const mi=["opacity","rotate","overflow","color"],hi=(n,e)=>{if(mi.includes(e))return!1;if(n.getAttribute(e)||e in n){if(e==="scale"){const t=n.parentNode;return t&&t.tagName==="filter"}return!0}},_i=n=>{const e=Ur.exec(n)||Yr.exec(n),t=B(e[4])?1:+e[4];return[+e[1],+e[2],+e[3],t]},gi=n=>{const e=n.length,t=e===4||e===5;return[+("0x"+n[1]+n[t?1:2]),+("0x"+n[t?2:3]+n[t?2:4]),+("0x"+n[t?3:5]+n[t?3:6]),e===5||e===9?+(+("0x"+n[t?4:7]+n[t?4:8])/255).toFixed(3):1]},Un=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n),vi=n=>{const e=qr.exec(n)||jr.exec(n),t=+e[1]/360,o=+e[2]/100,i=+e[3]/100,s=B(e[4])?1:+e[4];let l,p,d;if(o===0)l=p=d=i;else{const c=i<.5?i*(1+o):i+o-i*o,g=2*i-c;l=Q(Un(g,c,t+1/3)*255,0),p=Q(Un(g,c,t)*255,0),d=Q(Un(g,c,t-1/3)*255,0)}return[l,p,d,s]},yi=n=>nr(n)?_i(n):tr(n)?gi(n):or(n)?vi(n):[0,0,0,1],me=(n,e)=>B(n)?e:n,et=(n,e,t,o,i)=>{if(An(n)){const s=()=>{const l=n(e,t,o);return isNaN(+l)?l||0:+l};return i&&(i.func=s),s()}else return n},lr=(n,e)=>n[oo]?n[Zo]&&hi(n,e)?q.ATTRIBUTE:ro.includes(e)||Qt.get(e)?q.TRANSFORM:Dt(e,"--")?q.CSS_VAR:e in n.style?q.CSS:e in n?q.OBJECT:q.ATTRIBUTE:q.OBJECT,xo=(n,e,t)=>{const o=n.style[e];o&&t&&(t[e]=o);const i=o||getComputedStyle(n[$r]||n).getPropertyValue(e);return i==="auto"?"0":i},Rt=(n,e,t,o)=>{const i=B(t)?lr(n,e):t;return i===q.OBJECT?n[e]||0:i===q.ATTRIBUTE?n.getAttribute(e):i===q.TRANSFORM?di(n,e,o):i===q.CSS_VAR?xo(n,e,o).trimStart():xo(n,e,o)},Do=(n,e,t)=>t==="-"?n-e:t==="+"?n+e:n*e,so=()=>({t:k.NUMBER,n:0,u:null,o:null,d:null,s:null}),Ve=(n,e)=>{if(e.t=k.NUMBER,e.n=0,e.u=null,e.o=null,e.d=null,e.s=null,!n)return e;const t=+n;if(isNaN(t)){let o=n;o[1]==="="&&(e.o=o[0],o=o.slice(2));const i=o.includes(" ")?!1:Wr.exec(o);if(i)return e.t=k.UNIT,e.n=+i[1],e.u=i[2],e;if(e.o)return e.n=+o,e;if(zr(o))return e.t=k.COLOR,e.d=yi(o),e;{const s=o.match(wo);return e.t=k.COMPLEX,e.d=s?s.map(Number):[],e.s=o.split(wo)||[],e}}else return e.n=t,e},Co=(n,e)=>(e.t=n._valueType,e.n=n._toNumber,e.u=n._unit,e.o=null,e.d=pe(n._toNumbers),e.s=pe(n._strings),e),dt=so(),En={_rep:new WeakMap,_add:new Map},lo=(n,e,t="_rep")=>{const o=En[t];let i=o.get(n);return i||(i={},o.set(n,i)),i[e]?i[e]:i[e]={_head:null,_tail:null}},bi=(n,e)=>n._isOverridden||n._absoluteStartTime>e._absoluteStartTime,gn=n=>{n._isOverlapped=1,n._isOverridden=1,n._changeDuration=F,n._currentTime=F},ur=(n,e)=>{const t=n._composition;if(t===Te.replace){const o=n._absoluteStartTime;St(e,n,bi,"_prevRep","_nextRep");const i=n._prevRep;if(i){const s=i.parent,l=i._absoluteStartTime+i._changeDuration;if(n.parent.id!==s.id&&s.iterationCount>1&&l+(s.duration-s.iterationDuration)>o){gn(i);let c=i._prevRep;for(;c&&c.parent.id===s.id;)gn(c),c=c._prevRep}const p=o-n._delay;if(l>p){const c=i._startTime,g=l-(c+i._updateDuration);i._changeDuration=p-g-c,i._currentTime=i._changeDuration,i._isOverlapped=1,i._changeDuration<F&&gn(i)}let d=!0;if(ee(s,c=>{c._isOverlapped||(d=!1)}),d){const c=s.parent;if(c){let g=!0;ee(c,r=>{r!==s&&ee(r,a=>{a._isOverlapped||(g=!1)})}),g&&c.cancel()}else s.cancel()}}}else if(t===Te.blend){const o=lo(n.target,n.property,"_add"),i=si(En._add);let s=o._head;s||(s={...n},s._composition=Te.replace,s._updateDuration=F,s._startTime=0,s._numbers=pe(n._fromNumbers),s._number=0,s._next=null,s._prev=null,St(o,s),St(i,s));const l=n._toNumber;if(n._fromNumber=s._fromNumber-l,n._toNumber=0,n._numbers=pe(n._fromNumbers),n._number=0,s._fromNumber=l,n._toNumbers){const p=pe(n._toNumbers);p&&p.forEach((d,c)=>{n._fromNumbers[c]=s._fromNumbers[c]-d,n._toNumbers[c]=0}),s._fromNumbers=p}St(o,n,null,"_prevAdd","_nextAdd")}return n},Ti=n=>{const e=n._composition;if(e!==Te.none){const t=n.target,o=n.property,l=En._rep.get(t)[o];if(Gt(l,n,"_prevRep","_nextRep"),e===Te.blend){const p=En._add,d=p.get(t);if(!d)return;const c=d[o],g=Ct.animation;Gt(c,n,"_prevAdd","_nextAdd");const r=c._head;if(r&&r===c._tail){Gt(c,r,"_prevAdd","_nextAdd"),Gt(g,r);let a=!0;for(let u in d)if(d[u]._head){a=!1;break}a&&p.delete(t)}}}return n},Io=n=>(n.paused=!0,n.began=!1,n.completed=!1,n),Qn=n=>(n._cancelled&&(n._hasChildren?ee(n,Qn):ee(n,e=>{e._composition!==Te.none&&ur(e,lo(e.target,e.property))}),n._cancelled=0),n);let wi=0;class Ai extends ir{constructor(e={},t=null,o=0){super(0);const{id:i,delay:s,duration:l,reversed:p,alternate:d,loop:c,loopDelay:g,autoplay:r,frameRate:a,playbackRate:u,onComplete:f,onLoop:m,onPause:_,onBegin:h,onBeforeUpdate:v,onUpdate:b}=e,S=t?0:ue._elapsedTime,C=t?t.defaults:re.defaults,M=An(s)||B(s)?C.delay:+s,G=An(l)||B(l)?1/0:+l,j=me(c,C.loop),E=me(g,C.loopDelay),ie=j===!0||j===1/0||j<0?1/0:j+1;let X=0;if(t)X=o;else{let U=jt();ue.paused&&(ue.requestTick(U),U=ue._elapsedTime),X=U-ue._startTime}this.id=B(i)?++wi:i,this.parent=t,this.duration=ao((G+E)*ie-E)||F,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=h||C.onBegin,this.onBeforeUpdate=v||C.onBeforeUpdate,this.onUpdate=b||C.onUpdate,this.onLoop=m||C.onLoop,this.onPause=_||C.onPause,this.onComplete=f||C.onComplete,this.iterationDuration=G,this.iterationCount=ie,this._autoplay=t?!1:me(r,C.autoplay),this._offset=X,this._delay=M,this._loopDelay=E,this._iterationTime=0,this._currentIteration=0,this._resolve=Oe,this._running=!1,this._reversed=+me(p,C.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=me(d,C.alternate),this._prev=null,this._next=null,this._elapsedTime=S,this._startTime=S,this._lastTime=S,this._fps=me(a,C.frameRate),this._speed=me(u,C.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(e){e?this.cancel():this.reset(1).play()}get currentTime(){return ce(Q(this._currentTime,re.precision),-this._delay,this.duration)}set currentTime(e){const t=this.paused;this.pause().seek(+e),t||this.resume()}get iterationCurrentTime(){return Q(this._iterationTime,re.precision)}set iterationCurrentTime(e){this.currentTime=this.iterationDuration*this._currentIteration+e}get progress(){return ce(Q(this._currentTime/this.duration,5),0,1)}set progress(e){this.currentTime=this.duration*e}get iterationProgress(){return ce(Q(this._iterationTime/this.iterationDuration,5),0,1)}set iterationProgress(e){const t=this.iterationDuration;this.currentTime=t*this._currentIteration+t*e}get currentIteration(){return this._currentIteration}set currentIteration(e){this.currentTime=this.iterationDuration*ce(+e,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(e){e?this.reverse():this.play()}get speed(){return super.speed}set speed(e){super.speed=e,this.resetTime()}reset(e=0){return Qn(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,At(this,0,1,e,ke.FORCE),Io(this),this._hasChildren&&ee(this,Io),this}init(e=0){this.fps=this._fps,this.speed=this._speed,!e&&this._hasChildren&&At(this,this.duration,1,e,ke.FORCE),this.reset(e);const t=this._autoplay;return t===!0?this.resume():t&&!B(t.linked)&&t.link(this),this}resetTime(){const e=1/(this._speed*ue._speed);return this._startTime=jt()-(this._currentTime+this._delay)*e,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=F&&!this._hasChildren?At(this,F,0,0,ke.FORCE):(this._running||(St(ue,this),ue._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,ue.wake()),this):this}restart(){return this.reset(0).resume()}seek(e,t=0,o=0){Qn(this),this.completed=!1;const i=this.paused;return this.paused=!0,At(this,e+this._delay,~~t,~~o,ke.AUTO),i?this:this.resume()}alternate(){const e=this._reversed,t=this.iterationCount,o=this.iterationDuration,i=t===1/0?rr(Jo/o):t;return this._reversed=+(this._alternate&&!(i%2)?e:!e),t===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(o*i-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?ee(this,e=>e.cancel(),!0):ee(this,Ti),this._cancelled=1,this.pause()}stretch(e){const t=this.duration,o=qt(e);if(t===o)return this;const i=e/t,s=e<=F;return this.duration=s?F:o,this.iterationDuration=s?F:qt(this.iterationDuration*i),this._offset*=i,this._delay*=i,this._loopDelay*=i,this}revert(){At(this,0,1,0,ke.AUTO);const e=this._autoplay;return e&&e.linked&&e.linked===this&&e.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(e=Oe){const t=this.then,o=()=>{this.then=null,e(this),this.then=t,this._resolve=Oe};return new Promise(i=>(this._resolve=()=>i(o()),this.completed&&this._resolve(),this))}}const kt=n=>n,cr=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Ei=(n,e,t)=>{let o=0,i=1,s,l,p=0;do l=o+(i-o)/2,s=cr(l,e,t)-n,s>0?i=l:o=l;while(oi(s)>1e-7&&++p<100);return l},Si=(n=.5,e=0,t=.5,o=1)=>n===e&&t===o?kt:i=>i===0||i===1?i:cr(Ei(i,n,t),e,o),xi=(n=10,e)=>{const t=e?ri:rr;return o=>t(ce(o,0,1)*n)*(1/n)},dr=(...n)=>{const e=n.length;if(!e)return kt;const t=e-1,o=n[0],i=n[t],s=[0],l=[an(o)];for(let p=1;p<t;p++){const d=n[p],c=Dn(d)?d.trim().split(" "):[d],g=c[0],r=c[1];s.push(B(r)?p/t:an(r)/100),l.push(an(g))}return l.push(an(i)),s.push(1),function(d){for(let c=1,g=s.length;c<g;c++){const r=s[c];if(d<=r){const a=s[c-1],u=l[c-1];return u+(l[c]-u)*(d-a)/(r-a)}}return l[l.length-1]}},Di=(n=10,e=1)=>{const t=[0],o=n-1;for(let i=1;i<o;i++){const s=t[i-1],l=i/o,p=(i+1)/o,d=l+(p-l)*Math.random(),c=l*(1-e)+d*e;t.push(ce(c,s,1))}return t.push(1),dr(...t)},Ci=io/2,Po=io*2,Bt=(n=1.68)=>e=>wt(e,+n),Oo={[mt]:Bt,Quad:Bt(2),Cubic:Bt(3),Quart:Bt(4),Quint:Bt(5),Sine:n=>1-ni(n*Ci),Circ:n=>1-ei(1-n*n),Expo:n=>n?wt(2,10*n-10):0,Bounce:n=>{let e,t=4;for(;n<((e=wt(2,--t))-1)/11;);return 1/wt(4,3-t)-7.5625*wt((e*3-2)/22-n,2)},Back:(n=1.70158)=>e=>(+n+1)*e*e*e-+n*e*e,Elastic:(n=1,e=.3)=>{const t=ce(+n,1,10),o=ce(+e,F,2),i=o/Po*ii(1/t),s=Po/o;return l=>l===0||l===1?l:-t*wt(2,-10*(1-l))*ti((1-l-i)*s)}},Kn={in:n=>e=>n(e),out:n=>e=>1-n(1-e),inOut:n=>e=>e<.5?n(e*2)/2:1-n(e*-2+2)/2,outIn:n=>e=>e<.5?(1-n(1-e*2))/2:(n(e*2-1)+1)/2},Ii=(n,e,t)=>{if(t[n])return t[n];if(n.indexOf("(")<=-1){const i=Kn[n]||n.includes("Back")||n.includes("Elastic")?e[n]():e[n];return i?t[n]=i:kt}else{const o=n.slice(0,-1).split("("),i=e[o[0]];return i?t[n]=i(...o[1].split(",")):kt}},Pi=(()=>{const n={linear:dr,irregular:Di,steps:xi,cubicBezier:Si};for(let e in Kn)for(let t in Oo){const o=Oo[t],i=Kn[e];n[e+t]=t===mt||t==="Back"||t==="Elastic"?(s,l)=>i(o(s,l)):i(o)}return n})(),Oi={linear:kt},ko=n=>An(n)?n:Dn(n)?Ii(n,Pi,Oi):kt,Mo={},ki=(n,e,t)=>{if(t===q.TRANSFORM){const o=Qt.get(n);return o||n}else if(t===q.CSS||t===q.ATTRIBUTE&&er(e)&&n in e.style){const o=Mo[n];if(o)return o;{const i=n&&Qr(n);return Mo[n]=i,i}}else return n},Yn={deg:1,rad:180/io,turn:360},No={},Mi=(n,e,t,o=!1)=>{const i=e.u,s=e.n;if(e.t===k.UNIT&&i===t)return e;const l=s+i+t,p=No[l];if(!B(p)&&!o)e.n=p;else{let d;if(i in Yn)d=s*Yn[i]/Yn[t];else{const g=n.cloneNode(),r=n.parentNode,a=r&&r!==Pt?r:Pt.body;a.appendChild(g);const u=g.style;u.width=100+i;const f=g.offsetWidth||100;u.width=100+t;const m=g.offsetWidth||100,_=f/m;a.removeChild(g),d=_*s}e.n=d,No[l]=d}return e.t,k.UNIT,e.u=t,e},fr=n=>{if(n._hasChildren)ee(n,fr,!0);else{const e=n;e.pause(),ee(e,t=>{const o=t.property,i=t.target;if(i[oo]){const s=i.style,l=e._inlineStyles[o];if(t._tweenType===q.TRANSFORM){const p=i[xn];if(B(l)||l===mt?delete p[o]:p[o]=l,t._renderTransforms)if(!Object.keys(p).length)s.removeProperty("transform");else{let d=mt;for(let c in p)d+=Qo[c]+p[c]+") ";s.transform=d}}else B(l)||l===mt?s.removeProperty(o):s[o]=l;e._tail===t&&e.targets.forEach(p=>{p.getAttribute&&p.getAttribute("style")===mt&&p.removeAttribute("style")})}})}return n},D=so(),I=so(),sn={func:null},ln=[null],bt=[null,null],un={to:null};let Ni=0,tt,$e;const Ri=(n,e)=>{const t={};if(Wt(n)){const o=[].concat(...n.map(i=>Object.keys(i))).filter(hn);for(let i=0,s=o.length;i<s;i++){const l=o[i],p=n.map(d=>{const c={};for(let g in d){const r=d[g];hn(g)?g===l&&(c.to=r):c[g]=r}return c});t[l]=p}}else{const o=me(e.duration,re.defaults.duration);Object.keys(n).map(s=>({o:parseFloat(s)/100,p:n[s]})).sort((s,l)=>s.o-l.o).forEach(s=>{const l=s.o,p=s.p;for(let d in p)if(hn(d)){let c=t[d];c||(c=t[d]=[]);const g=l*o;let r=c.length,a=c[r-1];const u={to:p[d]};let f=0;for(let m=0;m<r;m++)f+=c[m].duration;r===1&&(u.from=a.to),p.ease&&(u.ease=p.ease),u.duration=g-(r?f:0),c.push(u)}return s});for(let s in t){const l=t[s];let p;for(let d=0,c=l.length;d<c;d++){const g=l[d],r=g.ease;g.ease=p||void 0,p=r}l[0].duration||l.shift()}}return t};class Bi extends Ai{constructor(e,t,o,i,s=!1,l=0,p=0){super(t,o,i);const d=pi(e),c=d.length,g=t.keyframes,r=g?ai(Ri(g,t),t):t,{delay:a,duration:u,ease:f,playbackEase:m,modifier:_,composition:h,onRender:v}=r,b=o?o.defaults:re.defaults,S=me(m,b.playbackEase),C=S?ko(S):null,M=!B(f)&&!B(f.ease),G=M?f.ease:me(f,C?"linear":b.ease),j=M?f.duration:me(u,b.duration),E=me(a,b.delay),ie=_||b.modifier,X=B(h)&&c>=Ot?Te.none:B(h)?b.composition:h,U={},K=this._offset+(o?o._offset:0);let N=NaN,L=NaN,W=0,Se=0;for(let Y=0;Y<c;Y++){const T=d[Y],ne=l||Y,ae=p||c;let ze=NaN,at=NaN;for(let xe in r)if(hn(xe)){const he=lr(T,xe),De=ki(xe,T,he);let we=r[xe];const Mt=Wt(we);if(s&&!Mt&&(bt[0]=we,bt[1]=we,we=bt),Mt){const _e=we.length,Me=!$n(we[0]);_e===2&&Me?(un.to=we,ln[0]=un,tt=ln):_e>2&&Me?(tt=[],we.forEach((de,ge)=>{ge?ge===1?(bt[1]=de,tt.push(bt)):tt.push(de):bt[0]=de})):tt=we}else ln[0]=we,tt=ln;let Fe=null,Ce=null,qe=NaN,je=0,te=0;for(let _e=tt.length;te<_e;te++){const Me=tt[te];$n(Me)?$e=Me:(un.to=Me,$e=un),sn.func=null;const de=et($e.to,T,ne,ae,sn);let ge;$n(de)&&!B(de.to)?($e=de,ge=de.to):ge=de;const ht=et($e.from,T,ne,ae),Le=$e.ease,ve=!B(Le)&&!B(Le.ease),_t=ve?Le.ease:Le||G,z=ve?Le.duration:et(me($e.duration,_e>1?et(j,T,ne,ae)/_e:j),T,ne,ae),He=et(me($e.delay,te?0:E),T,ne,ae),Ge=et(me($e.composition,X),T,ne,ae),We=Kr(Ge)?Ge:Te[Ge],Kt=$e.modifier||ie,gt=!B(ht),st=!B(ge),zt=Wt(ge),pr=zt||gt&&st,Cn=Ce?je+He:He,In=K+Cn;!Se&&(gt||zt)&&(Se=1);let Ie=Ce;if(We!==Te.none){Fe||(Fe=lo(T,De));let R=Fe._head;for(;R&&!R._isOverridden&&R._absoluteStartTime<=In;)if(Ie=R,R=R._nextRep,R&&R._absoluteStartTime>=In)for(;R;)gn(R),R=R._nextRep}if(pr?(Ve(zt?et(ge[0],T,ne,ae):ht,D),Ve(zt?et(ge[1],T,ne,ae,sn):ge,I),D.t===k.NUMBER&&(Ie?Ie._valueType===k.UNIT&&(D.t=k.UNIT,D.u=Ie._unit):(Ve(Rt(T,De,he,U),dt),dt.t===k.UNIT&&(D.t=k.UNIT,D.u=dt.u)))):(st?Ve(ge,I):Ce?Co(Ce,I):Ve(o&&Ie&&Ie.parent.parent===o?Ie._value:Rt(T,De,he,U),I),gt?Ve(ht,D):Ce?Co(Ce,D):Ve(o&&Ie&&Ie.parent.parent===o?Ie._value:Rt(T,De,he,U),D)),D.o&&(D.n=Do(Ie?Ie._toNumber:Ve(Rt(T,De,he,U),dt).n,D.n,D.o)),I.o&&(I.n=Do(D.n,I.n,I.o)),D.t!==I.t){if(D.t===k.COMPLEX||I.t===k.COMPLEX){const R=D.t===k.COMPLEX?D:I,se=D.t===k.COMPLEX?I:D;se.t=k.COMPLEX,se.s=pe(R.s),se.d=R.d.map(()=>se.n)}else if(D.t===k.UNIT||I.t===k.UNIT){const R=D.t===k.UNIT?D:I,se=D.t===k.UNIT?I:D;se.t=k.UNIT,se.u=R.u}else if(D.t===k.COLOR||I.t===k.COLOR){const R=D.t===k.COLOR?D:I,se=D.t===k.COLOR?I:D;se.t=k.COLOR,se.s=R.s,se.d=[0,0,0,1]}}if(D.u!==I.u){let R=I.u?D:I;R=Mi(T,R,I.u?I.u:D.u,!1)}if(I.d&&D.d&&I.d.length!==D.d.length){const R=D.d.length>I.d.length?D:I,se=R===D?I:D;se.d=R.d.map(($i,uo)=>B(se.d[uo])?0:se.d[uo]),se.s=pe(R.s)}const Pn=Q(+z||F,12),en={parent:this,id:Ni++,property:De,target:T,_value:null,_func:sn.func,_ease:ko(_t),_fromNumbers:pe(D.d),_toNumbers:pe(I.d),_strings:pe(I.s),_fromNumber:D.n,_toNumber:I.n,_numbers:pe(D.d),_number:D.n,_unit:I.u,_modifier:Kt,_currentTime:0,_startTime:Cn,_delay:+He,_updateDuration:Pn,_changeDuration:Pn,_absoluteStartTime:In,_tweenType:he,_valueType:I.t,_composition:We,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};We!==Te.none&&ur(en,Fe),isNaN(qe)&&(qe=en._startTime),je=Q(Cn+Pn,12),Ce=en,W++,St(this,en)}(isNaN(L)||qe<L)&&(L=qe),(isNaN(N)||je>N)&&(N=je),he===q.TRANSFORM&&(ze=W-te,at=W)}if(!isNaN(ze)){let xe=0;ee(this,he=>{xe>=ze&&xe<at&&(he._renderTransforms=1,he._composition===Te.blend&&ee(Ct.animation,De=>{De.id===he.id&&(De._renderTransforms=1)})),xe++})}}c||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),L?(ee(this,Y=>{Y._startTime-Y._delay||(Y._delay-=L),Y._startTime-=L}),N-=L):L=0,N||(N=F,this.iterationCount=0),this.targets=d,this.duration=N===F?F:ao((N+this._loopDelay)*this.iterationCount-this._loopDelay)||F,this.onRender=v||b.onRender,this._ease=C,this._delay=L,this.iterationDuration=N,this._inlineStyles=U,!this._autoplay&&Se&&this.onRender(this)}stretch(e){const t=this.duration;if(t===qt(e))return this;const o=e/t;return ee(this,i=>{i._updateDuration=qt(i._updateDuration*o),i._changeDuration=qt(i._changeDuration*o),i._currentTime*=o,i._startTime*=o,i._absoluteStartTime*=o}),super.stretch(e)}refresh(){return ee(this,e=>{const t=Rt(e.target,e.property,e._tweenType);Ve(t,dt),e._fromNumbers=pe(dt.d),e._fromNumber=dt.n,e._func&&(Ve(e._func(),I),e._toNumbers=pe(I.d),e._strings=pe(I.s),e._toNumber=I.n)}),this}revert(){return super.revert(),fr(this)}then(e){return super.then(e)}}const Re=(n,e)=>new Bi(n,e,null,0,!1).init(),Fi=["x","y","z"];[...Fi,...ro.filter(n=>["X","Y","Z"].some(e=>n.endsWith(e)))];Ye&&(B(CSS)||Object.hasOwnProperty.call(CSS,"registerProperty"));class Li{constructor(){this.animationsEnabled=!0,this.currentAnimations=[]}coinMove(e,t,o,i=500){return this.animationsEnabled?new Promise(s=>{const l=Re({targets:e,translateX:t,translateY:o,duration:i,ease:"out(4)",complete:s});this.currentAnimations.push(l)}):Promise.resolve()}coinBounce(e){return this.animationsEnabled?new Promise(t=>{const o=Re({targets:e,scale:[1,1.2,1],duration:300,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(o)}):Promise.resolve()}correctAnswer(e){return this.animationsEnabled?new Promise(t=>{this.createConfetti();const o=Re({targets:e,scale:[1,1.1,1],backgroundColor:["#ffffff","#95E1D3","#ffffff"],duration:1e3,ease:"inOut(2)",complete:t});this.currentAnimations.push(o)}):Promise.resolve()}wrongAnswer(e){return this.animationsEnabled?new Promise(t=>{const o=Re({targets:e,translateX:[-5,5,-5,5,0],backgroundColor:["#ffffff","#F38181","#ffffff"],duration:500,ease:"inOut(2)",complete:t});this.currentAnimations.push(o)}):Promise.resolve()}tenConversion(e){return this.animationsEnabled?new Promise(t=>{const s=anime({targets:e,translateX:0,translateY:0,scale:[1,.5],rotate:360,duration:800,ease:"inOut(2)",complete:()=>{e.forEach(l=>{l.classList.remove("coin-1"),l.classList.add("coin-10"),l.textContent="10",l.dataset.value="10"});for(let l=1;l<e.length;l++)e[l].remove();Re({targets:e[0],scale:[.5,1.2,1],rotate:[360,0],duration:500,ease:"outElastic(1, .6)",complete:t})}});this.currentAnimations.push(s)}):Promise.resolve()}customerJump(e){return this.animationsEnabled?new Promise(t=>{const o=Re({targets:e,translateY:[-20,0],duration:400,ease:"out(4)",loop:3,complete:t});this.currentAnimations.push(o)}):Promise.resolve()}levelUp(e){return this.animationsEnabled?new Promise(t=>{const o=Re({targets:e,scale:[1,1.5,1],rotate:[0,360],duration:1500,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(o)}):Promise.resolve()}fadeIn(e,t=500){return this.animationsEnabled?new Promise(o=>{const i=Re({targets:e,opacity:[0,1],translateY:[20,0],duration:t,ease:"out(2)",complete:o});this.currentAnimations.push(i)}):(e.style.opacity="1",Promise.resolve())}fadeOut(e,t=500){return this.animationsEnabled?new Promise(o=>{const i=Re({targets:e,opacity:[1,0],translateY:[0,-20],duration:t,ease:"in(2)",complete:o});this.currentAnimations.push(i)}):(e.style.opacity="0",Promise.resolve())}createConfetti(){const e=document.createElement("div");e.className="confetti-container",document.body.appendChild(e);const t=["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3","#F38181"];for(let o=0;o<30;o++){const i=document.createElement("div");i.style.position="absolute",i.style.width="10px",i.style.height="10px",i.style.backgroundColor=t[Math.floor(Math.random()*t.length)],i.style.left=Math.random()*window.innerWidth+"px",i.style.top="-10px",i.style.borderRadius="50%",e.appendChild(i),Re({targets:i,translateY:window.innerHeight+100,translateX:(Math.random()-.5)*200,rotate:Math.random()*720,duration:Math.random()*2e3+1e3,ease:"in(2)",complete:()=>{i.remove()}})}setTimeout(()=>{e.parentNode&&e.remove()},3e3)}createSparkles(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1000",e.style.position="relative",e.appendChild(t);for(let o=0;o<8;o++){const i=document.createElement("div");i.textContent="✨",i.style.position="absolute",i.style.fontSize="20px",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%",i.style.opacity="0",t.appendChild(i),Re({targets:i,opacity:[0,1,0],scale:[.5,1.5,.5],rotate:Math.random()*360,duration:1e3,delay:o*100,ease:"inOut(2)",complete:()=>{i.remove()}})}setTimeout(()=>{t.parentNode&&t.remove()},1500)}stopAllAnimations(){this.currentAnimations.forEach(e=>{e.pause&&e.pause()}),this.currentAnimations=[]}enableAnimations(){this.animationsEnabled=!0}disableAnimations(){this.animationsEnabled=!1}toggleAnimations(){return this.animationsEnabled=!this.animationsEnabled,this.animationsEnabled}}const nt=new Li;class Hi{constructor(){this.storageKey="coin-park-game-data",this.defaultData={currentLevel:1,currentProblemIndex:0,completedProblems:[],totalCoins:50,achievements:[],statistics:{correctAnswers:0,totalAttempts:0,totalPlayTime:0,averageTime:0,bestStreaks:0,currentStreak:0},settings:{soundEnabled:!0,animationsEnabled:!0,volume:.7},lastPlayDate:null}}loadGameData(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);return{...this.defaultData,...t}}}catch(e){console.warn("Failed to load game data:",e)}return{...this.defaultData}}saveGameData(e){try{const t={...e,lastPlayDate:new Date().toISOString()};return localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(t){return console.error("Failed to save game data:",t),!1}}updateProgress(e,t,o,i){const s=this.loadGameData();return s.statistics.totalAttempts+=o,s.statistics.totalPlayTime+=i,t?(s.statistics.correctAnswers++,s.statistics.currentStreak++,s.statistics.bestStreaks=Math.max(s.statistics.bestStreaks,s.statistics.currentStreak),s.completedProblems.includes(e)||s.completedProblems.push(e),s.totalCoins+=Math.max(1,4-o)):s.statistics.currentStreak=0,s.statistics.correctAnswers>0&&(s.statistics.averageTime=s.statistics.totalPlayTime/s.statistics.correctAnswers),t&&(s.currentProblemIndex=e+1),this.saveGameData(s),s}updateSettings(e){const t=this.loadGameData();return t.settings={...t.settings,...e},this.saveGameData(t),t.settings}addAchievement(e,t,o){const i=this.loadGameData();return i.achievements.find(s=>s.id===e)?!1:(i.achievements.push({id:e,title:t,description:o,unlockedAt:new Date().toISOString()}),this.saveGameData(i),!0)}checkAchievements(e){const t=[];return[{id:"first_correct",title:"はじめのいっぽ",description:"はじめてせいかいしました！",condition:()=>e.statistics.correctAnswers>=1},{id:"five_correct",title:"がんばりや",description:"5もんせいかいしました！",condition:()=>e.statistics.correctAnswers>=5},{id:"perfect_streak",title:"パーフェクト",description:"3もんれんぞくせいかい！",condition:()=>e.statistics.currentStreak>=3},{id:"coin_collector",title:"コインコレクター",description:"100まいコインをあつめました！",condition:()=>e.totalCoins>=100},{id:"speed_master",title:"はやわざマスター",description:"へいきん10びょう以内でせいかい！",condition:()=>e.statistics.averageTime<=1e4}].forEach(i=>{i.condition()&&!e.achievements.find(s=>s.id===i.id)&&this.addAchievement(i.id,i.title,i.description)&&t.push(i)}),t}resetGameData(){try{return localStorage.removeItem(this.storageKey),!0}catch(e){return console.error("Failed to reset game data:",e),!1}}exportGameData(){const t={...this.loadGameData(),exportedAt:new Date().toISOString(),version:"1.0.0"};return JSON.stringify(t,null,2)}importGameData(e){try{const t=JSON.parse(e);if(!t.statistics||!t.settings)throw new Error("Invalid game data format");const o={...this.defaultData,...t};return this.saveGameData(o),!0}catch(t){return console.error("Failed to import game data:",t),!1}}getPlayStats(){const e=this.loadGameData(),t=e.statistics.totalAttempts>0?(e.statistics.correctAnswers/e.statistics.totalAttempts*100).toFixed(1):0;return{totalProblems:e.completedProblems.length,correctAnswers:e.statistics.correctAnswers,totalAttempts:e.statistics.totalAttempts,accuracyRate:t+"%",totalPlayTime:this.formatTime(e.statistics.totalPlayTime),averageTime:this.formatTime(e.statistics.averageTime),bestStreak:e.statistics.bestStreaks,currentStreak:e.statistics.currentStreak,totalCoins:e.totalCoins,achievements:e.achievements.length}}formatTime(e){const t=Math.floor(e/1e3),o=Math.floor(t/60),i=t%60;return o>0?`${o}分${i}秒`:`${i}秒`}}const ft=new Hi;class Gi{constructor(){this.calculator=new Hr,this.currentProblem=null,this.registerAmount=0,this.wrongAttempts=0,this.maxAttempts=3,this.problemStartTime=null,this.allProblems=[{items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}],shopType:"くだものやさん"},{items:[{name:"みかん",price:6,emoji:"🍊"},{name:"ぶどう",price:8,emoji:"🍇"}],shopType:"くだものやさん"},{items:[{name:"いちご",price:9,emoji:"🍓"},{name:"もも",price:4,emoji:"🍑"}],shopType:"くだものやさん"},{items:[{name:"にんじん",price:5,emoji:"🥕"},{name:"たまねぎ",price:7,emoji:"🧅"}],shopType:"やおやさん"},{items:[{name:"トマト",price:8,emoji:"🍅"},{name:"きゅうり",price:6,emoji:"🥒"}],shopType:"やおやさん"},{items:[{name:"レタス",price:9,emoji:"🥬"},{name:"だいこん",price:3,emoji:"🌿"}],shopType:"やおやさん"},{items:[{name:"さけ",price:8,emoji:"🐟"},{name:"まぐろ",price:9,emoji:"🐠"}],shopType:"さかなやさん"},{items:[{name:"えび",price:7,emoji:"🦐"},{name:"いか",price:6,emoji:"🦑"}],shopType:"さかなやさん"},{items:[{name:"たこ",price:5,emoji:"🐙"},{name:"かに",price:8,emoji:"🦀"}],shopType:"さかなやさん"},{items:[{name:"チョコ",price:6,emoji:"🍫"},{name:"アメ",price:7,emoji:"🍬"}],shopType:"おかしやさん"},{items:[{name:"ケーキ",price:9,emoji:"🍰"},{name:"クッキー",price:4,emoji:"🍪"}],shopType:"おかしやさん"},{items:[{name:"ドーナツ",price:8,emoji:"🍩"},{name:"アイス",price:5,emoji:"🍦"}],shopType:"おかしやさん"},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ノート",price:7,emoji:"📓"},{name:"ペン",price:9,emoji:"🖊️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"クレヨン",price:5,emoji:"🖍️"},{name:"はさみ",price:8,emoji:"✂️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"つみき",price:4,emoji:"🧱"}],shopType:"おもちゃやさん"},{items:[{name:"ぬいぐるみ",price:8,emoji:"🧸"},{name:"パズル",price:6,emoji:"🧩"}],shopType:"おもちゃやさん"},{items:[{name:"くるま",price:7,emoji:"🚗"},{name:"でんしゃ",price:5,emoji:"🚆"}],shopType:"おもちゃやさん"}],this.totalProblems=10,this.problems=this.generateRandomProblems(),this.gameData=ft.loadGameData(),this.currentProblemIndex=this.gameData.currentProblemIndex}start(){this.initElements(),this.setupDragAndDrop(),this.setupEventListeners(),this.loadSettings(),this.updateUI(),this.loadProblem()}initElements(){this.walletElement=document.getElementById("wallet"),this.registerElement=document.getElementById("register-coins"),this.registerAmountElement=document.getElementById("register-amount"),this.checkAnswerBtn=document.getElementById("check-answer"),this.feedbackElement=document.getElementById("feedback"),this.feedbackMessageElement=document.getElementById("feedback-message"),this.nextProblemBtn=document.getElementById("next-problem"),this.customerMessageElement=document.getElementById("customer-message"),this.totalAmountElement=document.getElementById("total-amount"),this.totalHintElement=document.getElementById("total-hint"),this.hintButtonElement=document.getElementById("hint-button"),this.shopTitleElement=document.querySelector(".shop-title"),this.shopItemsElement=document.getElementById("shop-items"),this.totalCoinsElement=document.getElementById("total-coins"),this.currentProblemElement=document.getElementById("current-problem"),this.totalProblemsElement=document.getElementById("total-problems")}setupDragAndDrop(){this.tenCoinsSortable=new w(document.getElementById("ten-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Ze.play("coin-pickup"),nt.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.oneCoinsSortable=new w(document.getElementById("one-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Ze.play("coin-pickup"),nt.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.registerSortable=new w(this.registerElement,{group:{name:"coins",pull:!0,put:!0},animation:150,onAdd:e=>{Ze.play("coin-drop"),this.updateRegisterAmount(),nt.coinBounce(e.item)},onRemove:e=>{this.updateRegisterAmount()}})}setupEventListeners(){this.checkAnswerBtn.addEventListener("click",()=>{this.checkAnswer()}),this.nextProblemBtn.addEventListener("click",()=>{this.nextProblem()}),this.hintButtonElement.addEventListener("click",()=>{this.showHint()}),document.getElementById("settings-btn").addEventListener("click",()=>{this.showSettings()}),document.getElementById("help-btn").addEventListener("click",()=>{this.showHelp()})}generateRandomProblems(){return[...this.allProblems].sort(()=>Math.random()-.5).slice(0,this.totalProblems)}loadProblem(){if(this.currentProblemIndex>=this.totalProblems){this.showGameComplete();return}this.currentProblem=this.problems[this.currentProblemIndex],this.wrongAttempts=0,this.registerAmount=0,this.problemStartTime=Date.now(),this.registerElement.innerHTML="",this.updateRegisterAmount(),this.updateShopDisplay(),this.updateCustomerMessage();const e=this.currentProblem.items.reduce((t,o)=>t+o.price,0);this.totalAmountElement.textContent=e,this.totalHintElement.style.display="none",this.hintButtonElement.style.display="block",this.initializeCoins(e),this.updateUI()}updateShopDisplay(){this.shopTitleElement.textContent=this.currentProblem.shopType,this.shopItemsElement.innerHTML="",this.currentProblem.items.forEach(e=>{const t=document.createElement("div");t.className="shop-item",t.innerHTML=`
        <div class="item-image">${e.emoji}</div>
        <div class="item-name">${e.name}</div>
        <div class="item-price">${e.price}円</div>
      `,this.shopItemsElement.appendChild(t)})}updateCustomerMessage(){const e=this.currentProblem.items.map(t=>t.name).join("と");this.customerMessageElement.textContent=`${e}ください`}initializeCoins(e){document.getElementById("ten-coins").innerHTML="",document.getElementById("one-coins").innerHTML="";const t=Math.max(2,Math.ceil(e/10)+1),o=Math.max(10,e%10+5);for(let i=0;i<t;i++){const s=this.createCoin(10);document.getElementById("ten-coins").appendChild(s)}for(let i=0;i<o;i++){const s=this.createCoin(1);document.getElementById("one-coins").appendChild(s)}}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}updateRegisterAmount(){const e=this.registerElement.querySelectorAll(".coin");this.registerAmount=Array.from(e).reduce((t,o)=>t+parseInt(o.dataset.value),0),this.registerAmountElement.textContent=`${this.registerAmount}円`}checkAnswer(){const e=this.currentProblem.items.reduce((t,o)=>t+o.price,0);this.registerAmount===e?this.showCorrectFeedback():(this.wrongAttempts++,this.wrongAttempts>=this.maxAttempts?this.showCorrectAnswerWithExplanation(e):this.showIncorrectFeedback())}showCorrectFeedback(){Ze.play("success"),nt.correctAnswer(this.registerElement);const e=Date.now()-this.problemStartTime,t=this.wrongAttempts+1;this.gameData=ft.updateProgress(this.currentProblemIndex,!0,t,e);const o=ft.checkAchievements(this.gameData);let i="";o.length>0&&(i='<div class="achievement-notification">',o.forEach(p=>{i+=`<p>🏆 ${p.title}: ${p.description}</p>`}),i+="</div>");const s=Math.max(1,4-t);this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🎉 せいかい！</h2>
        <p>よくできました！</p>
        <p>💰 ${s}まいコインをゲット！</p>
        ${i}
      </div>
    `,this.showFeedback(),this.updateUI();const l=document.querySelector(".customer");nt.customerJump(l),nt.createSparkles(l)}showIncorrectFeedback(){Ze.play("wrong"),nt.wrongAnswer(this.registerElement);const e=this.maxAttempts-this.wrongAttempts;let t=`
      <div class="error-feedback">
        <h2>❌ ちがいます</h2>
        <p>もう一度かんがえてみましょう</p>
    `;e===1&&(t+="<p>あと1回だけチャンスがあります</p>"),t+="</div>",this.feedbackMessageElement.innerHTML=t,this.showFeedback()}showCorrectAnswerWithExplanation(e){Ze.play("wrong");const t=this.calculator.visualizeCarryOver(this.currentProblem.items[0].price,this.currentProblem.items[1].price);let o='<div class="calculation-steps">';t.forEach(i=>{o+=`<div class="calculation-step">${i.message||i.action}</div>`}),o+="</div>",this.feedbackMessageElement.innerHTML=`
      <div class="error-feedback">
        <h2>📚 せいかいは ${e}円 です</h2>
        <p>けいさんのしかた：</p>
        ${o}
      </div>
    `,this.showFeedback()}showFeedback(){this.feedbackElement.style.display="flex",this.feedbackElement.style.opacity="1"}hideFeedback(){this.feedbackElement.style.display!=="none"&&(this.feedbackElement.style.opacity="0",setTimeout(()=>{this.feedbackElement.style.display="none",this.feedbackElement.style.opacity="1"},300))}nextProblem(){this.hideFeedback(),this.currentProblemIndex++,setTimeout(()=>{console.log(`Loading problem ${this.currentProblemIndex+1}/${this.totalProblems}`),this.loadProblem()},100)}showGameComplete(){const e=ft.getPlayStats();this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🏆 ゲームクリア！</h2>
        <p>10もんだいすべてクリアしました！</p>
        <p>せいかいりつ: ${e.accuracyRate}</p>
        <p>おつかれさまでした！</p>
      </div>
    `,this.showFeedback(),this.nextProblemBtn.textContent="もう一度あそぶ";const t=this.nextProblemBtn.cloneNode(!0);this.nextProblemBtn.parentNode.replaceChild(t,this.nextProblemBtn),this.nextProblemBtn=t,this.nextProblemBtn.addEventListener("click",()=>{this.currentProblemIndex=0,this.problems=this.generateRandomProblems(),this.hideFeedback(),setTimeout(()=>{console.log("Restarting game with new problems"),this.loadProblem(),this.nextProblemBtn.textContent="つぎのもんだい"},100)})}loadSettings(){Ze.enableSound=this.gameData.settings.soundEnabled,Ze.setVolume(this.gameData.settings.volume),nt.animationsEnabled=this.gameData.settings.animationsEnabled}updateUI(){this.totalCoinsElement.textContent=this.gameData.totalCoins,this.currentProblemElement.textContent=this.currentProblemIndex+1,this.totalProblemsElement.textContent=this.totalProblems}showHint(){Ze.play("ten-conversion"),this.totalHintElement.style.display="block",this.hintButtonElement.style.display="none",this.totalHintElement.classList.add("fade-in"),setTimeout(()=>{this.totalHintElement.classList.remove("fade-in")},500)}showSettings(){const e=ft.getPlayStats(),t=`
      <div class="modal-content">
        <div class="modal-header">
          <h3>設定</h3>
          <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">×</button>
        </div>
        <div class="modal-body">
          <div class="setting-item">
            <label>
              <input type="checkbox" id="sound-toggle" ${this.gameData.settings.soundEnabled?"checked":""}>
              音声をONにする
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="animation-toggle" ${this.gameData.settings.animationsEnabled?"checked":""}>
              アニメーションをONにする
            </label>
          </div>
          
          <h4>ゲームとうけい</h4>
          <div class="stats">
            <p>せいかいすう: ${e.correctAnswers}</p>
            <p>せいかいりつ: ${e.accuracyRate}</p>
            <p>さいこうれんぞく: ${e.bestStreak}</p>
            <p>コインすう: ${e.totalCoins}</p>
            <p>じっせき: ${e.achievements}こ</p>
          </div>
          
          <div class="setting-buttons">
            <button onclick="this.closest('.modal-overlay').remove()">とじる</button>
            <button onclick="if(confirm('ほんとうにリセットしますか？')) { StorageManager.resetGameData(); location.reload(); }">データリセット</button>
          </div>
        </div>
      </div>
    `,o=document.createElement("div");o.className="modal-overlay",o.innerHTML=t,document.body.appendChild(o),o.querySelector("#sound-toggle").addEventListener("change",i=>{this.gameData.settings.soundEnabled=i.target.checked,ft.updateSettings(this.gameData.settings),this.loadSettings()}),o.querySelector("#animation-toggle").addEventListener("change",i=>{this.gameData.settings.animationsEnabled=i.target.checked,ft.updateSettings(this.gameData.settings),this.loadSettings()}),o.addEventListener("click",i=>{i.target===o&&o.remove()})}showHelp(){const e=`
      <div class="modal-content">
        <div class="modal-header">
          <h3>あそびかた</h3>
          <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">×</button>
        </div>
        <div class="modal-body">
          <div class="help-content">
            <p>1. おきゃくさんがほしいものをいいます</p>
            <p>2. おねだんをけいさんします</p>
            <p>3. おさいふからコインをレジにうつします</p>
            <p>4. 「おしはらい」ボタンをおします</p>
            
            <h4>コインについて</h4>
            <p>🪙 10円玉：きんいろのコイン</p>
            <p>🪙 1円玉：ぎんいろのコイン</p>
            
            <h4>けいさんのコツ</h4>
            <p>10になるくみあわせをさがしてみよう！</p>
            <p>たとえば 7 + 5 = 12 のときは</p>
            <p>7 + 3 = 10、あと 2 をたして 12！</p>
            
            <div class="setting-buttons">
              <button onclick="this.closest('.modal-overlay').remove()">とじる</button>
            </div>
          </div>
        </div>
      </div>
    `,t=document.createElement("div");t.className="modal-overlay",t.innerHTML=e,document.body.appendChild(t),t.addEventListener("click",o=>{o.target===t&&t.remove()})}}class Vi{constructor(){this.gameEngine=new Gi,this.init()}init(){document.addEventListener("DOMContentLoaded",()=>{this.gameEngine.start()})}}new Vi;
