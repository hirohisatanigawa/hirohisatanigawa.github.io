(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function cr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cr(Object(t),!0).forEach(function(r){ho(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cr(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cn(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cn=function(e){return typeof e}:cn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(n)}function ho(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qe(){return Qe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qe.apply(this,arguments)}function mo(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function _o(n,e){if(n==null)return{};var t=mo(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}var go="1.15.6";function Je(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Ke=Je(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zt=Je(/Edge/i),dr=Je(/firefox/i),Vt=Je(/safari/i)&&!Je(/chrome/i)&&!Je(/android/i),zn=Je(/iP(ad|od|hone)/i),Nr=Je(/chrome/i)&&Je(/android/i),Rr={capture:!1,passive:!1};function O(n,e,t){n.addEventListener(e,t,!Ke&&Rr)}function P(n,e,t){n.removeEventListener(e,t,!Ke&&Rr)}function vn(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Br(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Be(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&vn(n,e):vn(n,e))||r&&n===t)return n;if(n===t)break}while(n=Br(n))}return null}var fr=/\s+/g;function Ae(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(fr," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(fr," ")}}function A(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function xt(n,e){var t="";if(typeof n=="string")t=n;else do{var r=A(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Fr(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function Xe(){var n=document.scrollingElement;return n||document.documentElement}function J(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,l,p,d,c,g,o;if(n!==window&&n.parentNode&&n!==Xe()?(s=n.getBoundingClientRect(),l=s.top,p=s.left,d=s.bottom,c=s.right,g=s.height,o=s.width):(l=0,p=0,d=window.innerHeight,c=window.innerWidth,g=window.innerHeight,o=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Ke))do if(i&&i.getBoundingClientRect&&(A(i,"transform")!=="none"||t&&A(i,"position")!=="static")){var a=i.getBoundingClientRect();l-=a.top+parseInt(A(i,"border-top-width")),p-=a.left+parseInt(A(i,"border-left-width")),d=l+s.height,c=p+s.width;break}while(i=i.parentNode);if(r&&n!==window){var u=xt(i||n),f=u&&u.a,h=u&&u.d;u&&(l/=h,p/=f,o/=f,g/=h,d=l+g,c=p+o)}return{top:l,left:p,bottom:d,right:c,width:o,height:g}}}function pr(n,e,t){for(var r=it(n,!0),i=J(n)[e];r;){var s=J(r)[t],l=void 0;if(l=i>=s,!l)return r;if(r===Xe())break;r=it(r,!1)}return!1}function It(n,e,t,r){for(var i=0,s=0,l=n.children;s<l.length;){if(l[s].style.display!=="none"&&l[s]!==w.ghost&&(r||l[s]!==w.dragged)&&Be(l[s],t.draggable,n,!1)){if(i===e)return l[s];i++}s++}return null}function er(n,e){for(var t=n.lastElementChild;t&&(t===w.ghost||A(t,"display")==="none"||e&&!vn(t,e));)t=t.previousElementSibling;return t||null}function Pe(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==w.clone&&(!e||vn(n,e))&&t++;return t}function hr(n){var e=0,t=0,r=Xe();if(n)do{var i=xt(n),s=i.a,l=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*l}while(n!==r&&(n=n.parentNode));return[e,t]}function vo(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function it(n,e){if(!n||!n.getBoundingClientRect)return Xe();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=A(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Xe();if(r||e)return t;r=!0}}while(t=t.parentNode);return Xe()}function yo(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function On(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var $t;function Lr(n,e){return function(){if(!$t){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),$t=setTimeout(function(){$t=void 0},e)}}}function bo(){clearTimeout($t),$t=void 0}function Hr(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Gr(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function Vr(n,e,t){var r={};return Array.from(n.children).forEach(function(i){var s,l,p,d;if(!(!Be(i,e.draggable,n,!1)||i.animated||i===t)){var c=J(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((l=r.top)!==null&&l!==void 0?l:1/0,c.top),r.right=Math.max((p=r.right)!==null&&p!==void 0?p:-1/0,c.right),r.bottom=Math.max((d=r.bottom)!==null&&d!==void 0?d:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var be="Sortable"+new Date().getTime();function To(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(A(i,"display")==="none"||i===w.ghost)){n.push({target:i,rect:J(i)});var s=Ue({},n[n.length-1].rect);if(i.thisAnimationDuration){var l=xt(i,!0);l&&(s.top-=l.f,s.left-=l.e)}i.fromRect=s}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(vo(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,l=0;n.forEach(function(p){var d=0,c=p.target,g=c.fromRect,o=J(c),a=c.prevFromRect,u=c.prevToRect,f=p.rect,h=xt(c,!0);h&&(o.top-=h.f,o.left-=h.e),c.toRect=o,c.thisAnimationDuration&&On(a,o)&&!On(g,o)&&(f.top-o.top)/(f.left-o.left)===(g.top-o.top)/(g.left-o.left)&&(d=Ao(f,a,u,i.options)),On(o,g)||(c.prevFromRect=g,c.prevToRect=o,d||(d=i.options.animation),i.animate(c,f,o,d)),d&&(s=!0,l=Math.max(l,d),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},d),c.thisAnimationDuration=d)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},l):typeof r=="function"&&r(),n=[]},animate:function(r,i,s,l){if(l){A(r,"transition",""),A(r,"transform","");var p=xt(this.el),d=p&&p.a,c=p&&p.d,g=(i.left-s.left)/(d||1),o=(i.top-s.top)/(c||1);r.animatingX=!!g,r.animatingY=!!o,A(r,"transform","translate3d("+g+"px,"+o+"px,0)"),this.forRepaintDummy=wo(r),A(r,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),A(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){A(r,"transition",""),A(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},l)}}}}function wo(n){return n.offsetWidth}function Ao(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var vt=[],kn={initializeByDefault:!0},Jt={mount:function(e){for(var t in kn)kn.hasOwnProperty(t)&&!(t in e)&&(e[t]=kn[t]);vt.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),vt.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";vt.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][s]&&t[l.pluginName][s](Ue({sortable:t},r)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](Ue({sortable:t},r)))})},initializePlugins:function(e,t,r,i){vt.forEach(function(p){var d=p.pluginName;if(!(!e.options[d]&&!p.initializeByDefault)){var c=new p(e,t,e.options);c.sortable=e,c.options=e.options,e[d]=c,Qe(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var l=this.modifyOption(e,s,e.options[s]);typeof l<"u"&&(e.options[s]=l)}},getEventProperties:function(e,t){var r={};return vt.forEach(function(i){typeof i.eventProperties=="function"&&Qe(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return vt.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],r))}),i}};function Eo(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,s=n.cloneEl,l=n.toEl,p=n.fromEl,d=n.oldIndex,c=n.newIndex,g=n.oldDraggableIndex,o=n.newDraggableIndex,a=n.originalEvent,u=n.putSortable,f=n.extraEventProperties;if(e=e||t&&t[be],!!e){var h,_=e.options,m="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ke&&!Zt?h=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent(r,!0,!0)),h.to=l||t,h.from=p||t,h.item=i||t,h.clone=s,h.oldIndex=d,h.newIndex=c,h.oldDraggableIndex=g,h.newDraggableIndex=o,h.originalEvent=a,h.pullMode=u?u.lastPutMode:void 0;var v=Ue(Ue({},f),Jt.getEventProperties(r,e));for(var b in v)h[b]=v[b];t&&t.dispatchEvent(h),_[m]&&_[m].call(e,h)}}var So=["evt"],ye=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=_o(r,So);Jt.pluginEvent.bind(w)(e,t,Ue({dragEl:y,parentEl:$,ghostEl:x,rootEl:H,nextEl:pt,lastDownEl:dn,cloneEl:V,cloneHidden:ot,dragStarted:Ft,putSortable:re,activeSortable:w.active,originalEvent:i,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:rt,hideGhostForTarget:Yr,unhideGhostForTarget:jr,cloneNowHidden:function(){ot=!0},cloneNowShown:function(){ot=!1},dispatchSortableEvent:function(p){fe({sortable:t,name:p,originalEvent:i})}},s))};function fe(n){Eo(Ue({putSortable:re,cloneEl:V,targetEl:y,rootEl:H,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:rt},n))}var y,$,x,H,pt,dn,V,ot,Et,Ee,Xt,rt,tn,re,Tt=!1,yn=!1,bn=[],lt,Ne,Mn,Nn,mr,_r,Ft,yt,Ut,Yt=!1,nn=!1,fn,le,Rn=[],jn=!1,Tn=[],Sn=typeof document<"u",rn=zn,gr=Zt||Ke?"cssFloat":"float",xo=Sn&&!Nr&&!zn&&"draggable"in document.createElement("div"),$r=function(){if(Sn){if(Ke)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Xr=function(e,t){var r=A(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=It(e,0,t),l=It(e,1,t),p=s&&A(s),d=l&&A(l),c=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+J(s).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+J(l).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&p.float&&p.float!=="none"){var o=p.float==="left"?"left":"right";return l&&(d.clear==="both"||d.clear===o)?"vertical":"horizontal"}return s&&(p.display==="block"||p.display==="flex"||p.display==="table"||p.display==="grid"||c>=i&&r[gr]==="none"||l&&r[gr]==="none"&&c+g>i)?"vertical":"horizontal"},Do=function(e,t,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,l=r?e.width:e.height,p=r?t.left:t.top,d=r?t.right:t.bottom,c=r?t.width:t.height;return i===p||s===d||i+l/2===p+c/2},Co=function(e,t){var r;return bn.some(function(i){var s=i[be].options.emptyInsertThreshold;if(!(!s||er(i))){var l=J(i),p=e>=l.left-s&&e<=l.right+s,d=t>=l.top-s&&t<=l.bottom+s;if(p&&d)return r=i}}),r},Ur=function(e){function t(s,l){return function(p,d,c,g){var o=p.options.group.name&&d.options.group.name&&p.options.group.name===d.options.group.name;if(s==null&&(l||o))return!0;if(s==null||s===!1)return!1;if(l&&s==="clone")return s;if(typeof s=="function")return t(s(p,d,c,g),l)(p,d,c,g);var a=(l?p:d).options.group.name;return s===!0||typeof s=="string"&&s===a||s.join&&s.indexOf(a)>-1}}var r={},i=e.group;(!i||cn(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},Yr=function(){!$r&&x&&A(x,"display","none")},jr=function(){!$r&&x&&A(x,"display","")};Sn&&!Nr&&document.addEventListener("click",function(n){if(yn)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),yn=!1,!1},!0);var ut=function(e){if(y){e=e.touches?e.touches[0]:e;var t=Co(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[be]._onDragOver(r)}}},Io=function(e){y&&y.parentNode[be]._isOutsideThisEl(e.target)};function w(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Qe({},e),n[be]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Xr(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,p){l.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:w.supportPointer!==!1&&"PointerEvent"in window&&(!Vt||zn),emptyInsertThreshold:5};Jt.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);Ur(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:xo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?O(n,"pointerdown",this._onTapStart):(O(n,"mousedown",this._onTapStart),O(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(n,"dragover",this),O(n,"dragenter",this)),bn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qe(this,To())}w.prototype={constructor:w,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(yt=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,l=e.type,p=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(p||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,g=i.filter;if(Fo(r),!y&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Vt&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Be(d,i.draggable,r,!1),!(d&&d.animated)&&dn!==d)){if(Et=Pe(d),Xt=Pe(d,i.draggable),typeof g=="function"){if(g.call(this,e,d,this)){fe({sortable:t,rootEl:c,name:"filter",targetEl:d,toEl:r,fromEl:r}),ye("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(o){if(o=Be(c,o.trim(),r,!1),o)return fe({sortable:t,rootEl:o,name:"filter",targetEl:d,fromEl:r,toEl:r}),ye("filter",t,{evt:e}),!0}),g)){s&&e.preventDefault();return}i.handle&&!Be(c,i.handle,r,!1)||this._prepareDragStart(e,p,d)}}},_prepareDragStart:function(e,t,r){var i=this,s=i.el,l=i.options,p=s.ownerDocument,d;if(r&&!y&&r.parentNode===s){var c=J(r);if(H=s,y=r,$=y.parentNode,pt=y.nextSibling,dn=r,tn=l.group,w.dragged=y,lt={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},mr=lt.clientX-c.left,_r=lt.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",d=function(){if(ye("delayEnded",i,{evt:e}),w.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!dr&&i.nativeDraggable&&(y.draggable=!0),i._triggerDragStart(e,t),fe({sortable:i,name:"choose",originalEvent:e}),Ae(y,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){Fr(y,g.trim(),Bn)}),O(p,"dragover",ut),O(p,"mousemove",ut),O(p,"touchmove",ut),l.supportPointer?(O(p,"pointerup",i._onDrop),!this.nativeDraggable&&O(p,"pointercancel",i._onDrop)):(O(p,"mouseup",i._onDrop),O(p,"touchend",i._onDrop),O(p,"touchcancel",i._onDrop)),dr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ye("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Zt||Ke))){if(w.eventCanceled){this._onDrop();return}l.supportPointer?(O(p,"pointerup",i._disableDelayedDrag),O(p,"pointercancel",i._disableDelayedDrag)):(O(p,"mouseup",i._disableDelayedDrag),O(p,"touchend",i._disableDelayedDrag),O(p,"touchcancel",i._disableDelayedDrag)),O(p,"mousemove",i._delayedDragTouchMoveHandler),O(p,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&O(p,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(d,l.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Bn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._disableDelayedDrag),P(e,"touchend",this._disableDelayedDrag),P(e,"touchcancel",this._disableDelayedDrag),P(e,"pointerup",this._disableDelayedDrag),P(e,"pointercancel",this._disableDelayedDrag),P(e,"mousemove",this._delayedDragTouchMoveHandler),P(e,"touchmove",this._delayedDragTouchMoveHandler),P(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):t?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(y,"dragend",this),O(H,"dragstart",this._onDragStart));try{document.selection?pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Tt=!1,H&&y){ye("dragStarted",this,{evt:t}),this.nativeDraggable&&O(document,"dragover",Io);var r=this.options;!e&&Ae(y,r.dragClass,!1),Ae(y,r.ghostClass,!0),w.active=this,e&&this._appendGhost(),fe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ne){this._lastX=Ne.clientX,this._lastY=Ne.clientY,Yr();for(var e=document.elementFromPoint(Ne.clientX,Ne.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ne.clientX,Ne.clientY),e!==t);)t=e;if(y.parentNode[be]._isOutsideThisEl(e),t)do{if(t[be]){var r=void 0;if(r=t[be]._onDragOver({clientX:Ne.clientX,clientY:Ne.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=Br(t));jr()}},_onTouchMove:function(e){if(lt){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,l=x&&xt(x,!0),p=x&&l&&l.a,d=x&&l&&l.d,c=rn&&le&&hr(le),g=(s.clientX-lt.clientX+i.x)/(p||1)+(c?c[0]-Rn[0]:0)/(p||1),o=(s.clientY-lt.clientY+i.y)/(d||1)+(c?c[1]-Rn[1]:0)/(d||1);if(!w.active&&!Tt){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(x){l?(l.e+=g-(Mn||0),l.f+=o-(Nn||0)):l={a:1,b:0,c:0,d:1,e:g,f:o};var a="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");A(x,"webkitTransform",a),A(x,"mozTransform",a),A(x,"msTransform",a),A(x,"transform",a),Mn=g,Nn=o,Ne=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:H,t=J(y,!0,rn,!0,e),r=this.options;if(rn){for(le=e;A(le,"position")==="static"&&A(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=Xe()),t.top+=le.scrollTop,t.left+=le.scrollLeft):le=Xe(),Rn=hr(le)}x=y.cloneNode(!0),Ae(x,r.ghostClass,!1),Ae(x,r.fallbackClass,!0),Ae(x,r.dragClass,!0),A(x,"transition",""),A(x,"transform",""),A(x,"box-sizing","border-box"),A(x,"margin",0),A(x,"top",t.top),A(x,"left",t.left),A(x,"width",t.width),A(x,"height",t.height),A(x,"opacity","0.8"),A(x,"position",rn?"absolute":"fixed"),A(x,"zIndex","100000"),A(x,"pointerEvents","none"),w.ghost=x,e.appendChild(x),A(x,"transform-origin",mr/parseInt(x.style.width)*100+"% "+_r/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,s=r.options;if(ye("dragStart",this,{evt:e}),w.eventCanceled){this._onDrop();return}ye("setupClone",this),w.eventCanceled||(V=Gr(y),V.removeAttribute("id"),V.draggable=!1,V.style["will-change"]="",this._hideClone(),Ae(V,this.options.chosenClass,!1),w.clone=V),r.cloneId=pn(function(){ye("clone",r),!w.eventCanceled&&(r.options.removeCloneOnHide||H.insertBefore(V,y),r._hideClone(),fe({sortable:r,name:"clone"}))}),!t&&Ae(y,s.dragClass,!0),t?(yn=!0,r._loopId=setInterval(r._emulateDragOver,50)):(P(document,"mouseup",r._onDrop),P(document,"touchend",r._onDrop),P(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,y)),O(document,"drop",r),A(y,"transform","translateZ(0)")),Tt=!0,r._dragStartId=pn(r._dragStarted.bind(r,t,e)),O(document,"selectstart",r),Ft=!0,window.getSelection().removeAllRanges(),Vt&&A(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,s,l,p=this.options,d=p.group,c=w.active,g=tn===d,o=p.sort,a=re||c,u,f=this,h=!1;if(jn)return;function _(Y,T){ye(Y,f,Ue({evt:e,isOwner:g,axis:u?"vertical":"horizontal",revert:l,dragRect:i,targetRect:s,canSort:o,fromSortable:a,target:r,completed:v,onMove:function(ae,ze){return on(H,t,y,i,ae,J(ae),e,ze)},changed:b},T))}function m(){_("dragOverAnimationCapture"),f.captureAnimationState(),f!==a&&a.captureAnimationState()}function v(Y){return _("dragOverCompleted",{insertion:Y}),Y&&(g?c._hideClone():c._showClone(f),f!==a&&(Ae(y,re?re.options.ghostClass:c.options.ghostClass,!1),Ae(y,p.ghostClass,!0)),re!==f&&f!==w.active?re=f:f===w.active&&re&&(re=null),a===f&&(f._ignoreWhileAnimating=r),f.animateAll(function(){_("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==a&&(a.animateAll(),a._ignoreWhileAnimating=null)),(r===y&&!y.animated||r===t&&!r.animated)&&(yt=null),!p.dragoverBubble&&!e.rootEl&&r!==document&&(y.parentNode[be]._isOutsideThisEl(e.target),!Y&&ut(e)),!p.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function b(){Ee=Pe(y),rt=Pe(y,p.draggable),fe({sortable:f,name:"change",toEl:t,newIndex:Ee,newDraggableIndex:rt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Be(r,p.draggable,t,!0),_("dragOver"),w.eventCanceled)return h;if(y.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||f._ignoreWhileAnimating===r)return v(!1);if(yn=!1,c&&!p.disabled&&(g?o||(l=$!==H):re===this||(this.lastPutMode=tn.checkPull(this,c,y,e))&&d.checkPut(this,c,y,e))){if(u=this._getDirection(e,r)==="vertical",i=J(y),_("dragOverValid"),w.eventCanceled)return h;if(l)return $=H,m(),this._hideClone(),_("revert"),w.eventCanceled||(pt?H.insertBefore(y,pt):H.appendChild(y)),v(!0);var S=er(t,p.draggable);if(!S||Mo(e,u,this)&&!S.animated){if(S===y)return v(!1);if(S&&t===e.target&&(r=S),r&&(s=J(r)),on(H,t,y,i,r,s,e,!!r)!==!1)return m(),S&&S.nextSibling?t.insertBefore(y,S.nextSibling):t.appendChild(y),$=t,b(),v(!0)}else if(S&&ko(e,u,this)){var C=It(t,0,p,!0);if(C===y)return v(!1);if(r=C,s=J(r),on(H,t,y,i,r,s,e,!1)!==!1)return m(),t.insertBefore(y,C),$=t,b(),v(!0)}else if(r.parentNode===t){s=J(r);var M=0,G,q=y.parentNode!==t,E=!Do(y.animated&&y.toRect||i,r.animated&&r.toRect||s,u),ie=u?"top":"left",X=pr(r,"top","top")||pr(y,"top","top"),U=X?X.scrollTop:void 0;yt!==r&&(G=s[ie],Yt=!1,nn=!E&&p.invertSwap||q),M=No(e,r,s,u,E?1:p.swapThreshold,p.invertedSwapThreshold==null?p.swapThreshold:p.invertedSwapThreshold,nn,yt===r);var K;if(M!==0){var N=Pe(y);do N-=M,K=$.children[N];while(K&&(A(K,"display")==="none"||K===x))}if(M===0||K===r)return v(!1);yt=r,Ut=M;var L=r.nextElementSibling,W=!1;W=M===1;var Se=on(H,t,y,i,r,s,e,W);if(Se!==!1)return(Se===1||Se===-1)&&(W=Se===1),jn=!0,setTimeout(Oo,30),m(),W&&!L?t.appendChild(y):r.parentNode.insertBefore(y,W?L:r),X&&Hr(X,0,U-X.scrollTop),$=y.parentNode,G!==void 0&&!nn&&(fn=Math.abs(G-J(r)[ie])),b(),v(!0)}if(t.contains(y))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){P(document,"mousemove",this._onTouchMove),P(document,"touchmove",this._onTouchMove),P(document,"pointermove",this._onTouchMove),P(document,"dragover",ut),P(document,"mousemove",ut),P(document,"touchmove",ut)},_offUpEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._onDrop),P(e,"touchend",this._onDrop),P(e,"pointerup",this._onDrop),P(e,"pointercancel",this._onDrop),P(e,"touchcancel",this._onDrop),P(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(Ee=Pe(y),rt=Pe(y,r.draggable),ye("drop",this,{evt:e}),$=y&&y.parentNode,Ee=Pe(y),rt=Pe(y,r.draggable),w.eventCanceled){this._nulling();return}Tt=!1,nn=!1,Yt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qn(this.cloneId),qn(this._dragStartId),this.nativeDraggable&&(P(document,"drop",this),P(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vt&&A(document.body,"user-select",""),A(y,"transform",""),e&&(Ft&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(H===$||re&&re.lastPutMode!=="clone")&&V&&V.parentNode&&V.parentNode.removeChild(V),y&&(this.nativeDraggable&&P(y,"dragend",this),Bn(y),y.style["will-change"]="",Ft&&!Tt&&Ae(y,re?re.options.ghostClass:this.options.ghostClass,!1),Ae(y,this.options.chosenClass,!1),fe({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==$?(Ee>=0&&(fe({rootEl:$,name:"add",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"remove",toEl:$,originalEvent:e}),fe({rootEl:$,name:"sort",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),re&&re.save()):Ee!==Et&&Ee>=0&&(fe({sortable:this,name:"update",toEl:$,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),w.active&&((Ee==null||Ee===-1)&&(Ee=Et,rt=Xt),fe({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ye("nulling",this),H=y=$=x=pt=V=dn=ot=lt=Ne=Ft=Ee=rt=Et=Xt=yt=Ut=re=tn=w.dragged=w.ghost=w.clone=w.active=null,Tn.forEach(function(e){e.checked=!0}),Tn.length=Mn=Nn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Po(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,s=r.length,l=this.options;i<s;i++)t=r[i],Be(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Bo(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(s,l){var p=i.children[l];Be(p,this.options.draggable,i,!1)&&(r[s]=p)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=Jt.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&Ur(r)},destroy:function(){ye("destroy",this);var e=this.el;e[be]=null,P(e,"mousedown",this._onTapStart),P(e,"touchstart",this._onTapStart),P(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(P(e,"dragover",this),P(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bn.splice(bn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ot){if(ye("hideClone",this),w.eventCanceled)return;A(V,"display","none"),this.options.removeCloneOnHide&&V.parentNode&&V.parentNode.removeChild(V),ot=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ot){if(ye("showClone",this),w.eventCanceled)return;y.parentNode==H&&!this.options.group.revertClone?H.insertBefore(V,y):pt?H.insertBefore(V,pt):H.appendChild(V),this.options.group.revertClone&&this.animate(y,V),A(V,"display",""),ot=!1}}};function Po(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function on(n,e,t,r,i,s,l,p){var d,c=n[be],g=c.options.onMove,o;return window.CustomEvent&&!Ke&&!Zt?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=n,d.dragged=t,d.draggedRect=r,d.related=i||e,d.relatedRect=s||J(e),d.willInsertAfter=p,d.originalEvent=l,n.dispatchEvent(d),g&&(o=g.call(c,d,l)),o}function Bn(n){n.draggable=!1}function Oo(){jn=!1}function ko(n,e,t){var r=J(It(t.el,0,t.options,!0)),i=Vr(t.el,t.options,x),s=10;return e?n.clientX<i.left-s||n.clientY<r.top&&n.clientX<r.right:n.clientY<i.top-s||n.clientY<r.bottom&&n.clientX<r.left}function Mo(n,e,t){var r=J(er(t.el,t.options.draggable)),i=Vr(t.el,t.options,x),s=10;return e?n.clientX>i.right+s||n.clientY>r.bottom&&n.clientX>r.left:n.clientY>i.bottom+s||n.clientX>r.right&&n.clientY>r.top}function No(n,e,t,r,i,s,l,p){var d=r?n.clientY:n.clientX,c=r?t.height:t.width,g=r?t.top:t.left,o=r?t.bottom:t.right,a=!1;if(!l){if(p&&fn<c*i){if(!Yt&&(Ut===1?d>g+c*s/2:d<o-c*s/2)&&(Yt=!0),Yt)a=!0;else if(Ut===1?d<g+fn:d>o-fn)return-Ut}else if(d>g+c*(1-i)/2&&d<o-c*(1-i)/2)return Ro(e)}return a=a||l,a&&(d<g+c*s/2||d>o-c*s/2)?d>g+c/2?1:-1:0}function Ro(n){return Pe(y)<Pe(n)?1:-1}function Bo(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function Fo(n){Tn.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&Tn.push(r)}}function pn(n){return setTimeout(n,0)}function qn(n){return clearTimeout(n)}Sn&&O(document,"touchmove",function(n){(w.active||Tt)&&n.cancelable&&n.preventDefault()});w.utils={on:O,off:P,css:A,find:Fr,is:function(e,t){return!!Be(e,t,e,!1)},extend:yo,throttle:Lr,closest:Be,toggleClass:Ae,clone:Gr,index:Pe,nextTick:pn,cancelNextTick:qn,detectDirection:Xr,getChild:It,expando:be};w.get=function(n){return n[be]};w.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(w.utils=Ue(Ue({},w.utils),r.utils)),Jt.mount(r)})};w.create=function(n,e){return new w(n,e)};w.version=go;var Z=[],Lt,Wn,Zn=!1,Fn,Ln,wn,Ht;function Lo(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):r.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):(P(document,"pointermove",this._handleFallbackAutoScroll),P(document,"touchmove",this._handleFallbackAutoScroll),P(document,"mousemove",this._handleFallbackAutoScroll)),vr(),hn(),bo()},nulling:function(){wn=Wn=Lt=Zn=Ht=Fn=Ln=null,Z.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,p=document.elementFromPoint(s,l);if(wn=t,r||this.options.forceAutoScrollFallback||Zt||Ke||Vt){Hn(t,this.options,p,r);var d=it(p,!0);Zn&&(!Ht||s!==Fn||l!==Ln)&&(Ht&&vr(),Ht=setInterval(function(){var c=it(document.elementFromPoint(s,l),!0);c!==d&&(d=c,hn()),Hn(t,i.options,c,r)},10),Fn=s,Ln=l)}else{if(!this.options.bubbleScroll||it(p,!0)===Xe()){hn();return}Hn(t,this.options,it(p,!1),!1)}}},Qe(n,{pluginName:"scroll",initializeByDefault:!0})}function hn(){Z.forEach(function(n){clearInterval(n.pid)}),Z=[]}function vr(){clearInterval(Ht)}var Hn=Lr(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,l=e.scrollSensitivity,p=e.scrollSpeed,d=Xe(),c=!1,g;Wn!==t&&(Wn=t,hn(),Lt=e.scroll,g=e.scrollFn,Lt===!0&&(Lt=it(t,!0)));var o=0,a=Lt;do{var u=a,f=J(u),h=f.top,_=f.bottom,m=f.left,v=f.right,b=f.width,S=f.height,C=void 0,M=void 0,G=u.scrollWidth,q=u.scrollHeight,E=A(u),ie=u.scrollLeft,X=u.scrollTop;u===d?(C=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),M=S<q&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(C=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"),M=S<q&&(E.overflowY==="auto"||E.overflowY==="scroll"));var U=C&&(Math.abs(v-i)<=l&&ie+b<G)-(Math.abs(m-i)<=l&&!!ie),K=M&&(Math.abs(_-s)<=l&&X+S<q)-(Math.abs(h-s)<=l&&!!X);if(!Z[o])for(var N=0;N<=o;N++)Z[N]||(Z[N]={});(Z[o].vx!=U||Z[o].vy!=K||Z[o].el!==u)&&(Z[o].el=u,Z[o].vx=U,Z[o].vy=K,clearInterval(Z[o].pid),(U!=0||K!=0)&&(c=!0,Z[o].pid=setInterval((function(){r&&this.layer===0&&w.active._onTouchMove(wn);var L=Z[this.layer].vy?Z[this.layer].vy*p:0,W=Z[this.layer].vx?Z[this.layer].vx*p:0;typeof g=="function"&&g.call(w.dragged.parentNode[be],W,L,n,wn,Z[this.layer].el)!=="continue"||Hr(Z[this.layer].el,W,L)}).bind({layer:o}),24))),o++}while(e.bubbleScroll&&a!==d&&(a=it(a,!1)));Zn=c}},30),qr=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,l=e.dispatchSortableEvent,p=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var c=r||s;p();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,o=document.elementFromPoint(g.clientX,g.clientY);d(),c&&!c.el.contains(o)&&(l("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function tr(){}tr.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=It(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:qr};Qe(tr,{pluginName:"revertOnSpill"});function nr(){}nr.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:qr};Qe(nr,{pluginName:"removeOnSpill"});w.mount(new Lo);w.mount(nr,tr);class Ho{constructor(){this.steps=[]}visualizeCarryOver(e,t){const r=[],i=e+t;r.push({action:"show_first",value:e,coins:this.convertToCoins(e),message:`まず ${e}円 があります`}),r.push({action:"show_second",value:t,coins:this.convertToCoins(t),message:`つぎに ${t}円 をたします`});const s=e%10,l=t%10;if(s+l>=10){const d=10-s;r.push({action:"make_ten",value:d,message:`${s} に ${d} をたして 10 をつくります`}),r.push({action:"convert_to_ten",message:"10まいの1円が1まいの10円になります！"});const c=l-d;c>0&&r.push({action:"add_remainder",value:c,message:`のこりの ${c}円 をたします`}),r.push({action:"final_result",value:i,message:`ごうけい ${i}円 です！`})}else r.push({action:"simple_add",value:i,message:`${e} + ${t} = ${i}円 です！`});return r}convertToCoins(e){const t=[],r=Math.floor(e/10),i=e%10;for(let s=0;s<r;s++)t.push({type:"10",value:10});for(let s=0;s<i;s++)t.push({type:"1",value:1});return t}generateCoinsForAmount(e){const t=[];let r=e;const i=Math.floor(r/10);for(let s=0;s<i;s++)t.push(this.createCoin(10));r=r%10;for(let s=0;s<r;s++)t.push(this.createCoin(1));for(let s=0;s<3;s++)t.push(this.createCoin(10));for(let s=0;s<6;s++)t.push(this.createCoin(1));return t}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}checkCarryOverPattern(e,t){const r=e%10,i=t%10;return r+i>=10}getHint(e,t,r){const s=e+t-r;return s===0?"せいかいです！":s>0?`あと ${s}円 たりません`:`${Math.abs(s)}円 おおすぎます`}generateProblemSet(e=1){const t=[];switch(e){case 1:t.push({items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}]},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}]},{items:[{name:"パン",price:9,emoji:"🍞"},{name:"ぎゅうにゅう",price:4,emoji:"🥛"}]});break;case 2:t.push({items:[{name:"ケーキ",price:8,emoji:"🍰"},{name:"ジュース",price:7,emoji:"🧃"}]},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"ほん",price:6,emoji:"📚"}]});break}return t}}var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var yr;function Go(){return yr||(yr=1,function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var o=this||t;return o._counter=1e3,o._html5AudioPool=[],o.html5PoolSize=10,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator=typeof window<"u"&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.autoUnlock=!0,o._setup(),o},volume:function(o){var a=this||t;if(o=parseFloat(o),a.ctx||g(),typeof o<"u"&&o>=0&&o<=1){if(a._volume=o,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(o,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),h=0;h<f.length;h++){var _=a._howls[u]._soundById(f[h]);_&&_._node&&(_._node.volume=_._volume*o)}return a}return a._volume},mute:function(o){var a=this||t;a.ctx||g(),a._muted=o,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(o?0:a._volume,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),h=0;h<f.length;h++){var _=a._howls[u]._soundById(f[h]);_&&_._node&&(_._node.muted=o?!0:_._muted)}return a},stop:function(){for(var o=this||t,a=0;a<o._howls.length;a++)o._howls[a].stop();return o},unload:function(){for(var o=this||t,a=o._howls.length-1;a>=0;a--)o._howls[a].unload();return o.usingWebAudio&&o.ctx&&typeof o.ctx.close<"u"&&(o.ctx.close(),o.ctx=null,g()),o},codecs:function(o){return(this||t)._codecs[o.replace(/^x-/,"")]},_setup:function(){var o=this||t;if(o.state=o.ctx&&o.ctx.state||"suspended",o._autoSuspend(),!o.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(o._canPlayEvent="canplay")}catch{o.noAudio=!0}else o.noAudio=!0;try{var a=new Audio;a.muted&&(o.noAudio=!0)}catch{}return o.noAudio||o._setupCodecs(),o},_setupCodecs:function(){var o=this||t,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return o}if(!a||typeof a.canPlayType!="function")return o;var u=a.canPlayType("audio/mpeg;").replace(/^no$/,""),f=o._navigator?o._navigator.userAgent:"",h=f.match(/OPR\/(\d+)/g),_=h&&parseInt(h[0].split("/")[1],10)<33,m=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,v=f.match(/Version\/(.*?) /),b=m&&v&&parseInt(v[1],10)<15;return o._codecs={mp3:!!(!_&&(u||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},o},_unlockAudio:function(){var o=this||t;if(!(o._audioUnlocked||!o.ctx)){o._audioUnlocked=!1,o.autoUnlock=!1,!o._mobileUnloaded&&o.ctx.sampleRate!==44100&&(o._mobileUnloaded=!0,o.unload()),o._scratchBuffer=o.ctx.createBuffer(1,1,22050);var a=function(u){for(;o._html5AudioPool.length<o.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,o._releaseHtml5Audio(f)}catch{o.noAudio=!0;break}for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var _=o._howls[h]._getSoundIds(),m=0;m<_.length;m++){var v=o._howls[h]._soundById(_[m]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}o._autoResume();var b=o.ctx.createBufferSource();b.buffer=o._scratchBuffer,b.connect(o.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof o.ctx.resume=="function"&&o.ctx.resume(),b.onended=function(){b.disconnect(0),o._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var S=0;S<o._howls.length;S++)o._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),o}},_obtainHtml5Audio:function(){var o=this||t;if(o._html5AudioPool.length)return o._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(o){var a=this||t;return o._unlocked&&a._html5AudioPool.push(o),a},_autoSuspend:function(){var o=this;if(!(!o.autoSuspend||!o.ctx||typeof o.ctx.suspend>"u"||!t.usingWebAudio)){for(var a=0;a<o._howls.length;a++)if(o._howls[a]._webAudio){for(var u=0;u<o._howls[a]._sounds.length;u++)if(!o._howls[a]._sounds[u]._paused)return o}return o._suspendTimer&&clearTimeout(o._suspendTimer),o._suspendTimer=setTimeout(function(){if(o.autoSuspend){o._suspendTimer=null,o.state="suspending";var f=function(){o.state="suspended",o._resumeAfterSuspend&&(delete o._resumeAfterSuspend,o._autoResume())};o.ctx.suspend().then(f,f)}},3e4),o}},_autoResume:function(){var o=this;if(!(!o.ctx||typeof o.ctx.resume>"u"||!t.usingWebAudio))return o.state==="running"&&o.ctx.state!=="interrupted"&&o._suspendTimer?(clearTimeout(o._suspendTimer),o._suspendTimer=null):o.state==="suspended"||o.state==="running"&&o.ctx.state==="interrupted"?(o.ctx.resume().then(function(){o.state="running";for(var a=0;a<o._howls.length;a++)o._howls[a]._emit("resume")}),o._suspendTimer&&(clearTimeout(o._suspendTimer),o._suspendTimer=null)):o.state==="suspending"&&(o._resumeAfterSuspend=!0),o}};var t=new e,r=function(o){var a=this;if(!o.src||o.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(o)};r.prototype={init:function(o){var a=this;return t.ctx||g(),a._autoplay=o.autoplay||!1,a._format=typeof o.format!="string"?o.format:[o.format],a._html5=o.html5||!1,a._muted=o.mute||!1,a._loop=o.loop||!1,a._pool=o.pool||5,a._preload=typeof o.preload=="boolean"||o.preload==="metadata"?o.preload:!0,a._rate=o.rate||1,a._sprite=o.sprite||{},a._src=typeof o.src!="string"?o.src:[o.src],a._volume=o.volume!==void 0?o.volume:1,a._xhr={method:o.xhr&&o.xhr.method?o.xhr.method:"GET",headers:o.xhr&&o.xhr.headers?o.xhr.headers:null,withCredentials:o.xhr&&o.xhr.withCredentials?o.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=o.onend?[{fn:o.onend}]:[],a._onfade=o.onfade?[{fn:o.onfade}]:[],a._onload=o.onload?[{fn:o.onload}]:[],a._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],a._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],a._onpause=o.onpause?[{fn:o.onpause}]:[],a._onplay=o.onplay?[{fn:o.onplay}]:[],a._onstop=o.onstop?[{fn:o.onstop}]:[],a._onmute=o.onmute?[{fn:o.onmute}]:[],a._onvolume=o.onvolume?[{fn:o.onvolume}]:[],a._onrate=o.onrate?[{fn:o.onrate}]:[],a._onseek=o.onseek?[{fn:o.onseek}]:[],a._onunlock=o.onunlock?[{fn:o.onunlock}]:[],a._onresume=[],a._webAudio=t.usingWebAudio&&!a._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var o=this,a=null;if(t.noAudio){o._emit("loaderror",null,"No audio support.");return}typeof o._src=="string"&&(o._src=[o._src]);for(var u=0;u<o._src.length;u++){var f,h;if(o._format&&o._format[u])f=o._format[u];else{if(h=o._src[u],typeof h!="string"){o._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(h),f||(f=/\.([^.]+)$/.exec(h.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&t.codecs(f)){a=o._src[u];break}}if(!a){o._emit("loaderror",null,"No codec support for selected audio sources.");return}return o._src=a,o._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(o._html5=!0,o._webAudio=!1),new i(o),o._webAudio&&l(o),o},play:function(o,a){var u=this,f=null;if(typeof o=="number")f=o,o=null;else{if(typeof o=="string"&&u._state==="loaded"&&!u._sprite[o])return null;if(typeof o>"u"&&(o="__default",!u._playLock)){for(var h=0,_=0;_<u._sounds.length;_++)u._sounds[_]._paused&&!u._sounds[_]._ended&&(h++,f=u._sounds[_]._id);h===1?o=null:f=null}}var m=f?u._soundById(f):u._inactiveSound();if(!m)return null;if(f&&!o&&(o=m._sprite||"__default"),u._state!=="loaded"){m._sprite=o,m._ended=!1;var v=m._id;return u._queue.push({event:"play",action:function(){u.play(v)}}),v}if(f&&!m._paused)return a||u._loadQueue("play"),m._id;u._webAudio&&t._autoResume();var b=Math.max(0,m._seek>0?m._seek:u._sprite[o][0]/1e3),S=Math.max(0,(u._sprite[o][0]+u._sprite[o][1])/1e3-b),C=S*1e3/Math.abs(m._rate),M=u._sprite[o][0]/1e3,G=(u._sprite[o][0]+u._sprite[o][1])/1e3;m._sprite=o,m._ended=!1;var q=function(){m._paused=!1,m._seek=b,m._start=M,m._stop=G,m._loop=!!(m._loop||u._sprite[o][2])};if(b>=G){u._ended(m);return}var E=m._node;if(u._webAudio){var ie=function(){u._playLock=!1,q(),u._refreshBuffer(m);var N=m._muted||u._muted?0:m._volume;E.gain.setValueAtTime(N,t.ctx.currentTime),m._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?m._loop?E.bufferSource.noteGrainOn(0,b,86400):E.bufferSource.noteGrainOn(0,b,S):m._loop?E.bufferSource.start(0,b,86400):E.bufferSource.start(0,b,S),C!==1/0&&(u._endTimers[m._id]=setTimeout(u._ended.bind(u,m),C)),a||setTimeout(function(){u._emit("play",m._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ie():(u._playLock=!0,u.once("resume",ie),u._clearTimer(m._id))}else{var X=function(){E.currentTime=b,E.muted=m._muted||u._muted||t._muted||E.muted,E.volume=m._volume*t.volume(),E.playbackRate=m._rate;try{var N=E.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(u._playLock=!0,q(),N.then(function(){u._playLock=!1,E._unlocked=!0,a?u._loadQueue():u._emit("play",m._id)}).catch(function(){u._playLock=!1,u._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):a||(u._playLock=!1,q(),u._emit("play",m._id)),E.playbackRate=m._rate,E.paused){u._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}o!=="__default"||m._loop?u._endTimers[m._id]=setTimeout(u._ended.bind(u,m),C):(u._endTimers[m._id]=function(){u._ended(m),E.removeEventListener("ended",u._endTimers[m._id],!1)},E.addEventListener("ended",u._endTimers[m._id],!1))}catch(L){u._emit("playerror",m._id,L)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=u._src,E.load());var U=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||U)X();else{u._playLock=!0,u._state="loading";var K=function(){u._state="loaded",X(),E.removeEventListener(t._canPlayEvent,K,!1)};E.addEventListener(t._canPlayEvent,K,!1),u._clearTimer(m._id)}}return m._id},pause:function(o){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(o)}}),a;for(var u=a._getSoundIds(o),f=0;f<u.length;f++){a._clearTimer(u[f]);var h=a._soundById(u[f]);if(h&&!h._paused&&(h._seek=a.seek(u[f]),h._rateSeek=0,h._paused=!0,a._stopFade(u[f]),h._node))if(a._webAudio){if(!h._node.bufferSource)continue;typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),a._cleanBuffer(h._node)}else(!isNaN(h._node.duration)||h._node.duration===1/0)&&h._node.pause();arguments[1]||a._emit("pause",h?h._id:null)}return a},stop:function(o,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(o)}}),u;for(var f=u._getSoundIds(o),h=0;h<f.length;h++){u._clearTimer(f[h]);var _=u._soundById(f[h]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,u._stopFade(f[h]),_._node&&(u._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),u._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&u._clearSound(_._node))),a||u._emit("stop",_._id))}return u},mute:function(o,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(o,a)}}),u;if(typeof a>"u")if(typeof o=="boolean")u._muted=o;else return u._muted;for(var f=u._getSoundIds(a),h=0;h<f.length;h++){var _=u._soundById(f[h]);_&&(_._muted=o,_._interval&&u._stopFade(_._id),u._webAudio&&_._node?_._node.gain.setValueAtTime(o?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:o),u._emit("mute",_._id))}return u},volume:function(){var o=this,a=arguments,u,f;if(a.length===0)return o._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var h=o._getSoundIds(),_=h.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length>=2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var m;if(typeof u<"u"&&u>=0&&u<=1){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,a)}}),o;typeof f>"u"&&(o._volume=u),f=o._getSoundIds(f);for(var v=0;v<f.length;v++)m=o._soundById(f[v]),m&&(m._volume=u,a[2]||o._stopFade(f[v]),o._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(u,t.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=u*t.volume()),o._emit("volume",m._id))}else return m=f?o._soundById(f):o._sounds[0],m?m._volume:0;return o},fade:function(o,a,u,f){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"fade",action:function(){h.fade(o,a,u,f)}}),h;o=Math.min(Math.max(0,parseFloat(o)),1),a=Math.min(Math.max(0,parseFloat(a)),1),u=parseFloat(u),h.volume(o,f);for(var _=h._getSoundIds(f),m=0;m<_.length;m++){var v=h._soundById(_[m]);if(v){if(f||h._stopFade(_[m]),h._webAudio&&!v._muted){var b=t.ctx.currentTime,S=b+u/1e3;v._volume=o,v._node.gain.setValueAtTime(o,b),v._node.gain.linearRampToValueAtTime(a,S)}h._startFadeInterval(v,o,a,u,_[m],typeof f>"u")}}return h},_startFadeInterval:function(o,a,u,f,h,_){var m=this,v=a,b=u-a,S=Math.abs(b/.01),C=Math.max(4,S>0?f/S:f),M=Date.now();o._fadeTo=u,o._interval=setInterval(function(){var G=(Date.now()-M)/f;M=Date.now(),v+=b*G,v=Math.round(v*100)/100,b<0?v=Math.max(u,v):v=Math.min(u,v),m._webAudio?o._volume=v:m.volume(v,o._id,!0),_&&(m._volume=v),(u<a&&v<=u||u>a&&v>=u)&&(clearInterval(o._interval),o._interval=null,o._fadeTo=null,m.volume(u,o._id),m._emit("fade",o._id))},C)},_stopFade:function(o){var a=this,u=a._soundById(o);return u&&u._interval&&(a._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,a.volume(u._fadeTo,o),u._fadeTo=null,a._emit("fade",o)),a},loop:function(){var o=this,a=arguments,u,f,h;if(a.length===0)return o._loop;if(a.length===1)if(typeof a[0]=="boolean")u=a[0],o._loop=u;else return h=o._soundById(parseInt(a[0],10)),h?h._loop:!1;else a.length===2&&(u=a[0],f=parseInt(a[1],10));for(var _=o._getSoundIds(f),m=0;m<_.length;m++)h=o._soundById(_[m]),h&&(h._loop=u,o._webAudio&&h._node&&h._node.bufferSource&&(h._node.bufferSource.loop=u,u&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop,o.playing(_[m])&&(o.pause(_[m],!0),o.play(_[m],!0)))));return o},rate:function(){var o=this,a=arguments,u,f;if(a.length===0)f=o._sounds[0]._id;else if(a.length===1){var h=o._getSoundIds(),_=h.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var m;if(typeof u=="number"){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,a)}}),o;typeof f>"u"&&(o._rate=u),f=o._getSoundIds(f);for(var v=0;v<f.length;v++)if(m=o._soundById(f[v]),m){o.playing(f[v])&&(m._rateSeek=o.seek(f[v]),m._playStart=o._webAudio?t.ctx.currentTime:m._playStart),m._rate=u,o._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):m._node&&(m._node.playbackRate=u);var b=o.seek(f[v]),S=(o._sprite[m._sprite][0]+o._sprite[m._sprite][1])/1e3-b,C=S*1e3/Math.abs(m._rate);(o._endTimers[f[v]]||!m._paused)&&(o._clearTimer(f[v]),o._endTimers[f[v]]=setTimeout(o._ended.bind(o,m),C)),o._emit("rate",m._id)}}else return m=o._soundById(f),m?m._rate:o._rate;return o},seek:function(){var o=this,a=arguments,u,f;if(a.length===0)o._sounds.length&&(f=o._sounds[0]._id);else if(a.length===1){var h=o._getSoundIds(),_=h.indexOf(a[0]);_>=0?f=parseInt(a[0],10):o._sounds.length&&(f=o._sounds[0]._id,u=parseFloat(a[0]))}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(o._state!=="loaded"||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,a)}}),o;var m=o._soundById(f);if(m)if(typeof u=="number"&&u>=0){var v=o.playing(f);v&&o.pause(f,!0),m._seek=u,m._ended=!1,o._clearTimer(f),!o._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=u);var b=function(){v&&o.play(f,!0),o._emit("seek",f)};if(v&&!o._webAudio){var S=function(){o._playLock?setTimeout(S,0):b()};setTimeout(S,0)}else b()}else if(o._webAudio){var C=o.playing(f)?t.ctx.currentTime-m._playStart:0,M=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(M+C*Math.abs(m._rate))}else return m._node.currentTime;return o},playing:function(o){var a=this;if(typeof o=="number"){var u=a._soundById(o);return u?!u._paused:!1}for(var f=0;f<a._sounds.length;f++)if(!a._sounds[f]._paused)return!0;return!1},duration:function(o){var a=this,u=a._duration,f=a._soundById(o);return f&&(u=a._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var o=this,a=o._sounds,u=0;u<a.length;u++)a[u]._paused||o.stop(a[u]._id),o._webAudio||(o._clearSound(a[u]._node),a[u]._node.removeEventListener("error",a[u]._errorFn,!1),a[u]._node.removeEventListener(t._canPlayEvent,a[u]._loadFn,!1),a[u]._node.removeEventListener("ended",a[u]._endFn,!1),t._releaseHtml5Audio(a[u]._node)),delete a[u]._node,o._clearTimer(a[u]._id);var f=t._howls.indexOf(o);f>=0&&t._howls.splice(f,1);var h=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===o._src||o._src.indexOf(t._howls[u]._src)>=0){h=!1;break}return s&&h&&delete s[o._src],t.noAudio=!1,o._state="unloaded",o._sounds=[],o=null,null},on:function(o,a,u,f){var h=this,_=h["_on"+o];return typeof a=="function"&&_.push(f?{id:u,fn:a,once:f}:{id:u,fn:a}),h},off:function(o,a,u){var f=this,h=f["_on"+o],_=0;if(typeof a=="number"&&(u=a,a=null),a||u)for(_=0;_<h.length;_++){var m=u===h[_].id;if(a===h[_].fn&&m||!a&&m){h.splice(_,1);break}}else if(o)f["_on"+o]=[];else{var v=Object.keys(f);for(_=0;_<v.length;_++)v[_].indexOf("_on")===0&&Array.isArray(f[v[_]])&&(f[v[_]]=[])}return f},once:function(o,a,u){var f=this;return f.on(o,a,u,1),f},_emit:function(o,a,u){for(var f=this,h=f["_on"+o],_=h.length-1;_>=0;_--)(!h[_].id||h[_].id===a||o==="load")&&(setTimeout((function(m){m.call(this,a,u)}).bind(f,h[_].fn),0),h[_].once&&f.off(o,h[_].fn,h[_].id));return f._loadQueue(o),f},_loadQueue:function(o){var a=this;if(a._queue.length>0){var u=a._queue[0];u.event===o&&(a._queue.shift(),a._loadQueue()),o||u.action()}return a},_ended:function(o){var a=this,u=o._sprite;if(!a._webAudio&&o._node&&!o._node.paused&&!o._node.ended&&o._node.currentTime<o._stop)return setTimeout(a._ended.bind(a,o),100),a;var f=!!(o._loop||a._sprite[u][2]);if(a._emit("end",o._id),!a._webAudio&&f&&a.stop(o._id,!0).play(o._id),a._webAudio&&f){a._emit("play",o._id),o._seek=o._start||0,o._rateSeek=0,o._playStart=t.ctx.currentTime;var h=(o._stop-o._start)*1e3/Math.abs(o._rate);a._endTimers[o._id]=setTimeout(a._ended.bind(a,o),h)}return a._webAudio&&!f&&(o._paused=!0,o._ended=!0,o._seek=o._start||0,o._rateSeek=0,a._clearTimer(o._id),a._cleanBuffer(o._node),t._autoSuspend()),!a._webAudio&&!f&&a.stop(o._id,!0),a},_clearTimer:function(o){var a=this;if(a._endTimers[o]){if(typeof a._endTimers[o]!="function")clearTimeout(a._endTimers[o]);else{var u=a._soundById(o);u&&u._node&&u._node.removeEventListener("ended",a._endTimers[o],!1)}delete a._endTimers[o]}return a},_soundById:function(o){for(var a=this,u=0;u<a._sounds.length;u++)if(o===a._sounds[u]._id)return a._sounds[u];return null},_inactiveSound:function(){var o=this;o._drain();for(var a=0;a<o._sounds.length;a++)if(o._sounds[a]._ended)return o._sounds[a].reset();return new i(o)},_drain:function(){var o=this,a=o._pool,u=0,f=0;if(!(o._sounds.length<a)){for(f=0;f<o._sounds.length;f++)o._sounds[f]._ended&&u++;for(f=o._sounds.length-1;f>=0;f--){if(u<=a)return;o._sounds[f]._ended&&(o._webAudio&&o._sounds[f]._node&&o._sounds[f]._node.disconnect(0),o._sounds.splice(f,1),u--)}}},_getSoundIds:function(o){var a=this;if(typeof o>"u"){for(var u=[],f=0;f<a._sounds.length;f++)u.push(a._sounds[f]._id);return u}else return[o]},_refreshBuffer:function(o){var a=this;return o._node.bufferSource=t.ctx.createBufferSource(),o._node.bufferSource.buffer=s[a._src],o._panner?o._node.bufferSource.connect(o._panner):o._node.bufferSource.connect(o._node),o._node.bufferSource.loop=o._loop,o._loop&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop||0),o._node.bufferSource.playbackRate.setValueAtTime(o._rate,t.ctx.currentTime),a},_cleanBuffer:function(o){var a=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!o.bufferSource)return a;if(t._scratchBuffer&&o.bufferSource&&(o.bufferSource.onended=null,o.bufferSource.disconnect(0),u))try{o.bufferSource.buffer=t._scratchBuffer}catch{}return o.bufferSource=null,a},_clearSound:function(o){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(o.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(o){this._parent=o,this.init()};i.prototype={init:function(){var o=this,a=o._parent;return o._muted=a._muted,o._loop=a._loop,o._volume=a._volume,o._rate=a._rate,o._seek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,a._sounds.push(o),o.create(),o},create:function(){var o=this,a=o._parent,u=t._muted||o._muted||o._parent._muted?0:o._volume;return a._webAudio?(o._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),o._node.gain.setValueAtTime(u,t.ctx.currentTime),o._node.paused=!0,o._node.connect(t.masterGain)):t.noAudio||(o._node=t._obtainHtml5Audio(),o._errorFn=o._errorListener.bind(o),o._node.addEventListener("error",o._errorFn,!1),o._loadFn=o._loadListener.bind(o),o._node.addEventListener(t._canPlayEvent,o._loadFn,!1),o._endFn=o._endListener.bind(o),o._node.addEventListener("ended",o._endFn,!1),o._node.src=a._src,o._node.preload=a._preload===!0?"auto":a._preload,o._node.volume=u*t.volume(),o._node.load()),o},reset:function(){var o=this,a=o._parent;return o._muted=a._muted,o._loop=a._loop,o._volume=a._volume,o._rate=a._rate,o._seek=0,o._rateSeek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,o},_errorListener:function(){var o=this;o._parent._emit("loaderror",o._id,o._node.error?o._node.error.code:0),o._node.removeEventListener("error",o._errorFn,!1)},_loadListener:function(){var o=this,a=o._parent;a._duration=Math.ceil(o._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),o._node.removeEventListener(t._canPlayEvent,o._loadFn,!1)},_endListener:function(){var o=this,a=o._parent;a._duration===1/0&&(a._duration=Math.ceil(o._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(o)),o._node.removeEventListener("ended",o._endFn,!1)}};var s={},l=function(o){var a=o._src;if(s[a]){o._duration=s[a].duration,c(o);return}if(/^data:[^;]+;base64,/.test(a)){for(var u=atob(a.split(",")[1]),f=new Uint8Array(u.length),h=0;h<u.length;++h)f[h]=u.charCodeAt(h);d(f.buffer,o)}else{var _=new XMLHttpRequest;_.open(o._xhr.method,a,!0),_.withCredentials=o._xhr.withCredentials,_.responseType="arraybuffer",o._xhr.headers&&Object.keys(o._xhr.headers).forEach(function(m){_.setRequestHeader(m,o._xhr.headers[m])}),_.onload=function(){var m=(_.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){o._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}d(_.response,o)},_.onerror=function(){o._webAudio&&(o._html5=!0,o._webAudio=!1,o._sounds=[],delete s[a],o.load())},p(_)}},p=function(o){try{o.send()}catch{o.onerror()}},d=function(o,a){var u=function(){a._emit("loaderror",null,"Decoding audio data failed.")},f=function(h){h&&a._sounds.length>0?(s[a._src]=h,c(a,h)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(o).then(f).catch(u):t.ctx.decodeAudioData(o,f,u)},c=function(o,a){a&&!o._duration&&(o._duration=a.duration),Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue())},g=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var o=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),a=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=a?parseInt(a[1],10):null;if(o&&u&&u<9){var f=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!f&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=r,typeof Nt<"u"?(Nt.HowlerGlobal=e,Nt.Howler=t,Nt.Howl=r,Nt.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,r,i,s,l,p){var d=this;if(!d.ctx||!d.ctx.listener)return d;var c=d._orientation;if(r=typeof r!="number"?c[1]:r,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,l=typeof l!="number"?c[4]:l,p=typeof p!="number"?c[5]:p,typeof t=="number")d._orientation=[t,r,i,s,l,p],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(t,r,i,s,l,p);else return c;return d},Howl.prototype.init=function(t){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var l=i._getSoundIds(r),p=0;p<l.length;p++){var d=i._soundById(l[p]);if(d)if(typeof t=="number")d._stereo=t,d._pos=[t,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,s),s==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(t,0,0):d._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",d._id);else return d._stereo}return i},Howl.prototype.pos=function(t,r,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(t,r,i,s)}}),l;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")l._pos=[t,r,i];else return l._pos;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._pos=[t,r,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(t,r,i)),l._emit("pos",c._id);else return c._pos}return l},Howl.prototype.orientation=function(t,r,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(t,r,i,s)}}),l;if(r=typeof r!="number"?l._orientation[1]:r,i=typeof i!="number"?l._orientation[2]:i,typeof s>"u")if(typeof t=="number")l._orientation=[t,r,i];else return l._orientation;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._orientation=[t,r,i],c._node&&(c._panner||(c._pos||(c._pos=l._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(t,r,i)),l._emit("orientation",c._id);else return c._orientation}return l},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,i,s,l;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return l=t._soundById(parseInt(r[0],10)),l?l._pannerAttr:t._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var p=t._getSoundIds(s),d=0;d<p.length;d++)if(l=t._soundById(p[d]),l){var c=l._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var g=l._panner;g||(l._pos||(l._pos=t._pos||[0,0,-.5]),e(l,"spatial"),g=l._panner),g.coneInnerAngle=c.coneInnerAngle,g.coneOuterAngle=c.coneOuterAngle,g.coneOuterGain=c.coneOuterGain,g.distanceModel=c.distanceModel,g.maxDistance=c.maxDistance,g.refDistance=c.refDistance,g.rolloffFactor=c.rolloffFactor,g.panningModel=c.panningModel}return t},Sound.prototype.init=function(t){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,t.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),t.call(this)}}(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Gn)),Gn}Go();class Vo{constructor(){this.sounds={},this.soundEnabled=!0,this.volume=.7,this.initializeDummySounds()}initializeDummySounds(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sounds={"coin-pickup":this.createToneSound(800,.1),"coin-drop":this.createToneSound(400,.2),"register-open":this.createToneSound(600,.3),success:this.createSuccessSound(),wrong:this.createErrorSound(),"level-up":this.createLevelUpSound(),"ten-conversion":this.createMagicSound()}}createToneSound(e,t){return{play:()=>{if(!this.soundEnabled)return;const r=this.audioContext.createOscillator(),i=this.audioContext.createGain();r.connect(i),i.connect(this.audioContext.destination),r.frequency.value=e,r.type="sine",i.gain.setValueAtTime(0,this.audioContext.currentTime),i.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),r.start(this.audioContext.currentTime),r.stop(this.audioContext.currentTime+t)}}}createSuccessSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,659,784,1047],t=.15;e.forEach((r,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=r,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*100)})}}}createErrorSound(){return{play:()=>{if(!this.soundEnabled)return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(200,this.audioContext.currentTime),e.frequency.linearRampToValueAtTime(100,this.audioContext.currentTime+.3),e.type="sawtooth",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3)}}}createLevelUpSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,587,659,698,784,880,988,1047],t=.1;e.forEach((r,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=r,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.15,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*50)})}}}createMagicSound(){return{play:()=>{if(this.soundEnabled)for(let e=0;e<5;e++)setTimeout(()=>{const t=this.audioContext.createOscillator(),r=this.audioContext.createGain();t.connect(r),r.connect(this.audioContext.destination);const i=800+Math.random()*800;t.frequency.value=i,t.type="sine",r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.3)},e*100)}}}play(e){if(this.sounds[e]&&this.soundEnabled)try{this.sounds[e].play()}catch(t){console.warn(`Could not play sound: ${e}`,t)}}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}enableSound(){this.soundEnabled=!0}disableSound(){this.soundEnabled=!1}toggleSound(){return this.soundEnabled=!this.soundEnabled,this.soundEnabled}}const Ze=new Vo;/**
 * anime.js - ESM
 * @version v4.0.2
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const Ye=typeof window<"u",Vn=Ye?window:null,Pt=Ye?document:null,j={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},k={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},ke={NONE:0,AUTO:1,FORCE:2},Te={replace:0,none:1,blend:2},br=Symbol(),rr=Symbol(),Wr=Symbol(),xn=Symbol(),$o=Symbol(),F=1e-11,Zr=1e12,Ot=1e3,Jn=120,ht="",Qt=new Map;Qt.set("x","translateX");Qt.set("y","translateY");Qt.set("z","translateZ");const or=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Jr=or.reduce((n,e)=>({...n,[e]:e+"("}),{}),Oe=()=>{},Xo=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,Uo=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Yo=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,jo=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,qo=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,Tr=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Wo=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Zo=/([a-z])([A-Z])/g,Jo=/(\w+)(\([^)]+\)+)/g,Qr={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:Jn,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Ot,delay:0,loopDelay:0,ease:"out(2)",composition:Te.replace,modifier:n=>n,onBegin:Oe,onBeforeUpdate:Oe,onUpdate:Oe,onLoop:Oe,onPause:Oe,onComplete:Oe,onRender:Oe},oe={defaults:Qr,root:Pt,precision:4,timeScale:1,tickThreshold:200},Kr={version:"4.0.2",engine:null};Ye&&(Vn.AnimeJS||(Vn.AnimeJS=[]),Vn.AnimeJS.push(Kr));const Qo=n=>n.replace(Zo,"$1-$2").toLowerCase(),Dt=(n,e)=>n.indexOf(e)===0,qt=Date.now,Wt=Array.isArray,$n=n=>n&&n.constructor===Object,Ko=n=>typeof n=="number"&&!isNaN(n),Dn=n=>typeof n=="string",An=n=>typeof n=="function",B=n=>typeof n>"u",Xn=n=>B(n)||n===null,zr=n=>Ye&&n instanceof SVGElement,eo=n=>Xo.test(n),to=n=>Dt(n,"rgb"),no=n=>Dt(n,"hsl"),zo=n=>eo(n)||to(n)||no(n),mn=n=>!oe.defaults.hasOwnProperty(n),an=n=>Dn(n)?parseFloat(n):n,wt=Math.pow,ei=Math.sqrt,ti=Math.sin,ni=Math.cos,ri=Math.abs,oi=Math.ceil,ro=Math.floor,ii=Math.asin,ir=Math.PI,wr=Math.round,ce=(n,e,t)=>n<e?e:n>t?t:n,Ar={},Q=(n,e)=>{if(e<0)return n;if(!e)return wr(n);let t=Ar[e];return t||(t=Ar[e]=10**e),wr(n*t)/t},ct=(n,e,t)=>n+(e-n)*t,ar=n=>n===1/0?Zr:n===-1/0?-1e12:n,jt=n=>n<=F?F:ar(Q(n,11)),pe=n=>Wt(n)?[...n]:n,ai=(n,e)=>{const t={...n};for(let r in e){const i=n[r];t[r]=B(i)?e[r]:i}return t},ee=(n,e,t,r="_prev",i="_next")=>{let s=n._head,l=i;for(t&&(s=n._tail,l=r);s;){const p=s[l];e(s),s=p}},Gt=(n,e,t="_prev",r="_next")=>{const i=e[t],s=e[r];i?i[r]=s:n._head=s,s?s[t]=i:n._tail=i,e[t]=null,e[r]=null},St=(n,e,t,r="_prev",i="_next")=>{let s=n._tail;for(;s&&t&&t(s,e);)s=s[r];const l=s?s[i]:n._head;s?s[i]=e:n._head=e,l?l[r]=e:n._tail=e,e[r]=s,e[i]=l};class oo{constructor(e=0){this.deltaTime=0,this._currentTime=e,this._elapsedTime=e,this._startTime=e,this._lastTime=e,this._scheduledTime=0,this._frameDuration=Q(Ot/Jn,0),this._fps=Jn,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(e){const t=this._frameDuration,r=+e,i=r<F?F:r,s=Q(Ot/i,0);this._fps=i,this._frameDuration=s,this._scheduledTime+=s-t}get speed(){return this._speed}set speed(e){const t=+e;this._speed=t<F?F:t}requestTick(e){const t=this._scheduledTime,r=this._elapsedTime;if(this._elapsedTime+=e-r,r<t)return ke.NONE;const i=this._frameDuration,s=r-t;return this._scheduledTime+=s<i?i:s,ke.AUTO}computeDeltaTime(e){const t=e-this._lastTime;return this.deltaTime=t,this._lastTime=e,t}}const _n=(n,e,t,r,i)=>{const s=n.parent,l=n.duration,p=n.completed,d=n.iterationDuration,c=n.iterationCount,g=n._currentIteration,o=n._loopDelay,a=n._reversed,u=n._alternate,f=n._hasChildren,h=n._delay,_=n._currentTime,m=h+d,v=e-h,b=ce(_,-h,l),S=ce(v,-h,l),C=v-_,M=S>0,G=S>=l,q=l<=F,E=i===ke.FORCE;let ie=0,X=v,U=0;if(c>1){const Se=~~(S/(d+(G?0:o)));n._currentIteration=ce(Se,0,c),G&&n._currentIteration--,ie=n._currentIteration%2,X=S%(d+o)||0}const K=a^(u&&ie),N=n._ease;let L=G?K?0:l:K?d-X:X;N&&(L=d*N(L/d)||0);const W=(s?s.backwards:v<_)?!K:!!K;if(n._currentTime=v,n._iterationTime=L,n.backwards=W,M&&!n.began?(n.began=!0,!t&&!(s&&(W||!s.began))&&n.onBegin(n)):v<=0&&(n.began=!1),!t&&!f&&M&&n._currentIteration!==g&&n.onLoop(n),E||i===ke.AUTO&&(e>=h&&e<=m||e<=h&&b>h||e>=m&&b!==l)||L>=m&&b!==l||L<=h&&b>0||e<=b&&b===l&&p||G&&!p&&q){if(M&&(n.computeDeltaTime(b),t||n.onBeforeUpdate(n)),!f){const Se=E||(W?C*-1:C)>=oe.tickThreshold,Y=n._offset+(s?s._offset:0)+h+L;let T=n._head,ne,ae,ze,at,xe=0;for(;T;){const me=T._composition,De=T._currentTime,we=T._changeDuration,Mt=T._absoluteStartTime+T._changeDuration,Fe=T._nextRep,Ce=T._prevRep,je=me!==Te.none;if((Se||(De!==we||Y<=Mt+(Fe?Fe._delay:0))&&(De!==0||Y>=T._absoluteStartTime))&&(!je||!T._isOverridden&&(!T._isOverlapped||Y<=Mt)&&(!Fe||Fe._isOverridden||Y<=Fe._absoluteStartTime)&&(!Ce||Ce._isOverridden||Y>=Ce._absoluteStartTime+Ce._changeDuration+T._delay))){const qe=T._currentTime=ce(L-T._startTime,0,we),te=T._ease(qe/T._updateDuration),_e=T._modifier,Me=T._valueType,de=T._tweenType,ge=de===j.OBJECT,mt=Me===k.NUMBER,Le=mt&&ge||te===0||te===1?-1:oe.precision;let ve,_t;if(mt)ve=_t=_e(Q(ct(T._fromNumber,T._toNumber,te),Le));else if(Me===k.UNIT)_t=_e(Q(ct(T._fromNumber,T._toNumber,te),Le)),ve=`${_t}${T._unit}`;else if(Me===k.COLOR){const z=T._fromNumbers,He=T._toNumbers,Ge=Q(ce(_e(ct(z[0],He[0],te)),0,255),0),We=Q(ce(_e(ct(z[1],He[1],te)),0,255),0),Kt=Q(ce(_e(ct(z[2],He[2],te)),0,255),0),gt=ce(_e(Q(ct(z[3],He[3],te),Le)),0,1);if(ve=`rgba(${Ge},${We},${Kt},${gt})`,je){const st=T._numbers;st[0]=Ge,st[1]=We,st[2]=Kt,st[3]=gt}}else if(Me===k.COMPLEX){ve=T._strings[0];for(let z=0,He=T._toNumbers.length;z<He;z++){const Ge=_e(Q(ct(T._fromNumbers[z],T._toNumbers[z],te),Le)),We=T._strings[z+1];ve+=`${We?Ge+We:Ge}`,je&&(T._numbers[z]=Ge)}}if(je&&(T._number=_t),!r&&me!==Te.blend){const z=T.property;ne=T.target,ge?ne[z]=ve:de===j.ATTRIBUTE?ne.setAttribute(z,ve):(ae=ne.style,de===j.TRANSFORM?(ne!==ze&&(ze=ne,at=ne[xn]),at[z]=ve,xe=1):de===j.CSS?ae[z]=ve:de===j.CSS_VAR&&ae.setProperty(z,ve)),M&&(U=1)}else T._value=ve}if(xe&&T._renderTransforms){let qe=ht;for(let te in at)qe+=`${Jr[te]}${at[te]}) `;ae.transform=qe,xe=0}T=T._next}!t&&U&&n.onRender(n)}!t&&M&&n.onUpdate(n)}return s&&q?!t&&(s.began&&!W&&v>=l&&!p||W&&v<=F&&p)&&(n.onComplete(n),n.completed=!W):M&&G?c===1/0?n._startTime+=n.duration:n._currentIteration>=c-1&&(n.paused=!0,!p&&!f&&(n.completed=!0,!t&&!(s&&(W||!s.began))&&(n.onComplete(n),n._resolve(n)))):n.completed=!1,U},At=(n,e,t,r,i)=>{const s=n._currentIteration;if(_n(n,e,t,r,i),n._hasChildren){const l=n,p=l.backwards,d=r?e:l._iterationTime,c=qt();let g=0,o=!0;if(!r&&l._currentIteration!==s){const a=l.iterationDuration;ee(l,u=>{if(!p)!u.completed&&!u.backwards&&u._currentTime<u.iterationDuration&&_n(u,a,t,1,ke.FORCE),u.began=!1,u.completed=!1;else{const f=u.duration,h=u._offset+u._delay,_=h+f;!t&&f<=F&&(!h||_===a)&&u.onComplete(u)}}),t||l.onLoop(l)}ee(l,a=>{const u=Q((d-a._offset)*a._speed,12),f=a._fps<l._fps?a.requestTick(c):i;g+=_n(a,u,t,r,f),!a.completed&&o&&(o=!1)},p),!t&&g&&l.onRender(l),o&&l._currentTime>=l.duration&&(l.paused=!0,l.completed||(l.completed=!0,t||(l.onComplete(l),l._resolve(l))))}},Ct={animation:null,update:Oe},si=n=>{let e=Ct.animation;return e||(e={duration:F,computeDeltaTime:Oe,_offset:0,_delay:0,_head:null,_tail:null},Ct.animation=e,Ct.update=()=>{n.forEach(t=>{for(let r in t){const i=t[r],s=i._head;if(s){const l=s._valueType,p=l===k.COMPLEX||l===k.COLOR?pe(s._fromNumbers):null;let d=s._fromNumber,c=i._tail;for(;c&&c!==s;){if(p)for(let g=0,o=c._numbers.length;g<o;g++)p[g]+=c._numbers[g];else d+=c._number;c=c._prevAdd}s._toNumber=d,s._toNumbers=p}}}),_n(e,1,1,0,ke.FORCE)}),e},io=Ye?requestAnimationFrame:setImmediate,li=Ye?cancelAnimationFrame:clearImmediate;class ui extends oo{constructor(e){super(e),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=Qr,this.paused=!!(Ye&&Pt.hidden),this.reqId=null}update(){const e=this._currentTime=qt();if(this.requestTick(e)){this.computeDeltaTime(e);const t=this._speed,r=this._fps;let i=this._head;for(;i;){const s=i._next;i.paused?(Gt(this,i),this._hasChildren=!!this._tail,i._running=!1,i.completed&&!i._cancelled&&i.cancel()):At(i,(e-i._startTime)*i._speed*t,0,0,i._fps<r?i.requestTick(e):ke.AUTO),i=s}Ct.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=io(ao)),this}pause(){return this.paused=!0,ci()}resume(){if(this.paused)return this.paused=!1,ee(this,e=>e.resetTime()),this.wake()}get speed(){return this._speed*(oe.timeScale===1?1:Ot)}set speed(e){this._speed=e*oe.timeScale,ee(this,t=>t.speed=t._speed)}get timeUnit(){return oe.timeScale===1?"ms":"s"}set timeUnit(e){const r=e==="s",i=r?.001:1;if(oe.timeScale!==i){oe.timeScale=i,oe.tickThreshold=200*i;const s=r?.001:Ot;this.defaults.duration*=s,this._speed*=s}}get precision(){return oe.precision}set precision(e){oe.precision=e}}const ue=(()=>{const n=new ui(qt());return Ye&&(Kr.engine=n,Pt.addEventListener("visibilitychange",()=>{n.pauseOnDocumentHidden&&(Pt.hidden?n.pause():n.resume())})),n})(),ao=()=>{ue._head?(ue.reqId=io(ao),ue.update()):ue.reqId=0},ci=()=>(li(ue.reqId),ue.reqId=0,ue),di=(n,e,t)=>{const r=n.style.transform;let i;if(r){const s=n[xn];let l;for(;l=Jo.exec(r);){const p=l[1],d=l[2].slice(1,-1);s[p]=d,p===e&&(i=d,t&&(t[e]=d))}}return r&&!B(i)?i:Dt(e,"scale")?"1":Dt(e,"rotate")||Dt(e,"skew")?"0deg":"0px"};function Er(n){const e=Dn(n)?oe.root.querySelectorAll(n):n;if(e instanceof NodeList||e instanceof HTMLCollection)return e}function fi(n){if(Xn(n))return[];if(Wt(n)){const t=n.flat(1/0),r=[];for(let i=0,s=t.length;i<s;i++){const l=t[i];if(!Xn(l)){const p=Er(l);if(p)for(let d=0,c=p.length;d<c;d++){const g=p[d];if(!Xn(g)){let o=!1;for(let a=0,u=r.length;a<u;a++)if(r[a]===g){o=!0;break}o||r.push(g)}}else{let d=!1;for(let c=0,g=r.length;c<g;c++)if(r[c]===l){d=!0;break}d||r.push(l)}}}return r}if(!Ye)return[n];const e=Er(n);return e?Array.from(e):[n]}function pi(n){const e=fi(n),t=e.length;if(t)for(let r=0;r<t;r++){const i=e[r];if(!i[br]){i[br]=!0;const s=zr(i);(i.nodeType||s)&&(i[rr]=!0,i[Wr]=s,i[xn]={})}}return e}const hi=["opacity","rotate","overflow","color"],mi=(n,e)=>{if(hi.includes(e))return!1;if(n.getAttribute(e)||e in n){if(e==="scale"){const t=n.parentNode;return t&&t.tagName==="filter"}return!0}},_i=n=>{const e=Uo.exec(n)||Yo.exec(n),t=B(e[4])?1:+e[4];return[+e[1],+e[2],+e[3],t]},gi=n=>{const e=n.length,t=e===4||e===5;return[+("0x"+n[1]+n[t?1:2]),+("0x"+n[t?2:3]+n[t?2:4]),+("0x"+n[t?3:5]+n[t?3:6]),e===5||e===9?+(+("0x"+n[t?4:7]+n[t?4:8])/255).toFixed(3):1]},Un=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n),vi=n=>{const e=jo.exec(n)||qo.exec(n),t=+e[1]/360,r=+e[2]/100,i=+e[3]/100,s=B(e[4])?1:+e[4];let l,p,d;if(r===0)l=p=d=i;else{const c=i<.5?i*(1+r):i+r-i*r,g=2*i-c;l=Q(Un(g,c,t+1/3)*255,0),p=Q(Un(g,c,t)*255,0),d=Q(Un(g,c,t-1/3)*255,0)}return[l,p,d,s]},yi=n=>to(n)?_i(n):eo(n)?gi(n):no(n)?vi(n):[0,0,0,1],he=(n,e)=>B(n)?e:n,et=(n,e,t,r,i)=>{if(An(n)){const s=()=>{const l=n(e,t,r);return isNaN(+l)?l||0:+l};return i&&(i.func=s),s()}else return n},so=(n,e)=>n[rr]?n[Wr]&&mi(n,e)?j.ATTRIBUTE:or.includes(e)||Qt.get(e)?j.TRANSFORM:Dt(e,"--")?j.CSS_VAR:e in n.style?j.CSS:e in n?j.OBJECT:j.ATTRIBUTE:j.OBJECT,Sr=(n,e,t)=>{const r=n.style[e];r&&t&&(t[e]=r);const i=r||getComputedStyle(n[$o]||n).getPropertyValue(e);return i==="auto"?"0":i},Rt=(n,e,t,r)=>{const i=B(t)?so(n,e):t;return i===j.OBJECT?n[e]||0:i===j.ATTRIBUTE?n.getAttribute(e):i===j.TRANSFORM?di(n,e,r):i===j.CSS_VAR?Sr(n,e,r).trimStart():Sr(n,e,r)},xr=(n,e,t)=>t==="-"?n-e:t==="+"?n+e:n*e,sr=()=>({t:k.NUMBER,n:0,u:null,o:null,d:null,s:null}),Ve=(n,e)=>{if(e.t=k.NUMBER,e.n=0,e.u=null,e.o=null,e.d=null,e.s=null,!n)return e;const t=+n;if(isNaN(t)){let r=n;r[1]==="="&&(e.o=r[0],r=r.slice(2));const i=r.includes(" ")?!1:Wo.exec(r);if(i)return e.t=k.UNIT,e.n=+i[1],e.u=i[2],e;if(e.o)return e.n=+r,e;if(zo(r))return e.t=k.COLOR,e.d=yi(r),e;{const s=r.match(Tr);return e.t=k.COMPLEX,e.d=s?s.map(Number):[],e.s=r.split(Tr)||[],e}}else return e.n=t,e},Dr=(n,e)=>(e.t=n._valueType,e.n=n._toNumber,e.u=n._unit,e.o=null,e.d=pe(n._toNumbers),e.s=pe(n._strings),e),dt=sr(),En={_rep:new WeakMap,_add:new Map},lr=(n,e,t="_rep")=>{const r=En[t];let i=r.get(n);return i||(i={},r.set(n,i)),i[e]?i[e]:i[e]={_head:null,_tail:null}},bi=(n,e)=>n._isOverridden||n._absoluteStartTime>e._absoluteStartTime,gn=n=>{n._isOverlapped=1,n._isOverridden=1,n._changeDuration=F,n._currentTime=F},lo=(n,e)=>{const t=n._composition;if(t===Te.replace){const r=n._absoluteStartTime;St(e,n,bi,"_prevRep","_nextRep");const i=n._prevRep;if(i){const s=i.parent,l=i._absoluteStartTime+i._changeDuration;if(n.parent.id!==s.id&&s.iterationCount>1&&l+(s.duration-s.iterationDuration)>r){gn(i);let c=i._prevRep;for(;c&&c.parent.id===s.id;)gn(c),c=c._prevRep}const p=r-n._delay;if(l>p){const c=i._startTime,g=l-(c+i._updateDuration);i._changeDuration=p-g-c,i._currentTime=i._changeDuration,i._isOverlapped=1,i._changeDuration<F&&gn(i)}let d=!0;if(ee(s,c=>{c._isOverlapped||(d=!1)}),d){const c=s.parent;if(c){let g=!0;ee(c,o=>{o!==s&&ee(o,a=>{a._isOverlapped||(g=!1)})}),g&&c.cancel()}else s.cancel()}}}else if(t===Te.blend){const r=lr(n.target,n.property,"_add"),i=si(En._add);let s=r._head;s||(s={...n},s._composition=Te.replace,s._updateDuration=F,s._startTime=0,s._numbers=pe(n._fromNumbers),s._number=0,s._next=null,s._prev=null,St(r,s),St(i,s));const l=n._toNumber;if(n._fromNumber=s._fromNumber-l,n._toNumber=0,n._numbers=pe(n._fromNumbers),n._number=0,s._fromNumber=l,n._toNumbers){const p=pe(n._toNumbers);p&&p.forEach((d,c)=>{n._fromNumbers[c]=s._fromNumbers[c]-d,n._toNumbers[c]=0}),s._fromNumbers=p}St(r,n,null,"_prevAdd","_nextAdd")}return n},Ti=n=>{const e=n._composition;if(e!==Te.none){const t=n.target,r=n.property,l=En._rep.get(t)[r];if(Gt(l,n,"_prevRep","_nextRep"),e===Te.blend){const p=En._add,d=p.get(t);if(!d)return;const c=d[r],g=Ct.animation;Gt(c,n,"_prevAdd","_nextAdd");const o=c._head;if(o&&o===c._tail){Gt(c,o,"_prevAdd","_nextAdd"),Gt(g,o);let a=!0;for(let u in d)if(d[u]._head){a=!1;break}a&&p.delete(t)}}}return n},Cr=n=>(n.paused=!0,n.began=!1,n.completed=!1,n),Qn=n=>(n._cancelled&&(n._hasChildren?ee(n,Qn):ee(n,e=>{e._composition!==Te.none&&lo(e,lr(e.target,e.property))}),n._cancelled=0),n);let wi=0;class Ai extends oo{constructor(e={},t=null,r=0){super(0);const{id:i,delay:s,duration:l,reversed:p,alternate:d,loop:c,loopDelay:g,autoplay:o,frameRate:a,playbackRate:u,onComplete:f,onLoop:h,onPause:_,onBegin:m,onBeforeUpdate:v,onUpdate:b}=e,S=t?0:ue._elapsedTime,C=t?t.defaults:oe.defaults,M=An(s)||B(s)?C.delay:+s,G=An(l)||B(l)?1/0:+l,q=he(c,C.loop),E=he(g,C.loopDelay),ie=q===!0||q===1/0||q<0?1/0:q+1;let X=0;if(t)X=r;else{let U=qt();ue.paused&&(ue.requestTick(U),U=ue._elapsedTime),X=U-ue._startTime}this.id=B(i)?++wi:i,this.parent=t,this.duration=ar((G+E)*ie-E)||F,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=m||C.onBegin,this.onBeforeUpdate=v||C.onBeforeUpdate,this.onUpdate=b||C.onUpdate,this.onLoop=h||C.onLoop,this.onPause=_||C.onPause,this.onComplete=f||C.onComplete,this.iterationDuration=G,this.iterationCount=ie,this._autoplay=t?!1:he(o,C.autoplay),this._offset=X,this._delay=M,this._loopDelay=E,this._iterationTime=0,this._currentIteration=0,this._resolve=Oe,this._running=!1,this._reversed=+he(p,C.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=he(d,C.alternate),this._prev=null,this._next=null,this._elapsedTime=S,this._startTime=S,this._lastTime=S,this._fps=he(a,C.frameRate),this._speed=he(u,C.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(e){e?this.cancel():this.reset(1).play()}get currentTime(){return ce(Q(this._currentTime,oe.precision),-this._delay,this.duration)}set currentTime(e){const t=this.paused;this.pause().seek(+e),t||this.resume()}get iterationCurrentTime(){return Q(this._iterationTime,oe.precision)}set iterationCurrentTime(e){this.currentTime=this.iterationDuration*this._currentIteration+e}get progress(){return ce(Q(this._currentTime/this.duration,5),0,1)}set progress(e){this.currentTime=this.duration*e}get iterationProgress(){return ce(Q(this._iterationTime/this.iterationDuration,5),0,1)}set iterationProgress(e){const t=this.iterationDuration;this.currentTime=t*this._currentIteration+t*e}get currentIteration(){return this._currentIteration}set currentIteration(e){this.currentTime=this.iterationDuration*ce(+e,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(e){e?this.reverse():this.play()}get speed(){return super.speed}set speed(e){super.speed=e,this.resetTime()}reset(e=0){return Qn(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,At(this,0,1,e,ke.FORCE),Cr(this),this._hasChildren&&ee(this,Cr),this}init(e=0){this.fps=this._fps,this.speed=this._speed,!e&&this._hasChildren&&At(this,this.duration,1,e,ke.FORCE),this.reset(e);const t=this._autoplay;return t===!0?this.resume():t&&!B(t.linked)&&t.link(this),this}resetTime(){const e=1/(this._speed*ue._speed);return this._startTime=qt()-(this._currentTime+this._delay)*e,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=F&&!this._hasChildren?At(this,F,0,0,ke.FORCE):(this._running||(St(ue,this),ue._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,ue.wake()),this):this}restart(){return this.reset(0).resume()}seek(e,t=0,r=0){Qn(this),this.completed=!1;const i=this.paused;return this.paused=!0,At(this,e+this._delay,~~t,~~r,ke.AUTO),i?this:this.resume()}alternate(){const e=this._reversed,t=this.iterationCount,r=this.iterationDuration,i=t===1/0?ro(Zr/r):t;return this._reversed=+(this._alternate&&!(i%2)?e:!e),t===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(r*i-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?ee(this,e=>e.cancel(),!0):ee(this,Ti),this._cancelled=1,this.pause()}stretch(e){const t=this.duration,r=jt(e);if(t===r)return this;const i=e/t,s=e<=F;return this.duration=s?F:r,this.iterationDuration=s?F:jt(this.iterationDuration*i),this._offset*=i,this._delay*=i,this._loopDelay*=i,this}revert(){At(this,0,1,0,ke.AUTO);const e=this._autoplay;return e&&e.linked&&e.linked===this&&e.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(e=Oe){const t=this.then,r=()=>{this.then=null,e(this),this.then=t,this._resolve=Oe};return new Promise(i=>(this._resolve=()=>i(r()),this.completed&&this._resolve(),this))}}const kt=n=>n,uo=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Ei=(n,e,t)=>{let r=0,i=1,s,l,p=0;do l=r+(i-r)/2,s=uo(l,e,t)-n,s>0?i=l:r=l;while(ri(s)>1e-7&&++p<100);return l},Si=(n=.5,e=0,t=.5,r=1)=>n===e&&t===r?kt:i=>i===0||i===1?i:uo(Ei(i,n,t),e,r),xi=(n=10,e)=>{const t=e?oi:ro;return r=>t(ce(r,0,1)*n)*(1/n)},co=(...n)=>{const e=n.length;if(!e)return kt;const t=e-1,r=n[0],i=n[t],s=[0],l=[an(r)];for(let p=1;p<t;p++){const d=n[p],c=Dn(d)?d.trim().split(" "):[d],g=c[0],o=c[1];s.push(B(o)?p/t:an(o)/100),l.push(an(g))}return l.push(an(i)),s.push(1),function(d){for(let c=1,g=s.length;c<g;c++){const o=s[c];if(d<=o){const a=s[c-1],u=l[c-1];return u+(l[c]-u)*(d-a)/(o-a)}}return l[l.length-1]}},Di=(n=10,e=1)=>{const t=[0],r=n-1;for(let i=1;i<r;i++){const s=t[i-1],l=i/r,p=(i+1)/r,d=l+(p-l)*Math.random(),c=l*(1-e)+d*e;t.push(ce(c,s,1))}return t.push(1),co(...t)},Ci=ir/2,Ir=ir*2,Bt=(n=1.68)=>e=>wt(e,+n),Pr={[ht]:Bt,Quad:Bt(2),Cubic:Bt(3),Quart:Bt(4),Quint:Bt(5),Sine:n=>1-ni(n*Ci),Circ:n=>1-ei(1-n*n),Expo:n=>n?wt(2,10*n-10):0,Bounce:n=>{let e,t=4;for(;n<((e=wt(2,--t))-1)/11;);return 1/wt(4,3-t)-7.5625*wt((e*3-2)/22-n,2)},Back:(n=1.70158)=>e=>(+n+1)*e*e*e-+n*e*e,Elastic:(n=1,e=.3)=>{const t=ce(+n,1,10),r=ce(+e,F,2),i=r/Ir*ii(1/t),s=Ir/r;return l=>l===0||l===1?l:-t*wt(2,-10*(1-l))*ti((1-l-i)*s)}},Kn={in:n=>e=>n(e),out:n=>e=>1-n(1-e),inOut:n=>e=>e<.5?n(e*2)/2:1-n(e*-2+2)/2,outIn:n=>e=>e<.5?(1-n(1-e*2))/2:(n(e*2-1)+1)/2},Ii=(n,e,t)=>{if(t[n])return t[n];if(n.indexOf("(")<=-1){const i=Kn[n]||n.includes("Back")||n.includes("Elastic")?e[n]():e[n];return i?t[n]=i:kt}else{const r=n.slice(0,-1).split("("),i=e[r[0]];return i?t[n]=i(...r[1].split(",")):kt}},Pi=(()=>{const n={linear:co,irregular:Di,steps:xi,cubicBezier:Si};for(let e in Kn)for(let t in Pr){const r=Pr[t],i=Kn[e];n[e+t]=t===ht||t==="Back"||t==="Elastic"?(s,l)=>i(r(s,l)):i(r)}return n})(),Oi={linear:kt},Or=n=>An(n)?n:Dn(n)?Ii(n,Pi,Oi):kt,kr={},ki=(n,e,t)=>{if(t===j.TRANSFORM){const r=Qt.get(n);return r||n}else if(t===j.CSS||t===j.ATTRIBUTE&&zr(e)&&n in e.style){const r=kr[n];if(r)return r;{const i=n&&Qo(n);return kr[n]=i,i}}else return n},Yn={deg:1,rad:180/ir,turn:360},Mr={},Mi=(n,e,t,r=!1)=>{const i=e.u,s=e.n;if(e.t===k.UNIT&&i===t)return e;const l=s+i+t,p=Mr[l];if(!B(p)&&!r)e.n=p;else{let d;if(i in Yn)d=s*Yn[i]/Yn[t];else{const g=n.cloneNode(),o=n.parentNode,a=o&&o!==Pt?o:Pt.body;a.appendChild(g);const u=g.style;u.width=100+i;const f=g.offsetWidth||100;u.width=100+t;const h=g.offsetWidth||100,_=f/h;a.removeChild(g),d=_*s}e.n=d,Mr[l]=d}return e.t,k.UNIT,e.u=t,e},fo=n=>{if(n._hasChildren)ee(n,fo,!0);else{const e=n;e.pause(),ee(e,t=>{const r=t.property,i=t.target;if(i[rr]){const s=i.style,l=e._inlineStyles[r];if(t._tweenType===j.TRANSFORM){const p=i[xn];if(B(l)||l===ht?delete p[r]:p[r]=l,t._renderTransforms)if(!Object.keys(p).length)s.removeProperty("transform");else{let d=ht;for(let c in p)d+=Jr[c]+p[c]+") ";s.transform=d}}else B(l)||l===ht?s.removeProperty(r):s[r]=l;e._tail===t&&e.targets.forEach(p=>{p.getAttribute&&p.getAttribute("style")===ht&&p.removeAttribute("style")})}})}return n},D=sr(),I=sr(),sn={func:null},ln=[null],bt=[null,null],un={to:null};let Ni=0,tt,$e;const Ri=(n,e)=>{const t={};if(Wt(n)){const r=[].concat(...n.map(i=>Object.keys(i))).filter(mn);for(let i=0,s=r.length;i<s;i++){const l=r[i],p=n.map(d=>{const c={};for(let g in d){const o=d[g];mn(g)?g===l&&(c.to=o):c[g]=o}return c});t[l]=p}}else{const r=he(e.duration,oe.defaults.duration);Object.keys(n).map(s=>({o:parseFloat(s)/100,p:n[s]})).sort((s,l)=>s.o-l.o).forEach(s=>{const l=s.o,p=s.p;for(let d in p)if(mn(d)){let c=t[d];c||(c=t[d]=[]);const g=l*r;let o=c.length,a=c[o-1];const u={to:p[d]};let f=0;for(let h=0;h<o;h++)f+=c[h].duration;o===1&&(u.from=a.to),p.ease&&(u.ease=p.ease),u.duration=g-(o?f:0),c.push(u)}return s});for(let s in t){const l=t[s];let p;for(let d=0,c=l.length;d<c;d++){const g=l[d],o=g.ease;g.ease=p||void 0,p=o}l[0].duration||l.shift()}}return t};class Bi extends Ai{constructor(e,t,r,i,s=!1,l=0,p=0){super(t,r,i);const d=pi(e),c=d.length,g=t.keyframes,o=g?ai(Ri(g,t),t):t,{delay:a,duration:u,ease:f,playbackEase:h,modifier:_,composition:m,onRender:v}=o,b=r?r.defaults:oe.defaults,S=he(h,b.playbackEase),C=S?Or(S):null,M=!B(f)&&!B(f.ease),G=M?f.ease:he(f,C?"linear":b.ease),q=M?f.duration:he(u,b.duration),E=he(a,b.delay),ie=_||b.modifier,X=B(m)&&c>=Ot?Te.none:B(m)?b.composition:m,U={},K=this._offset+(r?r._offset:0);let N=NaN,L=NaN,W=0,Se=0;for(let Y=0;Y<c;Y++){const T=d[Y],ne=l||Y,ae=p||c;let ze=NaN,at=NaN;for(let xe in o)if(mn(xe)){const me=so(T,xe),De=ki(xe,T,me);let we=o[xe];const Mt=Wt(we);if(s&&!Mt&&(bt[0]=we,bt[1]=we,we=bt),Mt){const _e=we.length,Me=!$n(we[0]);_e===2&&Me?(un.to=we,ln[0]=un,tt=ln):_e>2&&Me?(tt=[],we.forEach((de,ge)=>{ge?ge===1?(bt[1]=de,tt.push(bt)):tt.push(de):bt[0]=de})):tt=we}else ln[0]=we,tt=ln;let Fe=null,Ce=null,je=NaN,qe=0,te=0;for(let _e=tt.length;te<_e;te++){const Me=tt[te];$n(Me)?$e=Me:(un.to=Me,$e=un),sn.func=null;const de=et($e.to,T,ne,ae,sn);let ge;$n(de)&&!B(de.to)?($e=de,ge=de.to):ge=de;const mt=et($e.from,T,ne,ae),Le=$e.ease,ve=!B(Le)&&!B(Le.ease),_t=ve?Le.ease:Le||G,z=ve?Le.duration:et(he($e.duration,_e>1?et(q,T,ne,ae)/_e:q),T,ne,ae),He=et(he($e.delay,te?0:E),T,ne,ae),Ge=et(he($e.composition,X),T,ne,ae),We=Ko(Ge)?Ge:Te[Ge],Kt=$e.modifier||ie,gt=!B(mt),st=!B(ge),zt=Wt(ge),po=zt||gt&&st,Cn=Ce?qe+He:He,In=K+Cn;!Se&&(gt||zt)&&(Se=1);let Ie=Ce;if(We!==Te.none){Fe||(Fe=lr(T,De));let R=Fe._head;for(;R&&!R._isOverridden&&R._absoluteStartTime<=In;)if(Ie=R,R=R._nextRep,R&&R._absoluteStartTime>=In)for(;R;)gn(R),R=R._nextRep}if(po?(Ve(zt?et(ge[0],T,ne,ae):mt,D),Ve(zt?et(ge[1],T,ne,ae,sn):ge,I),D.t===k.NUMBER&&(Ie?Ie._valueType===k.UNIT&&(D.t=k.UNIT,D.u=Ie._unit):(Ve(Rt(T,De,me,U),dt),dt.t===k.UNIT&&(D.t=k.UNIT,D.u=dt.u)))):(st?Ve(ge,I):Ce?Dr(Ce,I):Ve(r&&Ie&&Ie.parent.parent===r?Ie._value:Rt(T,De,me,U),I),gt?Ve(mt,D):Ce?Dr(Ce,D):Ve(r&&Ie&&Ie.parent.parent===r?Ie._value:Rt(T,De,me,U),D)),D.o&&(D.n=xr(Ie?Ie._toNumber:Ve(Rt(T,De,me,U),dt).n,D.n,D.o)),I.o&&(I.n=xr(D.n,I.n,I.o)),D.t!==I.t){if(D.t===k.COMPLEX||I.t===k.COMPLEX){const R=D.t===k.COMPLEX?D:I,se=D.t===k.COMPLEX?I:D;se.t=k.COMPLEX,se.s=pe(R.s),se.d=R.d.map(()=>se.n)}else if(D.t===k.UNIT||I.t===k.UNIT){const R=D.t===k.UNIT?D:I,se=D.t===k.UNIT?I:D;se.t=k.UNIT,se.u=R.u}else if(D.t===k.COLOR||I.t===k.COLOR){const R=D.t===k.COLOR?D:I,se=D.t===k.COLOR?I:D;se.t=k.COLOR,se.s=R.s,se.d=[0,0,0,1]}}if(D.u!==I.u){let R=I.u?D:I;R=Mi(T,R,I.u?I.u:D.u,!1)}if(I.d&&D.d&&I.d.length!==D.d.length){const R=D.d.length>I.d.length?D:I,se=R===D?I:D;se.d=R.d.map(($i,ur)=>B(se.d[ur])?0:se.d[ur]),se.s=pe(R.s)}const Pn=Q(+z||F,12),en={parent:this,id:Ni++,property:De,target:T,_value:null,_func:sn.func,_ease:Or(_t),_fromNumbers:pe(D.d),_toNumbers:pe(I.d),_strings:pe(I.s),_fromNumber:D.n,_toNumber:I.n,_numbers:pe(D.d),_number:D.n,_unit:I.u,_modifier:Kt,_currentTime:0,_startTime:Cn,_delay:+He,_updateDuration:Pn,_changeDuration:Pn,_absoluteStartTime:In,_tweenType:me,_valueType:I.t,_composition:We,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};We!==Te.none&&lo(en,Fe),isNaN(je)&&(je=en._startTime),qe=Q(Cn+Pn,12),Ce=en,W++,St(this,en)}(isNaN(L)||je<L)&&(L=je),(isNaN(N)||qe>N)&&(N=qe),me===j.TRANSFORM&&(ze=W-te,at=W)}if(!isNaN(ze)){let xe=0;ee(this,me=>{xe>=ze&&xe<at&&(me._renderTransforms=1,me._composition===Te.blend&&ee(Ct.animation,De=>{De.id===me.id&&(De._renderTransforms=1)})),xe++})}}c||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),L?(ee(this,Y=>{Y._startTime-Y._delay||(Y._delay-=L),Y._startTime-=L}),N-=L):L=0,N||(N=F,this.iterationCount=0),this.targets=d,this.duration=N===F?F:ar((N+this._loopDelay)*this.iterationCount-this._loopDelay)||F,this.onRender=v||b.onRender,this._ease=C,this._delay=L,this.iterationDuration=N,this._inlineStyles=U,!this._autoplay&&Se&&this.onRender(this)}stretch(e){const t=this.duration;if(t===jt(e))return this;const r=e/t;return ee(this,i=>{i._updateDuration=jt(i._updateDuration*r),i._changeDuration=jt(i._changeDuration*r),i._currentTime*=r,i._startTime*=r,i._absoluteStartTime*=r}),super.stretch(e)}refresh(){return ee(this,e=>{const t=Rt(e.target,e.property,e._tweenType);Ve(t,dt),e._fromNumbers=pe(dt.d),e._fromNumber=dt.n,e._func&&(Ve(e._func(),I),e._toNumbers=pe(I.d),e._strings=pe(I.s),e._toNumber=I.n)}),this}revert(){return super.revert(),fo(this)}then(e){return super.then(e)}}const Re=(n,e)=>new Bi(n,e,null,0,!1).init(),Fi=["x","y","z"];[...Fi,...or.filter(n=>["X","Y","Z"].some(e=>n.endsWith(e)))];Ye&&(B(CSS)||Object.hasOwnProperty.call(CSS,"registerProperty"));class Li{constructor(){this.animationsEnabled=!0,this.currentAnimations=[]}coinMove(e,t,r,i=500){return this.animationsEnabled?new Promise(s=>{const l=Re({targets:e,translateX:t,translateY:r,duration:i,ease:"out(4)",complete:s});this.currentAnimations.push(l)}):Promise.resolve()}coinBounce(e){return this.animationsEnabled?new Promise(t=>{const r=Re({targets:e,scale:[1,1.2,1],duration:300,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(r)}):Promise.resolve()}correctAnswer(e){return this.animationsEnabled?new Promise(t=>{this.createConfetti();const r=Re({targets:e,scale:[1,1.1,1],backgroundColor:["#ffffff","#95E1D3","#ffffff"],duration:1e3,ease:"inOut(2)",complete:t});this.currentAnimations.push(r)}):Promise.resolve()}wrongAnswer(e){return this.animationsEnabled?new Promise(t=>{const r=Re({targets:e,translateX:[-5,5,-5,5,0],backgroundColor:["#ffffff","#F38181","#ffffff"],duration:500,ease:"inOut(2)",complete:t});this.currentAnimations.push(r)}):Promise.resolve()}tenConversion(e){return this.animationsEnabled?new Promise(t=>{const s=anime({targets:e,translateX:0,translateY:0,scale:[1,.5],rotate:360,duration:800,ease:"inOut(2)",complete:()=>{e.forEach(l=>{l.classList.remove("coin-1"),l.classList.add("coin-10"),l.textContent="10",l.dataset.value="10"});for(let l=1;l<e.length;l++)e[l].remove();Re({targets:e[0],scale:[.5,1.2,1],rotate:[360,0],duration:500,ease:"outElastic(1, .6)",complete:t})}});this.currentAnimations.push(s)}):Promise.resolve()}customerJump(e){return this.animationsEnabled?new Promise(t=>{const r=Re({targets:e,translateY:[-20,0],duration:400,ease:"out(4)",loop:3,complete:t});this.currentAnimations.push(r)}):Promise.resolve()}levelUp(e){return this.animationsEnabled?new Promise(t=>{const r=Re({targets:e,scale:[1,1.5,1],rotate:[0,360],duration:1500,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(r)}):Promise.resolve()}fadeIn(e,t=500){return this.animationsEnabled?new Promise(r=>{const i=Re({targets:e,opacity:[0,1],translateY:[20,0],duration:t,ease:"out(2)",complete:r});this.currentAnimations.push(i)}):(e.style.opacity="1",Promise.resolve())}fadeOut(e,t=500){return this.animationsEnabled?new Promise(r=>{const i=Re({targets:e,opacity:[1,0],translateY:[0,-20],duration:t,ease:"in(2)",complete:r});this.currentAnimations.push(i)}):(e.style.opacity="0",Promise.resolve())}createConfetti(){const e=document.createElement("div");e.className="confetti-container",document.body.appendChild(e);const t=["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3","#F38181"];for(let r=0;r<30;r++){const i=document.createElement("div");i.style.position="absolute",i.style.width="10px",i.style.height="10px",i.style.backgroundColor=t[Math.floor(Math.random()*t.length)],i.style.left=Math.random()*window.innerWidth+"px",i.style.top="-10px",i.style.borderRadius="50%",e.appendChild(i),Re({targets:i,translateY:window.innerHeight+100,translateX:(Math.random()-.5)*200,rotate:Math.random()*720,duration:Math.random()*2e3+1e3,ease:"in(2)",complete:()=>{i.remove()}})}setTimeout(()=>{e.parentNode&&e.remove()},3e3)}createSparkles(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1000",e.style.position="relative",e.appendChild(t);for(let r=0;r<8;r++){const i=document.createElement("div");i.textContent="✨",i.style.position="absolute",i.style.fontSize="20px",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%",i.style.opacity="0",t.appendChild(i),Re({targets:i,opacity:[0,1,0],scale:[.5,1.5,.5],rotate:Math.random()*360,duration:1e3,delay:r*100,ease:"inOut(2)",complete:()=>{i.remove()}})}setTimeout(()=>{t.parentNode&&t.remove()},1500)}stopAllAnimations(){this.currentAnimations.forEach(e=>{e.pause&&e.pause()}),this.currentAnimations=[]}enableAnimations(){this.animationsEnabled=!0}disableAnimations(){this.animationsEnabled=!1}toggleAnimations(){return this.animationsEnabled=!this.animationsEnabled,this.animationsEnabled}}const nt=new Li;class Hi{constructor(){this.storageKey="coin-park-game-data",this.defaultData={currentLevel:1,currentProblemIndex:0,completedProblems:[],totalCoins:50,achievements:[],statistics:{correctAnswers:0,totalAttempts:0,totalPlayTime:0,averageTime:0,bestStreaks:0,currentStreak:0},settings:{soundEnabled:!0,animationsEnabled:!0,volume:.7},lastPlayDate:null}}loadGameData(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);return{...this.defaultData,...t}}}catch(e){console.warn("Failed to load game data:",e)}return{...this.defaultData}}saveGameData(e){try{const t={...e,lastPlayDate:new Date().toISOString()};return localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(t){return console.error("Failed to save game data:",t),!1}}updateProgress(e,t,r,i){const s=this.loadGameData();return s.statistics.totalAttempts+=r,s.statistics.totalPlayTime+=i,t?(s.statistics.correctAnswers++,s.statistics.currentStreak++,s.statistics.bestStreaks=Math.max(s.statistics.bestStreaks,s.statistics.currentStreak),s.completedProblems.includes(e)||s.completedProblems.push(e),s.totalCoins+=Math.max(1,4-r)):s.statistics.currentStreak=0,s.statistics.correctAnswers>0&&(s.statistics.averageTime=s.statistics.totalPlayTime/s.statistics.correctAnswers),t&&(s.currentProblemIndex=e+1),this.saveGameData(s),s}updateSettings(e){const t=this.loadGameData();return t.settings={...t.settings,...e},this.saveGameData(t),t.settings}addAchievement(e,t,r){const i=this.loadGameData();return i.achievements.find(s=>s.id===e)?!1:(i.achievements.push({id:e,title:t,description:r,unlockedAt:new Date().toISOString()}),this.saveGameData(i),!0)}checkAchievements(e){const t=[];return[{id:"first_correct",title:"はじめのいっぽ",description:"はじめてせいかいしました！",condition:()=>e.statistics.correctAnswers>=1},{id:"five_correct",title:"がんばりや",description:"5もんせいかいしました！",condition:()=>e.statistics.correctAnswers>=5},{id:"perfect_streak",title:"パーフェクト",description:"3もんれんぞくせいかい！",condition:()=>e.statistics.currentStreak>=3},{id:"coin_collector",title:"コインコレクター",description:"100まいコインをあつめました！",condition:()=>e.totalCoins>=100},{id:"speed_master",title:"はやわざマスター",description:"へいきん10びょう以内でせいかい！",condition:()=>e.statistics.averageTime<=1e4}].forEach(i=>{i.condition()&&!e.achievements.find(s=>s.id===i.id)&&this.addAchievement(i.id,i.title,i.description)&&t.push(i)}),t}resetGameData(){try{return localStorage.removeItem(this.storageKey),!0}catch(e){return console.error("Failed to reset game data:",e),!1}}exportGameData(){const t={...this.loadGameData(),exportedAt:new Date().toISOString(),version:"1.0.0"};return JSON.stringify(t,null,2)}importGameData(e){try{const t=JSON.parse(e);if(!t.statistics||!t.settings)throw new Error("Invalid game data format");const r={...this.defaultData,...t};return this.saveGameData(r),!0}catch(t){return console.error("Failed to import game data:",t),!1}}getPlayStats(){const e=this.loadGameData(),t=e.statistics.totalAttempts>0?(e.statistics.correctAnswers/e.statistics.totalAttempts*100).toFixed(1):0;return{totalProblems:e.completedProblems.length,correctAnswers:e.statistics.correctAnswers,totalAttempts:e.statistics.totalAttempts,accuracyRate:t+"%",totalPlayTime:this.formatTime(e.statistics.totalPlayTime),averageTime:this.formatTime(e.statistics.averageTime),bestStreak:e.statistics.bestStreaks,currentStreak:e.statistics.currentStreak,totalCoins:e.totalCoins,achievements:e.achievements.length}}formatTime(e){const t=Math.floor(e/1e3),r=Math.floor(t/60),i=t%60;return r>0?`${r}分${i}秒`:`${i}秒`}}const ft=new Hi;class Gi{constructor(){this.calculator=new Ho,this.currentProblem=null,this.registerAmount=0,this.wrongAttempts=0,this.maxAttempts=3,this.problemStartTime=null,this.allProblems=[{items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}],shopType:"くだものやさん"},{items:[{name:"みかん",price:6,emoji:"🍊"},{name:"ぶどう",price:8,emoji:"🍇"}],shopType:"くだものやさん"},{items:[{name:"いちご",price:9,emoji:"🍓"},{name:"もも",price:4,emoji:"🍑"}],shopType:"くだものやさん"},{items:[{name:"にんじん",price:5,emoji:"🥕"},{name:"たまねぎ",price:7,emoji:"🧅"}],shopType:"やおやさん"},{items:[{name:"トマト",price:8,emoji:"🍅"},{name:"きゅうり",price:6,emoji:"🥒"}],shopType:"やおやさん"},{items:[{name:"レタス",price:9,emoji:"🥬"},{name:"だいこん",price:3,emoji:"🌿"}],shopType:"やおやさん"},{items:[{name:"さけ",price:8,emoji:"🐟"},{name:"まぐろ",price:9,emoji:"🐠"}],shopType:"さかなやさん"},{items:[{name:"えび",price:7,emoji:"🦐"},{name:"いか",price:6,emoji:"🦑"}],shopType:"さかなやさん"},{items:[{name:"たこ",price:5,emoji:"🐙"},{name:"かに",price:8,emoji:"🦀"}],shopType:"さかなやさん"},{items:[{name:"チョコ",price:6,emoji:"🍫"},{name:"アメ",price:7,emoji:"🍬"}],shopType:"おかしやさん"},{items:[{name:"ケーキ",price:9,emoji:"🍰"},{name:"クッキー",price:4,emoji:"🍪"}],shopType:"おかしやさん"},{items:[{name:"ドーナツ",price:8,emoji:"🍩"},{name:"アイス",price:5,emoji:"🍦"}],shopType:"おかしやさん"},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ノート",price:7,emoji:"📓"},{name:"ペン",price:9,emoji:"🖊️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"クレヨン",price:5,emoji:"🖍️"},{name:"はさみ",price:8,emoji:"✂️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"つみき",price:4,emoji:"🧱"}],shopType:"おもちゃやさん"},{items:[{name:"ぬいぐるみ",price:8,emoji:"🧸"},{name:"パズル",price:6,emoji:"🧩"}],shopType:"おもちゃやさん"},{items:[{name:"くるま",price:7,emoji:"🚗"},{name:"でんしゃ",price:5,emoji:"🚆"}],shopType:"おもちゃやさん"}],this.totalProblems=10,this.problems=this.generateRandomProblems(),this.gameData=ft.loadGameData(),this.currentProblemIndex=this.gameData.currentProblemIndex}start(){this.initElements(),this.setupDragAndDrop(),this.setupEventListeners(),this.loadSettings(),this.updateUI(),this.loadProblem()}initElements(){this.walletElement=document.getElementById("wallet"),this.registerElement=document.getElementById("register-coins"),this.registerAmountElement=document.getElementById("register-amount"),this.checkAnswerBtn=document.getElementById("check-answer"),this.feedbackElement=document.getElementById("feedback"),this.feedbackMessageElement=document.getElementById("feedback-message"),this.nextProblemBtn=document.getElementById("next-problem"),this.customerMessageElement=document.getElementById("customer-message"),this.totalAmountElement=document.getElementById("total-amount"),this.totalHintElement=document.getElementById("total-hint"),this.hintButtonElement=document.getElementById("hint-button"),this.shopTitleElement=document.querySelector(".shop-title"),this.shopItemsElement=document.getElementById("shop-items"),this.totalCoinsElement=document.getElementById("total-coins"),this.currentProblemElement=document.getElementById("current-problem"),this.totalProblemsElement=document.getElementById("total-problems")}setupDragAndDrop(){this.tenCoinsSortable=new w(document.getElementById("ten-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Ze.play("coin-pickup"),nt.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.oneCoinsSortable=new w(document.getElementById("one-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Ze.play("coin-pickup"),nt.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.registerSortable=new w(this.registerElement,{group:{name:"coins",pull:!0,put:!0},animation:150,onAdd:e=>{Ze.play("coin-drop"),this.updateRegisterAmount(),nt.coinBounce(e.item)},onRemove:e=>{this.updateRegisterAmount()}})}setupEventListeners(){this.checkAnswerBtn.addEventListener("click",()=>{this.checkAnswer()}),this.nextProblemBtn.addEventListener("click",()=>{this.nextProblem()}),this.hintButtonElement.addEventListener("click",()=>{this.showHint()}),document.getElementById("settings-btn").addEventListener("click",()=>{this.showSettings()}),document.getElementById("help-btn").addEventListener("click",()=>{this.showHelp()})}generateRandomProblems(){return[...this.allProblems].sort(()=>Math.random()-.5).slice(0,this.totalProblems)}loadProblem(){if(this.currentProblemIndex>=this.totalProblems){this.showGameComplete();return}this.currentProblem=this.problems[this.currentProblemIndex],this.wrongAttempts=0,this.registerAmount=0,this.problemStartTime=Date.now(),this.registerElement.innerHTML="",this.updateRegisterAmount(),this.updateShopDisplay(),this.updateCustomerMessage();const e=this.currentProblem.items.reduce((t,r)=>t+r.price,0);this.totalAmountElement.textContent=e,this.totalHintElement.style.display="none",this.hintButtonElement.style.display="block",this.initializeCoins(e),this.updateUI()}updateShopDisplay(){this.shopTitleElement.textContent=this.currentProblem.shopType,this.shopItemsElement.innerHTML="",this.currentProblem.items.forEach(e=>{const t=document.createElement("div");t.className="shop-item",t.innerHTML=`
        <div class="item-image">${e.emoji}</div>
        <div class="item-name">${e.name}</div>
        <div class="item-price">${e.price}円</div>
      `,this.shopItemsElement.appendChild(t)})}updateCustomerMessage(){const e=this.currentProblem.items.map(t=>t.name).join("と");this.customerMessageElement.textContent=`${e}ください`}initializeCoins(e){document.getElementById("ten-coins").innerHTML="",document.getElementById("one-coins").innerHTML="";const t=Math.max(2,Math.ceil(e/10)+1),r=Math.max(10,e%10+5);for(let i=0;i<t;i++){const s=this.createCoin(10);document.getElementById("ten-coins").appendChild(s)}for(let i=0;i<r;i++){const s=this.createCoin(1);document.getElementById("one-coins").appendChild(s)}}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}updateRegisterAmount(){const e=this.registerElement.querySelectorAll(".coin");this.registerAmount=Array.from(e).reduce((t,r)=>t+parseInt(r.dataset.value),0),this.registerAmountElement.textContent=`${this.registerAmount}円`}checkAnswer(){const e=this.currentProblem.items.reduce((t,r)=>t+r.price,0);this.registerAmount===e?this.showCorrectFeedback():(this.wrongAttempts++,this.wrongAttempts>=this.maxAttempts?this.showCorrectAnswerWithExplanation(e):this.showIncorrectFeedback())}showCorrectFeedback(){Ze.play("success"),nt.correctAnswer(this.registerElement);const e=Date.now()-this.problemStartTime,t=this.wrongAttempts+1;this.gameData=ft.updateProgress(this.currentProblemIndex,!0,t,e);const r=ft.checkAchievements(this.gameData);let i="";r.length>0&&(i='<div class="achievement-notification">',r.forEach(p=>{i+=`<p>🏆 ${p.title}: ${p.description}</p>`}),i+="</div>");const s=Math.max(1,4-t);this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🎉 せいかい！</h2>
        <p>よくできました！</p>
        <p>💰 ${s}まいコインをゲット！</p>
        ${i}
      </div>
    `,this.showFeedback(),this.updateUI();const l=document.querySelector(".customer");nt.customerJump(l),nt.createSparkles(l)}showIncorrectFeedback(){Ze.play("wrong"),nt.wrongAnswer(this.registerElement);const e=this.maxAttempts-this.wrongAttempts;let t=`
      <div class="error-feedback">
        <h2>❌ ちがいます</h2>
        <p>もう一度かんがえてみましょう</p>
    `;e===1&&(t+="<p>あと1回だけチャンスがあります</p>"),t+="</div>",this.feedbackMessageElement.innerHTML=t,this.showFeedback()}showCorrectAnswerWithExplanation(e){Ze.play("wrong");const t=this.calculator.visualizeCarryOver(this.currentProblem.items[0].price,this.currentProblem.items[1].price);let r='<div class="calculation-steps">';t.forEach(i=>{r+=`<div class="calculation-step">${i.message||i.action}</div>`}),r+="</div>",this.feedbackMessageElement.innerHTML=`
      <div class="error-feedback">
        <h2>📚 せいかいは ${e}円 です</h2>
        <p>けいさんのしかた：</p>
        ${r}
      </div>
    `,this.showFeedback()}showFeedback(){this.feedbackElement.style.display="flex",this.feedbackElement.style.opacity="1"}hideFeedback(){this.feedbackElement.style.display!=="none"&&(this.feedbackElement.style.opacity="0",setTimeout(()=>{this.feedbackElement.style.display="none",this.feedbackElement.style.opacity="1"},300))}nextProblem(){this.hideFeedback(),this.currentProblemIndex++,setTimeout(()=>{console.log(`Loading problem ${this.currentProblemIndex+1}/${this.totalProblems}`),this.loadProblem()},100)}showGameComplete(){const e=ft.getPlayStats();this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🏆 ゲームクリア！</h2>
        <p>10もんだいすべてクリアしました！</p>
        <p>せいかいりつ: ${e.accuracyRate}</p>
        <p>おつかれさまでした！</p>
      </div>
    `,this.showFeedback(),this.nextProblemBtn.textContent="もう一度あそぶ";const t=this.nextProblemBtn.cloneNode(!0);this.nextProblemBtn.parentNode.replaceChild(t,this.nextProblemBtn),this.nextProblemBtn=t,this.nextProblemBtn.addEventListener("click",()=>{this.currentProblemIndex=0,this.problems=this.generateRandomProblems(),this.hideFeedback(),setTimeout(()=>{console.log("Restarting game with new problems"),this.loadProblem(),this.nextProblemBtn.textContent="つぎのもんだい"},100)})}loadSettings(){Ze.enableSound=this.gameData.settings.soundEnabled,Ze.setVolume(this.gameData.settings.volume),nt.animationsEnabled=this.gameData.settings.animationsEnabled}updateUI(){this.totalCoinsElement.textContent=this.gameData.totalCoins,this.currentProblemElement.textContent=this.currentProblemIndex+1,this.totalProblemsElement.textContent=this.totalProblems}showHint(){Ze.play("ten-conversion"),this.totalHintElement.style.display="block",this.hintButtonElement.style.display="none",this.totalHintElement.classList.add("fade-in"),setTimeout(()=>{this.totalHintElement.classList.remove("fade-in")},500)}showSettings(){const e=ft.getPlayStats(),t=`
      <div class="settings-modal">
        <h3>設定</h3>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="sound-toggle" ${this.gameData.settings.soundEnabled?"checked":""}>
            音声をONにする
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="animation-toggle" ${this.gameData.settings.animationsEnabled?"checked":""}>
            アニメーションをONにする
          </label>
        </div>
        
        <h4>ゲームとうけい</h4>
        <div class="stats">
          <p>せいかいすう: ${e.correctAnswers}</p>
          <p>せいかいりつ: ${e.accuracyRate}</p>
          <p>さいこうれんぞく: ${e.bestStreak}</p>
          <p>コインすう: ${e.totalCoins}</p>
          <p>じっせき: ${e.achievements}こ</p>
        </div>
        
        <div class="setting-buttons">
          <button onclick="this.closest('.settings-modal').remove()">とじる</button>
          <button onclick="if(confirm('ほんとうにリセットしますか？')) { StorageManager.resetGameData(); location.reload(); }">データリセット</button>
        </div>
      </div>
    `,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:2000;display:flex;align-items:center;justify-content:center;",r.innerHTML=t,document.body.appendChild(r),r.querySelector("#sound-toggle").addEventListener("change",i=>{this.gameData.settings.soundEnabled=i.target.checked,ft.updateSettings(this.gameData.settings),this.loadSettings()}),r.querySelector("#animation-toggle").addEventListener("change",i=>{this.gameData.settings.animationsEnabled=i.target.checked,ft.updateSettings(this.gameData.settings),this.loadSettings()}),r.addEventListener("click",i=>{i.target===r&&r.remove()})}showHelp(){const e=`
      <div class="help-modal">
        <h3>あそびかた</h3>
        <div class="help-content">
          <p>1. おきゃくさんがほしいものをいいます</p>
          <p>2. おねだんをけいさんします</p>
          <p>3. おさいふからコインをレジにうつします</p>
          <p>4. 「おしはらい」ボタンをおします</p>
          
          <h4>コインについて</h4>
          <p>🪙 10円玉：きんいろのコイン</p>
          <p>🪙 1円玉：ぎんいろのコイン</p>
          
          <h4>けいさんのコツ</h4>
          <p>10になるくみあわせをさがしてみよう！</p>
          <p>たとえば 7 + 5 = 12 のときは</p>
          <p>7 + 3 = 10、あと 2 をたして 12！</p>
        </div>
        <button onclick="this.closest('.help-modal').parentElement.remove()" 
                style="padding:10px 20px;font-size:1.2rem;margin-top:20px;">とじる</button>
      </div>
    `,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:2000;display:flex;align-items:center;justify-content:center;",t.innerHTML=e,document.body.appendChild(t),t.addEventListener("click",r=>{r.target===t&&t.remove()})}}class Vi{constructor(){this.gameEngine=new Gi,this.init()}init(){document.addEventListener("DOMContentLoaded",()=>{this.gameEngine.start()})}}new Vi;
