(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function co(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),t.push.apply(t,n)}return t}function Ue(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?co(Object(t),!0).forEach(function(n){mr(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):co(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function cn(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cn=function(e){return typeof e}:cn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(o)}function mr(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Ke(){return Ke=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ke.apply(this,arguments)}function hr(o,e){if(o==null)return{};var t={},n=Object.keys(o),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=o[i]);return t}function _r(o,e){if(o==null)return{};var t=hr(o,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var gr="1.15.6";function Qe(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var ze=Qe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zt=Qe(/Edge/i),fo=Qe(/firefox/i),Vt=Qe(/safari/i)&&!Qe(/chrome/i)&&!Qe(/android/i),zn=Qe(/iP(ad|od|hone)/i),Ro=Qe(/chrome/i)&&Qe(/android/i),Bo={capture:!1,passive:!1};function O(o,e,t){o.addEventListener(e,t,!ze&&Bo)}function P(o,e,t){o.removeEventListener(e,t,!ze&&Bo)}function vn(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function Lo(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function Be(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&vn(o,e):vn(o,e))||n&&o===t)return o;if(o===t)break}while(o=Lo(o))}return null}var po=/\s+/g;function Ae(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(po," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(po," ")}}function A(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function xt(o,e){var t="";if(typeof o=="string")t=o;else do{var n=A(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Fo(o,e,t){if(o){var n=o.getElementsByTagName(e),i=0,s=n.length;if(t)for(;i<s;i++)t(n[i],i);return n}return[]}function qe(){var o=document.scrollingElement;return o||document.documentElement}function J(o,e,t,n,i){if(!(!o.getBoundingClientRect&&o!==window)){var s,l,p,d,c,g,r;if(o!==window&&o.parentNode&&o!==qe()?(s=o.getBoundingClientRect(),l=s.top,p=s.left,d=s.bottom,c=s.right,g=s.height,r=s.width):(l=0,p=0,d=window.innerHeight,c=window.innerWidth,g=window.innerHeight,r=window.innerWidth),(e||t)&&o!==window&&(i=i||o.parentNode,!ze))do if(i&&i.getBoundingClientRect&&(A(i,"transform")!=="none"||t&&A(i,"position")!=="static")){var a=i.getBoundingClientRect();l-=a.top+parseInt(A(i,"border-top-width")),p-=a.left+parseInt(A(i,"border-left-width")),d=l+s.height,c=p+s.width;break}while(i=i.parentNode);if(n&&o!==window){var u=xt(i||o),f=u&&u.a,m=u&&u.d;u&&(l/=m,p/=f,r/=f,g/=m,d=l+g,c=p+r)}return{top:l,left:p,bottom:d,right:c,width:r,height:g}}}function mo(o,e,t){for(var n=at(o,!0),i=J(o)[e];n;){var s=J(n)[t],l=void 0;if(l=i>=s,!l)return n;if(n===qe())break;n=at(n,!1)}return!1}function It(o,e,t,n){for(var i=0,s=0,l=o.children;s<l.length;){if(l[s].style.display!=="none"&&l[s]!==w.ghost&&(n||l[s]!==w.dragged)&&Be(l[s],t.draggable,o,!1)){if(i===e)return l[s];i++}s++}return null}function eo(o,e){for(var t=o.lastElementChild;t&&(t===w.ghost||A(t,"display")==="none"||e&&!vn(t,e));)t=t.previousElementSibling;return t||null}function Pe(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==w.clone&&(!e||vn(o,e))&&t++;return t}function ho(o){var e=0,t=0,n=qe();if(o)do{var i=xt(o),s=i.a,l=i.d;e+=o.scrollLeft*s,t+=o.scrollTop*l}while(o!==n&&(o=o.parentNode));return[e,t]}function vr(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function at(o,e){if(!o||!o.getBoundingClientRect)return qe();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=A(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return qe();if(n||e)return t;n=!0}}while(t=t.parentNode);return qe()}function yr(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function On(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var $t;function Ho(o,e){return function(){if(!$t){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),$t=setTimeout(function(){$t=void 0},e)}}}function br(){clearTimeout($t),$t=void 0}function Go(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function Vo(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function $o(o,e,t){var n={};return Array.from(o.children).forEach(function(i){var s,l,p,d;if(!(!Be(i,e.draggable,o,!1)||i.animated||i===t)){var c=J(i);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,c.left),n.top=Math.min((l=n.top)!==null&&l!==void 0?l:1/0,c.top),n.right=Math.max((p=n.right)!==null&&p!==void 0?p:-1/0,c.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var be="Sortable"+new Date().getTime();function Tr(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(A(i,"display")==="none"||i===w.ghost)){o.push({target:i,rect:J(i)});var s=Ue({},o[o.length-1].rect);if(i.thisAnimationDuration){var l=xt(i,!0);l&&(s.top-=l.f,s.left-=l.e)}i.fromRect=s}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(vr(o,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,l=0;o.forEach(function(p){var d=0,c=p.target,g=c.fromRect,r=J(c),a=c.prevFromRect,u=c.prevToRect,f=p.rect,m=xt(c,!0);m&&(r.top-=m.f,r.left-=m.e),c.toRect=r,c.thisAnimationDuration&&On(a,r)&&!On(g,r)&&(f.top-r.top)/(f.left-r.left)===(g.top-r.top)/(g.left-r.left)&&(d=Ar(f,a,u,i.options)),On(r,g)||(c.prevFromRect=g,c.prevToRect=r,d||(d=i.options.animation),i.animate(c,f,r,d)),d&&(s=!0,l=Math.max(l,d),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},d),c.thisAnimationDuration=d)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),o=[]},animate:function(n,i,s,l){if(l){A(n,"transition",""),A(n,"transform","");var p=xt(this.el),d=p&&p.a,c=p&&p.d,g=(i.left-s.left)/(d||1),r=(i.top-s.top)/(c||1);n.animatingX=!!g,n.animatingY=!!r,A(n,"transform","translate3d("+g+"px,"+r+"px,0)"),this.forRepaintDummy=wr(n),A(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),A(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){A(n,"transition",""),A(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function wr(o){return o.offsetWidth}function Ar(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var vt=[],kn={initializeByDefault:!0},Jt={mount:function(e){for(var t in kn)kn.hasOwnProperty(t)&&!(t in e)&&(e[t]=kn[t]);vt.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),vt.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var s=e+"Global";vt.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][s]&&t[l.pluginName][s](Ue({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](Ue({sortable:t},n)))})},initializePlugins:function(e,t,n,i){vt.forEach(function(p){var d=p.pluginName;if(!(!e.options[d]&&!p.initializeByDefault)){var c=new p(e,t,e.options);c.sortable=e,c.options=e.options,e[d]=c,Ke(n,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var l=this.modifyOption(e,s,e.options[s]);typeof l<"u"&&(e.options[s]=l)}},getEventProperties:function(e,t){var n={};return vt.forEach(function(i){typeof i.eventProperties=="function"&&Ke(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return vt.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],n))}),i}};function Er(o){var e=o.sortable,t=o.rootEl,n=o.name,i=o.targetEl,s=o.cloneEl,l=o.toEl,p=o.fromEl,d=o.oldIndex,c=o.newIndex,g=o.oldDraggableIndex,r=o.newDraggableIndex,a=o.originalEvent,u=o.putSortable,f=o.extraEventProperties;if(e=e||t&&t[be],!!e){var m,_=e.options,h="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ze&&!Zt?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=l||t,m.from=p||t,m.item=i||t,m.clone=s,m.oldIndex=d,m.newIndex=c,m.oldDraggableIndex=g,m.newDraggableIndex=r,m.originalEvent=a,m.pullMode=u?u.lastPutMode:void 0;var v=Ue(Ue({},f),Jt.getEventProperties(n,e));for(var b in v)m[b]=v[b];t&&t.dispatchEvent(m),_[h]&&_[h].call(e,m)}}var Sr=["evt"],ye=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,s=_r(n,Sr);Jt.pluginEvent.bind(w)(e,t,Ue({dragEl:y,parentEl:$,ghostEl:x,rootEl:H,nextEl:pt,lastDownEl:dn,cloneEl:V,cloneHidden:it,dragStarted:Lt,putSortable:oe,activeSortable:w.active,originalEvent:i,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:rt,hideGhostForTarget:Yo,unhideGhostForTarget:jo,cloneNowHidden:function(){it=!0},cloneNowShown:function(){it=!1},dispatchSortableEvent:function(p){fe({sortable:t,name:p,originalEvent:i})}},s))};function fe(o){Er(Ue({putSortable:oe,cloneEl:V,targetEl:y,rootEl:H,oldIndex:Et,oldDraggableIndex:Xt,newIndex:Ee,newDraggableIndex:rt},o))}var y,$,x,H,pt,dn,V,it,Et,Ee,Xt,rt,tn,oe,Tt=!1,yn=!1,bn=[],ut,Ne,Mn,Nn,_o,go,Lt,yt,qt,Ut=!1,nn=!1,fn,le,Rn=[],Yn=!1,Tn=[],Sn=typeof document<"u",on=zn,vo=Zt||ze?"cssFloat":"float",xr=Sn&&!Ro&&!zn&&"draggable"in document.createElement("div"),Xo=function(){if(Sn){if(ze)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),qo=function(e,t){var n=A(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=It(e,0,t),l=It(e,1,t),p=s&&A(s),d=l&&A(l),c=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+J(s).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+J(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&p.float&&p.float!=="none"){var r=p.float==="left"?"left":"right";return l&&(d.clear==="both"||d.clear===r)?"vertical":"horizontal"}return s&&(p.display==="block"||p.display==="flex"||p.display==="table"||p.display==="grid"||c>=i&&n[vo]==="none"||l&&n[vo]==="none"&&c+g>i)?"vertical":"horizontal"},Cr=function(e,t,n){var i=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height,p=n?t.left:t.top,d=n?t.right:t.bottom,c=n?t.width:t.height;return i===p||s===d||i+l/2===p+c/2},Dr=function(e,t){var n;return bn.some(function(i){var s=i[be].options.emptyInsertThreshold;if(!(!s||eo(i))){var l=J(i),p=e>=l.left-s&&e<=l.right+s,d=t>=l.top-s&&t<=l.bottom+s;if(p&&d)return n=i}}),n},Uo=function(e){function t(s,l){return function(p,d,c,g){var r=p.options.group.name&&d.options.group.name&&p.options.group.name===d.options.group.name;if(s==null&&(l||r))return!0;if(s==null||s===!1)return!1;if(l&&s==="clone")return s;if(typeof s=="function")return t(s(p,d,c,g),l)(p,d,c,g);var a=(l?p:d).options.group.name;return s===!0||typeof s=="string"&&s===a||s.join&&s.indexOf(a)>-1}}var n={},i=e.group;(!i||cn(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Yo=function(){!Xo&&x&&A(x,"display","none")},jo=function(){!Xo&&x&&A(x,"display","")};Sn&&!Ro&&document.addEventListener("click",function(o){if(yn)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),yn=!1,!1},!0);var ct=function(e){if(y){e=e.touches?e.touches[0]:e;var t=Dr(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[be]._onDragOver(n)}}},Ir=function(e){y&&y.parentNode[be]._isOutsideThisEl(e.target)};function w(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=Ke({},e),o[be]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qo(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,p){l.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:w.supportPointer!==!1&&"PointerEvent"in window&&(!Vt||zn),emptyInsertThreshold:5};Jt.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);Uo(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:xr,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?O(o,"pointerdown",this._onTapStart):(O(o,"mousedown",this._onTapStart),O(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(o,"dragover",this),O(o,"dragenter",this)),bn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ke(this,Tr())}w.prototype={constructor:w,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(yt=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,s=i.preventOnFilter,l=e.type,p=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(p||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,g=i.filter;if(Lr(n),!y&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Vt&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Be(d,i.draggable,n,!1),!(d&&d.animated)&&dn!==d)){if(Et=Pe(d),Xt=Pe(d,i.draggable),typeof g=="function"){if(g.call(this,e,d,this)){fe({sortable:t,rootEl:c,name:"filter",targetEl:d,toEl:n,fromEl:n}),ye("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(r){if(r=Be(c,r.trim(),n,!1),r)return fe({sortable:t,rootEl:r,name:"filter",targetEl:d,fromEl:n,toEl:n}),ye("filter",t,{evt:e}),!0}),g)){s&&e.preventDefault();return}i.handle&&!Be(c,i.handle,n,!1)||this._prepareDragStart(e,p,d)}}},_prepareDragStart:function(e,t,n){var i=this,s=i.el,l=i.options,p=s.ownerDocument,d;if(n&&!y&&n.parentNode===s){var c=J(n);if(H=s,y=n,$=y.parentNode,pt=y.nextSibling,dn=n,tn=l.group,w.dragged=y,ut={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},_o=ut.clientX-c.left,go=ut.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",d=function(){if(ye("delayEnded",i,{evt:e}),w.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!fo&&i.nativeDraggable&&(y.draggable=!0),i._triggerDragStart(e,t),fe({sortable:i,name:"choose",originalEvent:e}),Ae(y,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){Fo(y,g.trim(),Bn)}),O(p,"dragover",ct),O(p,"mousemove",ct),O(p,"touchmove",ct),l.supportPointer?(O(p,"pointerup",i._onDrop),!this.nativeDraggable&&O(p,"pointercancel",i._onDrop)):(O(p,"mouseup",i._onDrop),O(p,"touchend",i._onDrop),O(p,"touchcancel",i._onDrop)),fo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ye("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Zt||ze))){if(w.eventCanceled){this._onDrop();return}l.supportPointer?(O(p,"pointerup",i._disableDelayedDrag),O(p,"pointercancel",i._disableDelayedDrag)):(O(p,"mouseup",i._disableDelayedDrag),O(p,"touchend",i._disableDelayedDrag),O(p,"touchcancel",i._disableDelayedDrag)),O(p,"mousemove",i._delayedDragTouchMoveHandler),O(p,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&O(p,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(d,l.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Bn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._disableDelayedDrag),P(e,"touchend",this._disableDelayedDrag),P(e,"touchcancel",this._disableDelayedDrag),P(e,"pointerup",this._disableDelayedDrag),P(e,"pointercancel",this._disableDelayedDrag),P(e,"mousemove",this._delayedDragTouchMoveHandler),P(e,"touchmove",this._delayedDragTouchMoveHandler),P(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):t?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(y,"dragend",this),O(H,"dragstart",this._onDragStart));try{document.selection?pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Tt=!1,H&&y){ye("dragStarted",this,{evt:t}),this.nativeDraggable&&O(document,"dragover",Ir);var n=this.options;!e&&Ae(y,n.dragClass,!1),Ae(y,n.ghostClass,!0),w.active=this,e&&this._appendGhost(),fe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ne){this._lastX=Ne.clientX,this._lastY=Ne.clientY,Yo();for(var e=document.elementFromPoint(Ne.clientX,Ne.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ne.clientX,Ne.clientY),e!==t);)t=e;if(y.parentNode[be]._isOutsideThisEl(e),t)do{if(t[be]){var n=void 0;if(n=t[be]._onDragOver({clientX:Ne.clientX,clientY:Ne.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Lo(t));jo()}},_onTouchMove:function(e){if(ut){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,l=x&&xt(x,!0),p=x&&l&&l.a,d=x&&l&&l.d,c=on&&le&&ho(le),g=(s.clientX-ut.clientX+i.x)/(p||1)+(c?c[0]-Rn[0]:0)/(p||1),r=(s.clientY-ut.clientY+i.y)/(d||1)+(c?c[1]-Rn[1]:0)/(d||1);if(!w.active&&!Tt){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(x){l?(l.e+=g-(Mn||0),l.f+=r-(Nn||0)):l={a:1,b:0,c:0,d:1,e:g,f:r};var a="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");A(x,"webkitTransform",a),A(x,"mozTransform",a),A(x,"msTransform",a),A(x,"transform",a),Mn=g,Nn=r,Ne=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:H,t=J(y,!0,on,!0,e),n=this.options;if(on){for(le=e;A(le,"position")==="static"&&A(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=qe()),t.top+=le.scrollTop,t.left+=le.scrollLeft):le=qe(),Rn=ho(le)}x=y.cloneNode(!0),Ae(x,n.ghostClass,!1),Ae(x,n.fallbackClass,!0),Ae(x,n.dragClass,!0),A(x,"transition",""),A(x,"transform",""),A(x,"box-sizing","border-box"),A(x,"margin",0),A(x,"top",t.top),A(x,"left",t.left),A(x,"width",t.width),A(x,"height",t.height),A(x,"opacity","0.8"),A(x,"position",on?"absolute":"fixed"),A(x,"zIndex","100000"),A(x,"pointerEvents","none"),w.ghost=x,e.appendChild(x),A(x,"transform-origin",_o/parseInt(x.style.width)*100+"% "+go/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,s=n.options;if(ye("dragStart",this,{evt:e}),w.eventCanceled){this._onDrop();return}ye("setupClone",this),w.eventCanceled||(V=Vo(y),V.removeAttribute("id"),V.draggable=!1,V.style["will-change"]="",this._hideClone(),Ae(V,this.options.chosenClass,!1),w.clone=V),n.cloneId=pn(function(){ye("clone",n),!w.eventCanceled&&(n.options.removeCloneOnHide||H.insertBefore(V,y),n._hideClone(),fe({sortable:n,name:"clone"}))}),!t&&Ae(y,s.dragClass,!0),t?(yn=!0,n._loopId=setInterval(n._emulateDragOver,50)):(P(document,"mouseup",n._onDrop),P(document,"touchend",n._onDrop),P(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(n,i,y)),O(document,"drop",n),A(y,"transform","translateZ(0)")),Tt=!0,n._dragStartId=pn(n._dragStarted.bind(n,t,e)),O(document,"selectstart",n),Lt=!0,window.getSelection().removeAllRanges(),Vt&&A(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,s,l,p=this.options,d=p.group,c=w.active,g=tn===d,r=p.sort,a=oe||c,u,f=this,m=!1;if(Yn)return;function _(U,T){ye(U,f,Ue({evt:e,isOwner:g,axis:u?"vertical":"horizontal",revert:l,dragRect:i,targetRect:s,canSort:r,fromSortable:a,target:n,completed:v,onMove:function(ae,et){return rn(H,t,y,i,ae,J(ae),e,et)},changed:b},T))}function h(){_("dragOverAnimationCapture"),f.captureAnimationState(),f!==a&&a.captureAnimationState()}function v(U){return _("dragOverCompleted",{insertion:U}),U&&(g?c._hideClone():c._showClone(f),f!==a&&(Ae(y,oe?oe.options.ghostClass:c.options.ghostClass,!1),Ae(y,p.ghostClass,!0)),oe!==f&&f!==w.active?oe=f:f===w.active&&oe&&(oe=null),a===f&&(f._ignoreWhileAnimating=n),f.animateAll(function(){_("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==a&&(a.animateAll(),a._ignoreWhileAnimating=null)),(n===y&&!y.animated||n===t&&!n.animated)&&(yt=null),!p.dragoverBubble&&!e.rootEl&&n!==document&&(y.parentNode[be]._isOutsideThisEl(e.target),!U&&ct(e)),!p.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function b(){Ee=Pe(y),rt=Pe(y,p.draggable),fe({sortable:f,name:"change",toEl:t,newIndex:Ee,newDraggableIndex:rt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Be(n,p.draggable,t,!0),_("dragOver"),w.eventCanceled)return m;if(y.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||f._ignoreWhileAnimating===n)return v(!1);if(yn=!1,c&&!p.disabled&&(g?r||(l=$!==H):oe===this||(this.lastPutMode=tn.checkPull(this,c,y,e))&&d.checkPut(this,c,y,e))){if(u=this._getDirection(e,n)==="vertical",i=J(y),_("dragOverValid"),w.eventCanceled)return m;if(l)return $=H,h(),this._hideClone(),_("revert"),w.eventCanceled||(pt?H.insertBefore(y,pt):H.appendChild(y)),v(!0);var S=eo(t,p.draggable);if(!S||Mr(e,u,this)&&!S.animated){if(S===y)return v(!1);if(S&&t===e.target&&(n=S),n&&(s=J(n)),rn(H,t,y,i,n,s,e,!!n)!==!1)return h(),S&&S.nextSibling?t.insertBefore(y,S.nextSibling):t.appendChild(y),$=t,b(),v(!0)}else if(S&&kr(e,u,this)){var D=It(t,0,p,!0);if(D===y)return v(!1);if(n=D,s=J(n),rn(H,t,y,i,n,s,e,!1)!==!1)return h(),t.insertBefore(y,D),$=t,b(),v(!0)}else if(n.parentNode===t){s=J(n);var M=0,G,j=y.parentNode!==t,E=!Cr(y.animated&&y.toRect||i,n.animated&&n.toRect||s,u),ie=u?"top":"left",X=mo(n,"top","top")||mo(y,"top","top"),q=X?X.scrollTop:void 0;yt!==n&&(G=s[ie],Ut=!1,nn=!E&&p.invertSwap||j),M=Nr(e,n,s,u,E?1:p.swapThreshold,p.invertedSwapThreshold==null?p.swapThreshold:p.invertedSwapThreshold,nn,yt===n);var K;if(M!==0){var N=Pe(y);do N-=M,K=$.children[N];while(K&&(A(K,"display")==="none"||K===x))}if(M===0||K===n)return v(!1);yt=n,qt=M;var F=n.nextElementSibling,W=!1;W=M===1;var Se=rn(H,t,y,i,n,s,e,W);if(Se!==!1)return(Se===1||Se===-1)&&(W=Se===1),Yn=!0,setTimeout(Or,30),h(),W&&!F?t.appendChild(y):n.parentNode.insertBefore(y,W?F:n),X&&Go(X,0,q-X.scrollTop),$=y.parentNode,G!==void 0&&!nn&&(fn=Math.abs(G-J(n)[ie])),b(),v(!0)}if(t.contains(y))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){P(document,"mousemove",this._onTouchMove),P(document,"touchmove",this._onTouchMove),P(document,"pointermove",this._onTouchMove),P(document,"dragover",ct),P(document,"mousemove",ct),P(document,"touchmove",ct)},_offUpEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._onDrop),P(e,"touchend",this._onDrop),P(e,"pointerup",this._onDrop),P(e,"pointercancel",this._onDrop),P(e,"touchcancel",this._onDrop),P(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(Ee=Pe(y),rt=Pe(y,n.draggable),ye("drop",this,{evt:e}),$=y&&y.parentNode,Ee=Pe(y),rt=Pe(y,n.draggable),w.eventCanceled){this._nulling();return}Tt=!1,nn=!1,Ut=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),jn(this.cloneId),jn(this._dragStartId),this.nativeDraggable&&(P(document,"drop",this),P(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vt&&A(document.body,"user-select",""),A(y,"transform",""),e&&(Lt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(H===$||oe&&oe.lastPutMode!=="clone")&&V&&V.parentNode&&V.parentNode.removeChild(V),y&&(this.nativeDraggable&&P(y,"dragend",this),Bn(y),y.style["will-change"]="",Lt&&!Tt&&Ae(y,oe?oe.options.ghostClass:this.options.ghostClass,!1),Ae(y,this.options.chosenClass,!1),fe({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==$?(Ee>=0&&(fe({rootEl:$,name:"add",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"remove",toEl:$,originalEvent:e}),fe({rootEl:$,name:"sort",toEl:$,fromEl:H,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),oe&&oe.save()):Ee!==Et&&Ee>=0&&(fe({sortable:this,name:"update",toEl:$,originalEvent:e}),fe({sortable:this,name:"sort",toEl:$,originalEvent:e})),w.active&&((Ee==null||Ee===-1)&&(Ee=Et,rt=Xt),fe({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ye("nulling",this),H=y=$=x=pt=V=dn=it=ut=Ne=Lt=Ee=rt=Et=Xt=yt=qt=oe=tn=w.dragged=w.ghost=w.clone=w.active=null,Tn.forEach(function(e){e.checked=!0}),Tn.length=Mn=Nn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Pr(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,s=n.length,l=this.options;i<s;i++)t=n[i],Be(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Br(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(s,l){var p=i.children[l];Be(p,this.options.draggable,i,!1)&&(n[s]=p)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(i.removeChild(n[s]),i.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Jt.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&Uo(n)},destroy:function(){ye("destroy",this);var e=this.el;e[be]=null,P(e,"mousedown",this._onTapStart),P(e,"touchstart",this._onTapStart),P(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(P(e,"dragover",this),P(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bn.splice(bn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!it){if(ye("hideClone",this),w.eventCanceled)return;A(V,"display","none"),this.options.removeCloneOnHide&&V.parentNode&&V.parentNode.removeChild(V),it=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(it){if(ye("showClone",this),w.eventCanceled)return;y.parentNode==H&&!this.options.group.revertClone?H.insertBefore(V,y):pt?H.insertBefore(V,pt):H.appendChild(V),this.options.group.revertClone&&this.animate(y,V),A(V,"display",""),it=!1}}};function Pr(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function rn(o,e,t,n,i,s,l,p){var d,c=o[be],g=c.options.onMove,r;return window.CustomEvent&&!ze&&!Zt?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=o,d.dragged=t,d.draggedRect=n,d.related=i||e,d.relatedRect=s||J(e),d.willInsertAfter=p,d.originalEvent=l,o.dispatchEvent(d),g&&(r=g.call(c,d,l)),r}function Bn(o){o.draggable=!1}function Or(){Yn=!1}function kr(o,e,t){var n=J(It(t.el,0,t.options,!0)),i=$o(t.el,t.options,x),s=10;return e?o.clientX<i.left-s||o.clientY<n.top&&o.clientX<n.right:o.clientY<i.top-s||o.clientY<n.bottom&&o.clientX<n.left}function Mr(o,e,t){var n=J(eo(t.el,t.options.draggable)),i=$o(t.el,t.options,x),s=10;return e?o.clientX>i.right+s||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>i.bottom+s||o.clientX>n.right&&o.clientY>n.top}function Nr(o,e,t,n,i,s,l,p){var d=n?o.clientY:o.clientX,c=n?t.height:t.width,g=n?t.top:t.left,r=n?t.bottom:t.right,a=!1;if(!l){if(p&&fn<c*i){if(!Ut&&(qt===1?d>g+c*s/2:d<r-c*s/2)&&(Ut=!0),Ut)a=!0;else if(qt===1?d<g+fn:d>r-fn)return-qt}else if(d>g+c*(1-i)/2&&d<r-c*(1-i)/2)return Rr(e)}return a=a||l,a&&(d<g+c*s/2||d>r-c*s/2)?d>g+c/2?1:-1:0}function Rr(o){return Pe(y)<Pe(o)?1:-1}function Br(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Lr(o){Tn.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&Tn.push(n)}}function pn(o){return setTimeout(o,0)}function jn(o){return clearTimeout(o)}Sn&&O(document,"touchmove",function(o){(w.active||Tt)&&o.cancelable&&o.preventDefault()});w.utils={on:O,off:P,css:A,find:Fo,is:function(e,t){return!!Be(e,t,e,!1)},extend:yr,throttle:Ho,closest:Be,toggleClass:Ae,clone:Vo,index:Pe,nextTick:pn,cancelNextTick:jn,detectDirection:qo,getChild:It,expando:be};w.get=function(o){return o[be]};w.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(w.utils=Ue(Ue({},w.utils),n.utils)),Jt.mount(n)})};w.create=function(o,e){return new w(o,e)};w.version=gr;var Z=[],Ft,Wn,Zn=!1,Ln,Fn,wn,Ht;function Fr(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):n.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):(P(document,"pointermove",this._handleFallbackAutoScroll),P(document,"touchmove",this._handleFallbackAutoScroll),P(document,"mousemove",this._handleFallbackAutoScroll)),yo(),mn(),br()},nulling:function(){wn=Wn=Ft=Zn=Ht=Ln=Fn=null,Z.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,p=document.elementFromPoint(s,l);if(wn=t,n||this.options.forceAutoScrollFallback||Zt||ze||Vt){Hn(t,this.options,p,n);var d=at(p,!0);Zn&&(!Ht||s!==Ln||l!==Fn)&&(Ht&&yo(),Ht=setInterval(function(){var c=at(document.elementFromPoint(s,l),!0);c!==d&&(d=c,mn()),Hn(t,i.options,c,n)},10),Ln=s,Fn=l)}else{if(!this.options.bubbleScroll||at(p,!0)===qe()){mn();return}Hn(t,this.options,at(p,!1),!1)}}},Ke(o,{pluginName:"scroll",initializeByDefault:!0})}function mn(){Z.forEach(function(o){clearInterval(o.pid)}),Z=[]}function yo(){clearInterval(Ht)}var Hn=Ho(function(o,e,t,n){if(e.scroll){var i=(o.touches?o.touches[0]:o).clientX,s=(o.touches?o.touches[0]:o).clientY,l=e.scrollSensitivity,p=e.scrollSpeed,d=qe(),c=!1,g;Wn!==t&&(Wn=t,mn(),Ft=e.scroll,g=e.scrollFn,Ft===!0&&(Ft=at(t,!0)));var r=0,a=Ft;do{var u=a,f=J(u),m=f.top,_=f.bottom,h=f.left,v=f.right,b=f.width,S=f.height,D=void 0,M=void 0,G=u.scrollWidth,j=u.scrollHeight,E=A(u),ie=u.scrollLeft,X=u.scrollTop;u===d?(D=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),M=S<j&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(D=b<G&&(E.overflowX==="auto"||E.overflowX==="scroll"),M=S<j&&(E.overflowY==="auto"||E.overflowY==="scroll"));var q=D&&(Math.abs(v-i)<=l&&ie+b<G)-(Math.abs(h-i)<=l&&!!ie),K=M&&(Math.abs(_-s)<=l&&X+S<j)-(Math.abs(m-s)<=l&&!!X);if(!Z[r])for(var N=0;N<=r;N++)Z[N]||(Z[N]={});(Z[r].vx!=q||Z[r].vy!=K||Z[r].el!==u)&&(Z[r].el=u,Z[r].vx=q,Z[r].vy=K,clearInterval(Z[r].pid),(q!=0||K!=0)&&(c=!0,Z[r].pid=setInterval((function(){n&&this.layer===0&&w.active._onTouchMove(wn);var F=Z[this.layer].vy?Z[this.layer].vy*p:0,W=Z[this.layer].vx?Z[this.layer].vx*p:0;typeof g=="function"&&g.call(w.dragged.parentNode[be],W,F,o,wn,Z[this.layer].el)!=="continue"||Go(Z[this.layer].el,W,F)}).bind({layer:r}),24))),r++}while(e.bubbleScroll&&a!==d&&(a=at(a,!1)));Zn=c}},30),Wo=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,s=e.activeSortable,l=e.dispatchSortableEvent,p=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var c=n||s;p();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,r=document.elementFromPoint(g.clientX,g.clientY);d(),c&&!c.el.contains(r)&&(l("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function to(){}to.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=It(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Wo};Ke(to,{pluginName:"revertOnSpill"});function no(){}no.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Wo};Ke(no,{pluginName:"removeOnSpill"});w.mount(new Fr);w.mount(no,to);class Hr{constructor(){this.steps=[]}visualizeCarryOver(e,t){const n=[],i=e+t;n.push({action:"show_first",value:e,coins:this.convertToCoins(e),message:`まず ${e}円 があります`}),n.push({action:"show_second",value:t,coins:this.convertToCoins(t),message:`つぎに ${t}円 をたします`});const s=e%10,l=t%10;if(s+l>=10){const d=10-s;n.push({action:"make_ten",value:d,message:`${s} に ${d} をたして 10 をつくります`}),n.push({action:"convert_to_ten",message:"10まいの1円が1まいの10円になります！"});const c=l-d;c>0&&n.push({action:"add_remainder",value:c,message:`のこりの ${c}円 をたします`}),n.push({action:"final_result",value:i,message:`ごうけい ${i}円 です！`})}else n.push({action:"simple_add",value:i,message:`${e} + ${t} = ${i}円 です！`});return n}convertToCoins(e){const t=[],n=Math.floor(e/10),i=e%10;for(let s=0;s<n;s++)t.push({type:"10",value:10});for(let s=0;s<i;s++)t.push({type:"1",value:1});return t}generateCoinsForAmount(e){const t=[];let n=e;const i=Math.floor(n/10);for(let s=0;s<i;s++)t.push(this.createCoin(10));n=n%10;for(let s=0;s<n;s++)t.push(this.createCoin(1));for(let s=0;s<3;s++)t.push(this.createCoin(10));for(let s=0;s<6;s++)t.push(this.createCoin(1));return t}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}checkCarryOverPattern(e,t){const n=e%10,i=t%10;return n+i>=10}getHint(e,t,n){const s=e+t-n;return s===0?"せいかいです！":s>0?`あと ${s}円 たりません`:`${Math.abs(s)}円 おおすぎます`}generateProblemSet(e=1){const t=[];switch(e){case 1:t.push({items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}]},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}]},{items:[{name:"パン",price:9,emoji:"🍞"},{name:"ぎゅうにゅう",price:4,emoji:"🥛"}]});break;case 2:t.push({items:[{name:"ケーキ",price:8,emoji:"🍰"},{name:"ジュース",price:7,emoji:"🧃"}]},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"ほん",price:6,emoji:"📚"}]});break}return t}}var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var bo;function Gr(){return bo||(bo=1,function(o){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var a=this||t;if(r=parseFloat(r),a.ctx||g(),typeof r<"u"&&r>=0&&r<=1){if(a._volume=r,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),m=0;m<f.length;m++){var _=a._howls[u]._soundById(f[m]);_&&_._node&&(_._node.volume=_._volume*r)}return a}return a._volume},mute:function(r){var a=this||t;a.ctx||g(),a._muted=r,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r?0:a._volume,t.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),m=0;m<f.length;m++){var _=a._howls[u]._soundById(f[m]);_&&_._node&&(_._node.muted=r?!0:_._muted)}return a},stop:function(){for(var r=this||t,a=0;a<r._howls.length;a++)r._howls[a].stop();return r},unload:function(){for(var r=this||t,a=r._howls.length-1;a>=0;a--)r._howls[a].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,g()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var a=new Audio;a.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return r}if(!a||typeof a.canPlayType!="function")return r;var u=a.canPlayType("audio/mpeg;").replace(/^no$/,""),f=r._navigator?r._navigator.userAgent:"",m=f.match(/OPR\/(\d+)/g),_=m&&parseInt(m[0].split("/")[1],10)<33,h=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,v=f.match(/Version\/(.*?) /),b=h&&v&&parseInt(v[1],10)<15;return r._codecs={mp3:!!(!_&&(u||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var a=function(u){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,r._releaseHtml5Audio(f)}catch{r.noAudio=!0;break}for(var m=0;m<r._howls.length;m++)if(!r._howls[m]._webAudio)for(var _=r._howls[m]._getSoundIds(),h=0;h<_.length;h++){var v=r._howls[m]._soundById(_[h]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}r._autoResume();var b=r.ctx.createBufferSource();b.buffer=r._scratchBuffer,b.connect(r.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),b.onended=function(){b.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var S=0;S<r._howls.length;S++)r._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var a=this||t;return r._unlocked&&a._html5AudioPool.push(r),a},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!t.usingWebAudio)){for(var a=0;a<r._howls.length;a++)if(r._howls[a]._webAudio){for(var u=0;u<r._howls[a]._sounds.length;u++)if(!r._howls[a]._sounds[u]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(r.autoSuspend){r._suspendTimer=null,r.state="suspending";var f=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(f,f)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var a=0;a<r._howls.length;a++)r._howls[a]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,n=function(r){var a=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(r)};n.prototype={init:function(r){var a=this;return t.ctx||g(),a._autoplay=r.autoplay||!1,a._format=typeof r.format!="string"?r.format:[r.format],a._html5=r.html5||!1,a._muted=r.mute||!1,a._loop=r.loop||!1,a._pool=r.pool||5,a._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,a._rate=r.rate||1,a._sprite=r.sprite||{},a._src=typeof r.src!="string"?r.src:[r.src],a._volume=r.volume!==void 0?r.volume:1,a._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=r.onend?[{fn:r.onend}]:[],a._onfade=r.onfade?[{fn:r.onfade}]:[],a._onload=r.onload?[{fn:r.onload}]:[],a._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],a._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],a._onpause=r.onpause?[{fn:r.onpause}]:[],a._onplay=r.onplay?[{fn:r.onplay}]:[],a._onstop=r.onstop?[{fn:r.onstop}]:[],a._onmute=r.onmute?[{fn:r.onmute}]:[],a._onvolume=r.onvolume?[{fn:r.onvolume}]:[],a._onrate=r.onrate?[{fn:r.onrate}]:[],a._onseek=r.onseek?[{fn:r.onseek}]:[],a._onunlock=r.onunlock?[{fn:r.onunlock}]:[],a._onresume=[],a._webAudio=t.usingWebAudio&&!a._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var r=this,a=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var u=0;u<r._src.length;u++){var f,m;if(r._format&&r._format[u])f=r._format[u];else{if(m=r._src[u],typeof m!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(m),f||(f=/\.([^.]+)$/.exec(m.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&t.codecs(f)){a=r._src[u];break}}if(!a){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=a,r._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new i(r),r._webAudio&&l(r),r},play:function(r,a){var u=this,f=null;if(typeof r=="number")f=r,r=null;else{if(typeof r=="string"&&u._state==="loaded"&&!u._sprite[r])return null;if(typeof r>"u"&&(r="__default",!u._playLock)){for(var m=0,_=0;_<u._sounds.length;_++)u._sounds[_]._paused&&!u._sounds[_]._ended&&(m++,f=u._sounds[_]._id);m===1?r=null:f=null}}var h=f?u._soundById(f):u._inactiveSound();if(!h)return null;if(f&&!r&&(r=h._sprite||"__default"),u._state!=="loaded"){h._sprite=r,h._ended=!1;var v=h._id;return u._queue.push({event:"play",action:function(){u.play(v)}}),v}if(f&&!h._paused)return a||u._loadQueue("play"),h._id;u._webAudio&&t._autoResume();var b=Math.max(0,h._seek>0?h._seek:u._sprite[r][0]/1e3),S=Math.max(0,(u._sprite[r][0]+u._sprite[r][1])/1e3-b),D=S*1e3/Math.abs(h._rate),M=u._sprite[r][0]/1e3,G=(u._sprite[r][0]+u._sprite[r][1])/1e3;h._sprite=r,h._ended=!1;var j=function(){h._paused=!1,h._seek=b,h._start=M,h._stop=G,h._loop=!!(h._loop||u._sprite[r][2])};if(b>=G){u._ended(h);return}var E=h._node;if(u._webAudio){var ie=function(){u._playLock=!1,j(),u._refreshBuffer(h);var N=h._muted||u._muted?0:h._volume;E.gain.setValueAtTime(N,t.ctx.currentTime),h._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?h._loop?E.bufferSource.noteGrainOn(0,b,86400):E.bufferSource.noteGrainOn(0,b,S):h._loop?E.bufferSource.start(0,b,86400):E.bufferSource.start(0,b,S),D!==1/0&&(u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),D)),a||setTimeout(function(){u._emit("play",h._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ie():(u._playLock=!0,u.once("resume",ie),u._clearTimer(h._id))}else{var X=function(){E.currentTime=b,E.muted=h._muted||u._muted||t._muted||E.muted,E.volume=h._volume*t.volume(),E.playbackRate=h._rate;try{var N=E.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(u._playLock=!0,j(),N.then(function(){u._playLock=!1,E._unlocked=!0,a?u._loadQueue():u._emit("play",h._id)}).catch(function(){u._playLock=!1,u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):a||(u._playLock=!1,j(),u._emit("play",h._id)),E.playbackRate=h._rate,E.paused){u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||h._loop?u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),D):(u._endTimers[h._id]=function(){u._ended(h),E.removeEventListener("ended",u._endTimers[h._id],!1)},E.addEventListener("ended",u._endTimers[h._id],!1))}catch(F){u._emit("playerror",h._id,F)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=u._src,E.load());var q=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||q)X();else{u._playLock=!0,u._state="loading";var K=function(){u._state="loaded",X(),E.removeEventListener(t._canPlayEvent,K,!1)};E.addEventListener(t._canPlayEvent,K,!1),u._clearTimer(h._id)}}return h._id},pause:function(r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(r)}}),a;for(var u=a._getSoundIds(r),f=0;f<u.length;f++){a._clearTimer(u[f]);var m=a._soundById(u[f]);if(m&&!m._paused&&(m._seek=a.seek(u[f]),m._rateSeek=0,m._paused=!0,a._stopFade(u[f]),m._node))if(a._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),a._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||a._emit("pause",m?m._id:null)}return a},stop:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(r)}}),u;for(var f=u._getSoundIds(r),m=0;m<f.length;m++){u._clearTimer(f[m]);var _=u._soundById(f[m]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,u._stopFade(f[m]),_._node&&(u._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),u._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&u._clearSound(_._node))),a||u._emit("stop",_._id))}return u},mute:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(r,a)}}),u;if(typeof a>"u")if(typeof r=="boolean")u._muted=r;else return u._muted;for(var f=u._getSoundIds(a),m=0;m<f.length;m++){var _=u._soundById(f[m]);_&&(_._muted=r,_._interval&&u._stopFade(_._id),u._webAudio&&_._node?_._node.gain.setValueAtTime(r?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:r),u._emit("mute",_._id))}return u},volume:function(){var r=this,a=arguments,u,f;if(a.length===0)return r._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var m=r._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length>=2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var h;if(typeof u<"u"&&u>=0&&u<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;typeof f>"u"&&(r._volume=u),f=r._getSoundIds(f);for(var v=0;v<f.length;v++)h=r._soundById(f[v]),h&&(h._volume=u,a[2]||r._stopFade(f[v]),r._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(u,t.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=u*t.volume()),r._emit("volume",h._id))}else return h=f?r._soundById(f):r._sounds[0],h?h._volume:0;return r},fade:function(r,a,u,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(r,a,u,f)}}),m;r=Math.min(Math.max(0,parseFloat(r)),1),a=Math.min(Math.max(0,parseFloat(a)),1),u=parseFloat(u),m.volume(r,f);for(var _=m._getSoundIds(f),h=0;h<_.length;h++){var v=m._soundById(_[h]);if(v){if(f||m._stopFade(_[h]),m._webAudio&&!v._muted){var b=t.ctx.currentTime,S=b+u/1e3;v._volume=r,v._node.gain.setValueAtTime(r,b),v._node.gain.linearRampToValueAtTime(a,S)}m._startFadeInterval(v,r,a,u,_[h],typeof f>"u")}}return m},_startFadeInterval:function(r,a,u,f,m,_){var h=this,v=a,b=u-a,S=Math.abs(b/.01),D=Math.max(4,S>0?f/S:f),M=Date.now();r._fadeTo=u,r._interval=setInterval(function(){var G=(Date.now()-M)/f;M=Date.now(),v+=b*G,v=Math.round(v*100)/100,b<0?v=Math.max(u,v):v=Math.min(u,v),h._webAudio?r._volume=v:h.volume(v,r._id,!0),_&&(h._volume=v),(u<a&&v<=u||u>a&&v>=u)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,h.volume(u,r._id),h._emit("fade",r._id))},D)},_stopFade:function(r){var a=this,u=a._soundById(r);return u&&u._interval&&(a._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,a.volume(u._fadeTo,r),u._fadeTo=null,a._emit("fade",r)),a},loop:function(){var r=this,a=arguments,u,f,m;if(a.length===0)return r._loop;if(a.length===1)if(typeof a[0]=="boolean")u=a[0],r._loop=u;else return m=r._soundById(parseInt(a[0],10)),m?m._loop:!1;else a.length===2&&(u=a[0],f=parseInt(a[1],10));for(var _=r._getSoundIds(f),h=0;h<_.length;h++)m=r._soundById(_[h]),m&&(m._loop=u,r._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=u,u&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,r.playing(_[h])&&(r.pause(_[h],!0),r.play(_[h],!0)))));return r},rate:function(){var r=this,a=arguments,u,f;if(a.length===0)f=r._sounds[0]._id;else if(a.length===1){var m=r._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var h;if(typeof u=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;typeof f>"u"&&(r._rate=u),f=r._getSoundIds(f);for(var v=0;v<f.length;v++)if(h=r._soundById(f[v]),h){r.playing(f[v])&&(h._rateSeek=r.seek(f[v]),h._playStart=r._webAudio?t.ctx.currentTime:h._playStart),h._rate=u,r._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):h._node&&(h._node.playbackRate=u);var b=r.seek(f[v]),S=(r._sprite[h._sprite][0]+r._sprite[h._sprite][1])/1e3-b,D=S*1e3/Math.abs(h._rate);(r._endTimers[f[v]]||!h._paused)&&(r._clearTimer(f[v]),r._endTimers[f[v]]=setTimeout(r._ended.bind(r,h),D)),r._emit("rate",h._id)}}else return h=r._soundById(f),h?h._rate:r._rate;return r},seek:function(){var r=this,a=arguments,u,f;if(a.length===0)r._sounds.length&&(f=r._sounds[0]._id);else if(a.length===1){var m=r._getSoundIds(),_=m.indexOf(a[0]);_>=0?f=parseInt(a[0],10):r._sounds.length&&(f=r._sounds[0]._id,u=parseFloat(a[0]))}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var h=r._soundById(f);if(h)if(typeof u=="number"&&u>=0){var v=r.playing(f);v&&r.pause(f,!0),h._seek=u,h._ended=!1,r._clearTimer(f),!r._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=u);var b=function(){v&&r.play(f,!0),r._emit("seek",f)};if(v&&!r._webAudio){var S=function(){r._playLock?setTimeout(S,0):b()};setTimeout(S,0)}else b()}else if(r._webAudio){var D=r.playing(f)?t.ctx.currentTime-h._playStart:0,M=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(M+D*Math.abs(h._rate))}else return h._node.currentTime;return r},playing:function(r){var a=this;if(typeof r=="number"){var u=a._soundById(r);return u?!u._paused:!1}for(var f=0;f<a._sounds.length;f++)if(!a._sounds[f]._paused)return!0;return!1},duration:function(r){var a=this,u=a._duration,f=a._soundById(r);return f&&(u=a._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var r=this,a=r._sounds,u=0;u<a.length;u++)a[u]._paused||r.stop(a[u]._id),r._webAudio||(r._clearSound(a[u]._node),a[u]._node.removeEventListener("error",a[u]._errorFn,!1),a[u]._node.removeEventListener(t._canPlayEvent,a[u]._loadFn,!1),a[u]._node.removeEventListener("ended",a[u]._endFn,!1),t._releaseHtml5Audio(a[u]._node)),delete a[u]._node,r._clearTimer(a[u]._id);var f=t._howls.indexOf(r);f>=0&&t._howls.splice(f,1);var m=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===r._src||r._src.indexOf(t._howls[u]._src)>=0){m=!1;break}return s&&m&&delete s[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,a,u,f){var m=this,_=m["_on"+r];return typeof a=="function"&&_.push(f?{id:u,fn:a,once:f}:{id:u,fn:a}),m},off:function(r,a,u){var f=this,m=f["_on"+r],_=0;if(typeof a=="number"&&(u=a,a=null),a||u)for(_=0;_<m.length;_++){var h=u===m[_].id;if(a===m[_].fn&&h||!a&&h){m.splice(_,1);break}}else if(r)f["_on"+r]=[];else{var v=Object.keys(f);for(_=0;_<v.length;_++)v[_].indexOf("_on")===0&&Array.isArray(f[v[_]])&&(f[v[_]]=[])}return f},once:function(r,a,u){var f=this;return f.on(r,a,u,1),f},_emit:function(r,a,u){for(var f=this,m=f["_on"+r],_=m.length-1;_>=0;_--)(!m[_].id||m[_].id===a||r==="load")&&(setTimeout((function(h){h.call(this,a,u)}).bind(f,m[_].fn),0),m[_].once&&f.off(r,m[_].fn,m[_].id));return f._loadQueue(r),f},_loadQueue:function(r){var a=this;if(a._queue.length>0){var u=a._queue[0];u.event===r&&(a._queue.shift(),a._loadQueue()),r||u.action()}return a},_ended:function(r){var a=this,u=r._sprite;if(!a._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(a._ended.bind(a,r),100),a;var f=!!(r._loop||a._sprite[u][2]);if(a._emit("end",r._id),!a._webAudio&&f&&a.stop(r._id,!0).play(r._id),a._webAudio&&f){a._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var m=(r._stop-r._start)*1e3/Math.abs(r._rate);a._endTimers[r._id]=setTimeout(a._ended.bind(a,r),m)}return a._webAudio&&!f&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,a._clearTimer(r._id),a._cleanBuffer(r._node),t._autoSuspend()),!a._webAudio&&!f&&a.stop(r._id,!0),a},_clearTimer:function(r){var a=this;if(a._endTimers[r]){if(typeof a._endTimers[r]!="function")clearTimeout(a._endTimers[r]);else{var u=a._soundById(r);u&&u._node&&u._node.removeEventListener("ended",a._endTimers[r],!1)}delete a._endTimers[r]}return a},_soundById:function(r){for(var a=this,u=0;u<a._sounds.length;u++)if(r===a._sounds[u]._id)return a._sounds[u];return null},_inactiveSound:function(){var r=this;r._drain();for(var a=0;a<r._sounds.length;a++)if(r._sounds[a]._ended)return r._sounds[a].reset();return new i(r)},_drain:function(){var r=this,a=r._pool,u=0,f=0;if(!(r._sounds.length<a)){for(f=0;f<r._sounds.length;f++)r._sounds[f]._ended&&u++;for(f=r._sounds.length-1;f>=0;f--){if(u<=a)return;r._sounds[f]._ended&&(r._webAudio&&r._sounds[f]._node&&r._sounds[f]._node.disconnect(0),r._sounds.splice(f,1),u--)}}},_getSoundIds:function(r){var a=this;if(typeof r>"u"){for(var u=[],f=0;f<a._sounds.length;f++)u.push(a._sounds[f]._id);return u}else return[r]},_refreshBuffer:function(r){var a=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=s[a._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),a},_cleanBuffer:function(r){var a=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!r.bufferSource)return a;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),u))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,a},_clearSound:function(r){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(r){this._parent=r,this.init()};i.prototype={init:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,a._sounds.push(r),r.create(),r},create:function(){var r=this,a=r._parent,u=t._muted||r._muted||r._parent._muted?0:r._volume;return a._webAudio?(r._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(u,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=a._src,r._node.preload=a._preload===!0?"auto":a._preload,r._node.volume=u*t.volume(),r._node.load()),r},reset:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,a=r._parent;a._duration=Math.ceil(r._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,a=r._parent;a._duration===1/0&&(a._duration=Math.ceil(r._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var s={},l=function(r){var a=r._src;if(s[a]){r._duration=s[a].duration,c(r);return}if(/^data:[^;]+;base64,/.test(a)){for(var u=atob(a.split(",")[1]),f=new Uint8Array(u.length),m=0;m<u.length;++m)f[m]=u.charCodeAt(m);d(f.buffer,r)}else{var _=new XMLHttpRequest;_.open(r._xhr.method,a,!0),_.withCredentials=r._xhr.withCredentials,_.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(h){_.setRequestHeader(h,r._xhr.headers[h])}),_.onload=function(){var h=(_.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}d(_.response,r)},_.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete s[a],r.load())},p(_)}},p=function(r){try{r.send()}catch{r.onerror()}},d=function(r,a){var u=function(){a._emit("loaderror",null,"Decoding audio data failed.")},f=function(m){m&&a._sounds.length>0?(s[a._src]=m,c(a,m)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(f).catch(u):t.ctx.decodeAudioData(r,f,u)},c=function(r,a){a&&!r._duration&&(r._duration=a.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},g=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),a=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=a?parseInt(a[1],10):null;if(r&&u&&u<9){var f=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!f&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};o.Howler=t,o.Howl=n,typeof Nt<"u"?(Nt.HowlerGlobal=e,Nt.Howler=t,Nt.Howl=n,Nt.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,l,p){var d=this;if(!d.ctx||!d.ctx.listener)return d;var c=d._orientation;if(n=typeof n!="number"?c[1]:n,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,l=typeof l!="number"?c[4]:l,p=typeof p!="number"?c[5]:p,typeof t=="number")d._orientation=[t,n,i,s,l,p],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(t,n,i,s,l,p);else return c;return d},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var l=i._getSoundIds(n),p=0;p<l.length;p++){var d=i._soundById(l[p]);if(d)if(typeof t=="number")d._stereo=t,d._pos=[t,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,s),s==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(t,0,0):d._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",d._id);else return d._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(t,n,i,s)}}),l;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")l._pos=[t,n,i];else return l._pos;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._pos=[t,n,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(t,n,i)),l._emit("pos",c._id);else return c._pos}return l},Howl.prototype.orientation=function(t,n,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(t,n,i,s)}}),l;if(n=typeof n!="number"?l._orientation[1]:n,i=typeof i!="number"?l._orientation[2]:i,typeof s>"u")if(typeof t=="number")l._orientation=[t,n,i];else return l._orientation;for(var p=l._getSoundIds(s),d=0;d<p.length;d++){var c=l._soundById(p[d]);if(c)if(typeof t=="number")c._orientation=[t,n,i],c._node&&(c._panner||(c._pos||(c._pos=l._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(t,n,i)),l._emit("orientation",c._id);else return c._orientation}return l},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,l;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return l=t._soundById(parseInt(n[0],10)),l?l._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var p=t._getSoundIds(s),d=0;d<p.length;d++)if(l=t._soundById(p[d]),l){var c=l._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var g=l._panner;g||(l._pos||(l._pos=t._pos||[0,0,-.5]),e(l,"spatial"),g=l._panner),g.coneInnerAngle=c.coneInnerAngle,g.coneOuterAngle=c.coneOuterAngle,g.coneOuterGain=c.coneOuterGain,g.distanceModel=c.distanceModel,g.maxDistance=c.maxDistance,g.refDistance=c.refDistance,g.rolloffFactor=c.rolloffFactor,g.panningModel=c.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Gn)),Gn}Gr();class Vr{constructor(){this.sounds={},this.soundEnabled=!0,this.volume=.7,this.initializeDummySounds()}initializeDummySounds(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sounds={"coin-pickup":this.createToneSound(800,.1),"coin-drop":this.createToneSound(400,.2),"register-open":this.createToneSound(600,.3),success:this.createSuccessSound(),wrong:this.createErrorSound(),"level-up":this.createLevelUpSound(),"ten-conversion":this.createMagicSound()}}createToneSound(e,t){return{play:()=>{if(!this.soundEnabled)return;const n=this.audioContext.createOscillator(),i=this.audioContext.createGain();n.connect(i),i.connect(this.audioContext.destination),n.frequency.value=e,n.type="sine",i.gain.setValueAtTime(0,this.audioContext.currentTime),i.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),n.start(this.audioContext.currentTime),n.stop(this.audioContext.currentTime+t)}}}createSuccessSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,659,784,1047],t=.15;e.forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=n,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*100)})}}}createErrorSound(){return{play:()=>{if(!this.soundEnabled)return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(200,this.audioContext.currentTime),e.frequency.linearRampToValueAtTime(100,this.audioContext.currentTime+.3),e.type="sawtooth",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3)}}}createLevelUpSound(){return{play:()=>{if(!this.soundEnabled)return;const e=[523,587,659,698,784,880,988,1047],t=.1;e.forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),l=this.audioContext.createGain();s.connect(l),l.connect(this.audioContext.destination),s.frequency.value=n,s.type="triangle",l.gain.setValueAtTime(0,this.audioContext.currentTime),l.gain.linearRampToValueAtTime(this.volume*.15,this.audioContext.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)},i*50)})}}}createMagicSound(){return{play:()=>{if(this.soundEnabled)for(let e=0;e<5;e++)setTimeout(()=>{const t=this.audioContext.createOscillator(),n=this.audioContext.createGain();t.connect(n),n.connect(this.audioContext.destination);const i=800+Math.random()*800;t.frequency.value=i,t.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(this.volume*.2,this.audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.3)},e*100)}}}play(e){if(this.sounds[e]&&this.soundEnabled)try{this.sounds[e].play()}catch(t){console.warn(`Could not play sound: ${e}`,t)}}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}enableSound(){this.soundEnabled=!0}disableSound(){this.soundEnabled=!1}toggleSound(){return this.soundEnabled=!this.soundEnabled,this.soundEnabled}}const Je=new Vr;/**
 * anime.js - ESM
 * @version v4.0.2
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const Ye=typeof window<"u",Vn=Ye?window:null,Pt=Ye?document:null,Y={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},k={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},ke={NONE:0,AUTO:1,FORCE:2},Te={replace:0,none:1,blend:2},To=Symbol(),oo=Symbol(),Zo=Symbol(),xn=Symbol(),$r=Symbol(),L=1e-11,Jo=1e12,Ot=1e3,Jn=120,mt="",Qt=new Map;Qt.set("x","translateX");Qt.set("y","translateY");Qt.set("z","translateZ");const ro=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Qo=ro.reduce((o,e)=>({...o,[e]:e+"("}),{}),Oe=()=>{},Xr=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,qr=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Ur=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,Yr=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,jr=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,wo=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Wr=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Zr=/([a-z])([A-Z])/g,Jr=/(\w+)(\([^)]+\)+)/g,Ko={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:Jn,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Ot,delay:0,loopDelay:0,ease:"out(2)",composition:Te.replace,modifier:o=>o,onBegin:Oe,onBeforeUpdate:Oe,onUpdate:Oe,onLoop:Oe,onPause:Oe,onComplete:Oe,onRender:Oe},re={defaults:Ko,root:Pt,precision:4,timeScale:1,tickThreshold:200},zo={version:"4.0.2",engine:null};Ye&&(Vn.AnimeJS||(Vn.AnimeJS=[]),Vn.AnimeJS.push(zo));const Qr=o=>o.replace(Zr,"$1-$2").toLowerCase(),Ct=(o,e)=>o.indexOf(e)===0,jt=Date.now,Wt=Array.isArray,$n=o=>o&&o.constructor===Object,Kr=o=>typeof o=="number"&&!isNaN(o),Cn=o=>typeof o=="string",An=o=>typeof o=="function",B=o=>typeof o>"u",Xn=o=>B(o)||o===null,er=o=>Ye&&o instanceof SVGElement,tr=o=>Xr.test(o),nr=o=>Ct(o,"rgb"),or=o=>Ct(o,"hsl"),zr=o=>tr(o)||nr(o)||or(o),hn=o=>!re.defaults.hasOwnProperty(o),an=o=>Cn(o)?parseFloat(o):o,wt=Math.pow,ei=Math.sqrt,ti=Math.sin,ni=Math.cos,oi=Math.abs,ri=Math.ceil,rr=Math.floor,ii=Math.asin,io=Math.PI,Ao=Math.round,ce=(o,e,t)=>o<e?e:o>t?t:o,Eo={},Q=(o,e)=>{if(e<0)return o;if(!e)return Ao(o);let t=Eo[e];return t||(t=Eo[e]=10**e),Ao(o*t)/t},dt=(o,e,t)=>o+(e-o)*t,ao=o=>o===1/0?Jo:o===-1/0?-1e12:o,Yt=o=>o<=L?L:ao(Q(o,11)),pe=o=>Wt(o)?[...o]:o,ai=(o,e)=>{const t={...o};for(let n in e){const i=o[n];t[n]=B(i)?e[n]:i}return t},ee=(o,e,t,n="_prev",i="_next")=>{let s=o._head,l=i;for(t&&(s=o._tail,l=n);s;){const p=s[l];e(s),s=p}},Gt=(o,e,t="_prev",n="_next")=>{const i=e[t],s=e[n];i?i[n]=s:o._head=s,s?s[t]=i:o._tail=i,e[t]=null,e[n]=null},St=(o,e,t,n="_prev",i="_next")=>{let s=o._tail;for(;s&&t&&t(s,e);)s=s[n];const l=s?s[i]:o._head;s?s[i]=e:o._head=e,l?l[n]=e:o._tail=e,e[n]=s,e[i]=l};class ir{constructor(e=0){this.deltaTime=0,this._currentTime=e,this._elapsedTime=e,this._startTime=e,this._lastTime=e,this._scheduledTime=0,this._frameDuration=Q(Ot/Jn,0),this._fps=Jn,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(e){const t=this._frameDuration,n=+e,i=n<L?L:n,s=Q(Ot/i,0);this._fps=i,this._frameDuration=s,this._scheduledTime+=s-t}get speed(){return this._speed}set speed(e){const t=+e;this._speed=t<L?L:t}requestTick(e){const t=this._scheduledTime,n=this._elapsedTime;if(this._elapsedTime+=e-n,n<t)return ke.NONE;const i=this._frameDuration,s=n-t;return this._scheduledTime+=s<i?i:s,ke.AUTO}computeDeltaTime(e){const t=e-this._lastTime;return this.deltaTime=t,this._lastTime=e,t}}const _n=(o,e,t,n,i)=>{const s=o.parent,l=o.duration,p=o.completed,d=o.iterationDuration,c=o.iterationCount,g=o._currentIteration,r=o._loopDelay,a=o._reversed,u=o._alternate,f=o._hasChildren,m=o._delay,_=o._currentTime,h=m+d,v=e-m,b=ce(_,-m,l),S=ce(v,-m,l),D=v-_,M=S>0,G=S>=l,j=l<=L,E=i===ke.FORCE;let ie=0,X=v,q=0;if(c>1){const Se=~~(S/(d+(G?0:r)));o._currentIteration=ce(Se,0,c),G&&o._currentIteration--,ie=o._currentIteration%2,X=S%(d+r)||0}const K=a^(u&&ie),N=o._ease;let F=G?K?0:l:K?d-X:X;N&&(F=d*N(F/d)||0);const W=(s?s.backwards:v<_)?!K:!!K;if(o._currentTime=v,o._iterationTime=F,o.backwards=W,M&&!o.began?(o.began=!0,!t&&!(s&&(W||!s.began))&&o.onBegin(o)):v<=0&&(o.began=!1),!t&&!f&&M&&o._currentIteration!==g&&o.onLoop(o),E||i===ke.AUTO&&(e>=m&&e<=h||e<=m&&b>m||e>=h&&b!==l)||F>=h&&b!==l||F<=m&&b>0||e<=b&&b===l&&p||G&&!p&&j){if(M&&(o.computeDeltaTime(b),t||o.onBeforeUpdate(o)),!f){const Se=E||(W?D*-1:D)>=re.tickThreshold,U=o._offset+(s?s._offset:0)+m+F;let T=o._head,ne,ae,et,st,xe=0;for(;T;){const he=T._composition,Ce=T._currentTime,we=T._changeDuration,Mt=T._absoluteStartTime+T._changeDuration,Le=T._nextRep,De=T._prevRep,je=he!==Te.none;if((Se||(Ce!==we||U<=Mt+(Le?Le._delay:0))&&(Ce!==0||U>=T._absoluteStartTime))&&(!je||!T._isOverridden&&(!T._isOverlapped||U<=Mt)&&(!Le||Le._isOverridden||U<=Le._absoluteStartTime)&&(!De||De._isOverridden||U>=De._absoluteStartTime+De._changeDuration+T._delay))){const We=T._currentTime=ce(F-T._startTime,0,we),te=T._ease(We/T._updateDuration),_e=T._modifier,Me=T._valueType,de=T._tweenType,ge=de===Y.OBJECT,ht=Me===k.NUMBER,Fe=ht&&ge||te===0||te===1?-1:re.precision;let ve,_t;if(ht)ve=_t=_e(Q(dt(T._fromNumber,T._toNumber,te),Fe));else if(Me===k.UNIT)_t=_e(Q(dt(T._fromNumber,T._toNumber,te),Fe)),ve=`${_t}${T._unit}`;else if(Me===k.COLOR){const z=T._fromNumbers,He=T._toNumbers,Ge=Q(ce(_e(dt(z[0],He[0],te)),0,255),0),Ze=Q(ce(_e(dt(z[1],He[1],te)),0,255),0),Kt=Q(ce(_e(dt(z[2],He[2],te)),0,255),0),gt=ce(_e(Q(dt(z[3],He[3],te),Fe)),0,1);if(ve=`rgba(${Ge},${Ze},${Kt},${gt})`,je){const lt=T._numbers;lt[0]=Ge,lt[1]=Ze,lt[2]=Kt,lt[3]=gt}}else if(Me===k.COMPLEX){ve=T._strings[0];for(let z=0,He=T._toNumbers.length;z<He;z++){const Ge=_e(Q(dt(T._fromNumbers[z],T._toNumbers[z],te),Fe)),Ze=T._strings[z+1];ve+=`${Ze?Ge+Ze:Ge}`,je&&(T._numbers[z]=Ge)}}if(je&&(T._number=_t),!n&&he!==Te.blend){const z=T.property;ne=T.target,ge?ne[z]=ve:de===Y.ATTRIBUTE?ne.setAttribute(z,ve):(ae=ne.style,de===Y.TRANSFORM?(ne!==et&&(et=ne,st=ne[xn]),st[z]=ve,xe=1):de===Y.CSS?ae[z]=ve:de===Y.CSS_VAR&&ae.setProperty(z,ve)),M&&(q=1)}else T._value=ve}if(xe&&T._renderTransforms){let We=mt;for(let te in st)We+=`${Qo[te]}${st[te]}) `;ae.transform=We,xe=0}T=T._next}!t&&q&&o.onRender(o)}!t&&M&&o.onUpdate(o)}return s&&j?!t&&(s.began&&!W&&v>=l&&!p||W&&v<=L&&p)&&(o.onComplete(o),o.completed=!W):M&&G?c===1/0?o._startTime+=o.duration:o._currentIteration>=c-1&&(o.paused=!0,!p&&!f&&(o.completed=!0,!t&&!(s&&(W||!s.began))&&(o.onComplete(o),o._resolve(o)))):o.completed=!1,q},At=(o,e,t,n,i)=>{const s=o._currentIteration;if(_n(o,e,t,n,i),o._hasChildren){const l=o,p=l.backwards,d=n?e:l._iterationTime,c=jt();let g=0,r=!0;if(!n&&l._currentIteration!==s){const a=l.iterationDuration;ee(l,u=>{if(!p)!u.completed&&!u.backwards&&u._currentTime<u.iterationDuration&&_n(u,a,t,1,ke.FORCE),u.began=!1,u.completed=!1;else{const f=u.duration,m=u._offset+u._delay,_=m+f;!t&&f<=L&&(!m||_===a)&&u.onComplete(u)}}),t||l.onLoop(l)}ee(l,a=>{const u=Q((d-a._offset)*a._speed,12),f=a._fps<l._fps?a.requestTick(c):i;g+=_n(a,u,t,n,f),!a.completed&&r&&(r=!1)},p),!t&&g&&l.onRender(l),r&&l._currentTime>=l.duration&&(l.paused=!0,l.completed||(l.completed=!0,t||(l.onComplete(l),l._resolve(l))))}},Dt={animation:null,update:Oe},si=o=>{let e=Dt.animation;return e||(e={duration:L,computeDeltaTime:Oe,_offset:0,_delay:0,_head:null,_tail:null},Dt.animation=e,Dt.update=()=>{o.forEach(t=>{for(let n in t){const i=t[n],s=i._head;if(s){const l=s._valueType,p=l===k.COMPLEX||l===k.COLOR?pe(s._fromNumbers):null;let d=s._fromNumber,c=i._tail;for(;c&&c!==s;){if(p)for(let g=0,r=c._numbers.length;g<r;g++)p[g]+=c._numbers[g];else d+=c._number;c=c._prevAdd}s._toNumber=d,s._toNumbers=p}}}),_n(e,1,1,0,ke.FORCE)}),e},ar=Ye?requestAnimationFrame:setImmediate,li=Ye?cancelAnimationFrame:clearImmediate;class ui extends ir{constructor(e){super(e),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=Ko,this.paused=!!(Ye&&Pt.hidden),this.reqId=null}update(){const e=this._currentTime=jt();if(this.requestTick(e)){this.computeDeltaTime(e);const t=this._speed,n=this._fps;let i=this._head;for(;i;){const s=i._next;i.paused?(Gt(this,i),this._hasChildren=!!this._tail,i._running=!1,i.completed&&!i._cancelled&&i.cancel()):At(i,(e-i._startTime)*i._speed*t,0,0,i._fps<n?i.requestTick(e):ke.AUTO),i=s}Dt.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=ar(sr)),this}pause(){return this.paused=!0,ci()}resume(){if(this.paused)return this.paused=!1,ee(this,e=>e.resetTime()),this.wake()}get speed(){return this._speed*(re.timeScale===1?1:Ot)}set speed(e){this._speed=e*re.timeScale,ee(this,t=>t.speed=t._speed)}get timeUnit(){return re.timeScale===1?"ms":"s"}set timeUnit(e){const n=e==="s",i=n?.001:1;if(re.timeScale!==i){re.timeScale=i,re.tickThreshold=200*i;const s=n?.001:Ot;this.defaults.duration*=s,this._speed*=s}}get precision(){return re.precision}set precision(e){re.precision=e}}const ue=(()=>{const o=new ui(jt());return Ye&&(zo.engine=o,Pt.addEventListener("visibilitychange",()=>{o.pauseOnDocumentHidden&&(Pt.hidden?o.pause():o.resume())})),o})(),sr=()=>{ue._head?(ue.reqId=ar(sr),ue.update()):ue.reqId=0},ci=()=>(li(ue.reqId),ue.reqId=0,ue),di=(o,e,t)=>{const n=o.style.transform;let i;if(n){const s=o[xn];let l;for(;l=Jr.exec(n);){const p=l[1],d=l[2].slice(1,-1);s[p]=d,p===e&&(i=d,t&&(t[e]=d))}}return n&&!B(i)?i:Ct(e,"scale")?"1":Ct(e,"rotate")||Ct(e,"skew")?"0deg":"0px"};function So(o){const e=Cn(o)?re.root.querySelectorAll(o):o;if(e instanceof NodeList||e instanceof HTMLCollection)return e}function fi(o){if(Xn(o))return[];if(Wt(o)){const t=o.flat(1/0),n=[];for(let i=0,s=t.length;i<s;i++){const l=t[i];if(!Xn(l)){const p=So(l);if(p)for(let d=0,c=p.length;d<c;d++){const g=p[d];if(!Xn(g)){let r=!1;for(let a=0,u=n.length;a<u;a++)if(n[a]===g){r=!0;break}r||n.push(g)}}else{let d=!1;for(let c=0,g=n.length;c<g;c++)if(n[c]===l){d=!0;break}d||n.push(l)}}}return n}if(!Ye)return[o];const e=So(o);return e?Array.from(e):[o]}function pi(o){const e=fi(o),t=e.length;if(t)for(let n=0;n<t;n++){const i=e[n];if(!i[To]){i[To]=!0;const s=er(i);(i.nodeType||s)&&(i[oo]=!0,i[Zo]=s,i[xn]={})}}return e}const mi=["opacity","rotate","overflow","color"],hi=(o,e)=>{if(mi.includes(e))return!1;if(o.getAttribute(e)||e in o){if(e==="scale"){const t=o.parentNode;return t&&t.tagName==="filter"}return!0}},_i=o=>{const e=qr.exec(o)||Ur.exec(o),t=B(e[4])?1:+e[4];return[+e[1],+e[2],+e[3],t]},gi=o=>{const e=o.length,t=e===4||e===5;return[+("0x"+o[1]+o[t?1:2]),+("0x"+o[t?2:3]+o[t?2:4]),+("0x"+o[t?3:5]+o[t?3:6]),e===5||e===9?+(+("0x"+o[t?4:7]+o[t?4:8])/255).toFixed(3):1]},qn=(o,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+(e-o)*6*t:t<1/2?e:t<2/3?o+(e-o)*(2/3-t)*6:o),vi=o=>{const e=Yr.exec(o)||jr.exec(o),t=+e[1]/360,n=+e[2]/100,i=+e[3]/100,s=B(e[4])?1:+e[4];let l,p,d;if(n===0)l=p=d=i;else{const c=i<.5?i*(1+n):i+n-i*n,g=2*i-c;l=Q(qn(g,c,t+1/3)*255,0),p=Q(qn(g,c,t)*255,0),d=Q(qn(g,c,t-1/3)*255,0)}return[l,p,d,s]},yi=o=>nr(o)?_i(o):tr(o)?gi(o):or(o)?vi(o):[0,0,0,1],me=(o,e)=>B(o)?e:o,tt=(o,e,t,n,i)=>{if(An(o)){const s=()=>{const l=o(e,t,n);return isNaN(+l)?l||0:+l};return i&&(i.func=s),s()}else return o},lr=(o,e)=>o[oo]?o[Zo]&&hi(o,e)?Y.ATTRIBUTE:ro.includes(e)||Qt.get(e)?Y.TRANSFORM:Ct(e,"--")?Y.CSS_VAR:e in o.style?Y.CSS:e in o?Y.OBJECT:Y.ATTRIBUTE:Y.OBJECT,xo=(o,e,t)=>{const n=o.style[e];n&&t&&(t[e]=n);const i=n||getComputedStyle(o[$r]||o).getPropertyValue(e);return i==="auto"?"0":i},Rt=(o,e,t,n)=>{const i=B(t)?lr(o,e):t;return i===Y.OBJECT?o[e]||0:i===Y.ATTRIBUTE?o.getAttribute(e):i===Y.TRANSFORM?di(o,e,n):i===Y.CSS_VAR?xo(o,e,n).trimStart():xo(o,e,n)},Co=(o,e,t)=>t==="-"?o-e:t==="+"?o+e:o*e,so=()=>({t:k.NUMBER,n:0,u:null,o:null,d:null,s:null}),Ve=(o,e)=>{if(e.t=k.NUMBER,e.n=0,e.u=null,e.o=null,e.d=null,e.s=null,!o)return e;const t=+o;if(isNaN(t)){let n=o;n[1]==="="&&(e.o=n[0],n=n.slice(2));const i=n.includes(" ")?!1:Wr.exec(n);if(i)return e.t=k.UNIT,e.n=+i[1],e.u=i[2],e;if(e.o)return e.n=+n,e;if(zr(n))return e.t=k.COLOR,e.d=yi(n),e;{const s=n.match(wo);return e.t=k.COMPLEX,e.d=s?s.map(Number):[],e.s=n.split(wo)||[],e}}else return e.n=t,e},Do=(o,e)=>(e.t=o._valueType,e.n=o._toNumber,e.u=o._unit,e.o=null,e.d=pe(o._toNumbers),e.s=pe(o._strings),e),ft=so(),En={_rep:new WeakMap,_add:new Map},lo=(o,e,t="_rep")=>{const n=En[t];let i=n.get(o);return i||(i={},n.set(o,i)),i[e]?i[e]:i[e]={_head:null,_tail:null}},bi=(o,e)=>o._isOverridden||o._absoluteStartTime>e._absoluteStartTime,gn=o=>{o._isOverlapped=1,o._isOverridden=1,o._changeDuration=L,o._currentTime=L},ur=(o,e)=>{const t=o._composition;if(t===Te.replace){const n=o._absoluteStartTime;St(e,o,bi,"_prevRep","_nextRep");const i=o._prevRep;if(i){const s=i.parent,l=i._absoluteStartTime+i._changeDuration;if(o.parent.id!==s.id&&s.iterationCount>1&&l+(s.duration-s.iterationDuration)>n){gn(i);let c=i._prevRep;for(;c&&c.parent.id===s.id;)gn(c),c=c._prevRep}const p=n-o._delay;if(l>p){const c=i._startTime,g=l-(c+i._updateDuration);i._changeDuration=p-g-c,i._currentTime=i._changeDuration,i._isOverlapped=1,i._changeDuration<L&&gn(i)}let d=!0;if(ee(s,c=>{c._isOverlapped||(d=!1)}),d){const c=s.parent;if(c){let g=!0;ee(c,r=>{r!==s&&ee(r,a=>{a._isOverlapped||(g=!1)})}),g&&c.cancel()}else s.cancel()}}}else if(t===Te.blend){const n=lo(o.target,o.property,"_add"),i=si(En._add);let s=n._head;s||(s={...o},s._composition=Te.replace,s._updateDuration=L,s._startTime=0,s._numbers=pe(o._fromNumbers),s._number=0,s._next=null,s._prev=null,St(n,s),St(i,s));const l=o._toNumber;if(o._fromNumber=s._fromNumber-l,o._toNumber=0,o._numbers=pe(o._fromNumbers),o._number=0,s._fromNumber=l,o._toNumbers){const p=pe(o._toNumbers);p&&p.forEach((d,c)=>{o._fromNumbers[c]=s._fromNumbers[c]-d,o._toNumbers[c]=0}),s._fromNumbers=p}St(n,o,null,"_prevAdd","_nextAdd")}return o},Ti=o=>{const e=o._composition;if(e!==Te.none){const t=o.target,n=o.property,l=En._rep.get(t)[n];if(Gt(l,o,"_prevRep","_nextRep"),e===Te.blend){const p=En._add,d=p.get(t);if(!d)return;const c=d[n],g=Dt.animation;Gt(c,o,"_prevAdd","_nextAdd");const r=c._head;if(r&&r===c._tail){Gt(c,r,"_prevAdd","_nextAdd"),Gt(g,r);let a=!0;for(let u in d)if(d[u]._head){a=!1;break}a&&p.delete(t)}}}return o},Io=o=>(o.paused=!0,o.began=!1,o.completed=!1,o),Qn=o=>(o._cancelled&&(o._hasChildren?ee(o,Qn):ee(o,e=>{e._composition!==Te.none&&ur(e,lo(e.target,e.property))}),o._cancelled=0),o);let wi=0;class Ai extends ir{constructor(e={},t=null,n=0){super(0);const{id:i,delay:s,duration:l,reversed:p,alternate:d,loop:c,loopDelay:g,autoplay:r,frameRate:a,playbackRate:u,onComplete:f,onLoop:m,onPause:_,onBegin:h,onBeforeUpdate:v,onUpdate:b}=e,S=t?0:ue._elapsedTime,D=t?t.defaults:re.defaults,M=An(s)||B(s)?D.delay:+s,G=An(l)||B(l)?1/0:+l,j=me(c,D.loop),E=me(g,D.loopDelay),ie=j===!0||j===1/0||j<0?1/0:j+1;let X=0;if(t)X=n;else{let q=jt();ue.paused&&(ue.requestTick(q),q=ue._elapsedTime),X=q-ue._startTime}this.id=B(i)?++wi:i,this.parent=t,this.duration=ao((G+E)*ie-E)||L,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=h||D.onBegin,this.onBeforeUpdate=v||D.onBeforeUpdate,this.onUpdate=b||D.onUpdate,this.onLoop=m||D.onLoop,this.onPause=_||D.onPause,this.onComplete=f||D.onComplete,this.iterationDuration=G,this.iterationCount=ie,this._autoplay=t?!1:me(r,D.autoplay),this._offset=X,this._delay=M,this._loopDelay=E,this._iterationTime=0,this._currentIteration=0,this._resolve=Oe,this._running=!1,this._reversed=+me(p,D.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=me(d,D.alternate),this._prev=null,this._next=null,this._elapsedTime=S,this._startTime=S,this._lastTime=S,this._fps=me(a,D.frameRate),this._speed=me(u,D.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(e){e?this.cancel():this.reset(1).play()}get currentTime(){return ce(Q(this._currentTime,re.precision),-this._delay,this.duration)}set currentTime(e){const t=this.paused;this.pause().seek(+e),t||this.resume()}get iterationCurrentTime(){return Q(this._iterationTime,re.precision)}set iterationCurrentTime(e){this.currentTime=this.iterationDuration*this._currentIteration+e}get progress(){return ce(Q(this._currentTime/this.duration,5),0,1)}set progress(e){this.currentTime=this.duration*e}get iterationProgress(){return ce(Q(this._iterationTime/this.iterationDuration,5),0,1)}set iterationProgress(e){const t=this.iterationDuration;this.currentTime=t*this._currentIteration+t*e}get currentIteration(){return this._currentIteration}set currentIteration(e){this.currentTime=this.iterationDuration*ce(+e,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(e){e?this.reverse():this.play()}get speed(){return super.speed}set speed(e){super.speed=e,this.resetTime()}reset(e=0){return Qn(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,At(this,0,1,e,ke.FORCE),Io(this),this._hasChildren&&ee(this,Io),this}init(e=0){this.fps=this._fps,this.speed=this._speed,!e&&this._hasChildren&&At(this,this.duration,1,e,ke.FORCE),this.reset(e);const t=this._autoplay;return t===!0?this.resume():t&&!B(t.linked)&&t.link(this),this}resetTime(){const e=1/(this._speed*ue._speed);return this._startTime=jt()-(this._currentTime+this._delay)*e,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=L&&!this._hasChildren?At(this,L,0,0,ke.FORCE):(this._running||(St(ue,this),ue._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,ue.wake()),this):this}restart(){return this.reset(0).resume()}seek(e,t=0,n=0){Qn(this),this.completed=!1;const i=this.paused;return this.paused=!0,At(this,e+this._delay,~~t,~~n,ke.AUTO),i?this:this.resume()}alternate(){const e=this._reversed,t=this.iterationCount,n=this.iterationDuration,i=t===1/0?rr(Jo/n):t;return this._reversed=+(this._alternate&&!(i%2)?e:!e),t===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(n*i-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?ee(this,e=>e.cancel(),!0):ee(this,Ti),this._cancelled=1,this.pause()}stretch(e){const t=this.duration,n=Yt(e);if(t===n)return this;const i=e/t,s=e<=L;return this.duration=s?L:n,this.iterationDuration=s?L:Yt(this.iterationDuration*i),this._offset*=i,this._delay*=i,this._loopDelay*=i,this}revert(){At(this,0,1,0,ke.AUTO);const e=this._autoplay;return e&&e.linked&&e.linked===this&&e.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(e=Oe){const t=this.then,n=()=>{this.then=null,e(this),this.then=t,this._resolve=Oe};return new Promise(i=>(this._resolve=()=>i(n()),this.completed&&this._resolve(),this))}}const kt=o=>o,cr=(o,e,t)=>(((1-3*t+3*e)*o+(3*t-6*e))*o+3*e)*o,Ei=(o,e,t)=>{let n=0,i=1,s,l,p=0;do l=n+(i-n)/2,s=cr(l,e,t)-o,s>0?i=l:n=l;while(oi(s)>1e-7&&++p<100);return l},Si=(o=.5,e=0,t=.5,n=1)=>o===e&&t===n?kt:i=>i===0||i===1?i:cr(Ei(i,o,t),e,n),xi=(o=10,e)=>{const t=e?ri:rr;return n=>t(ce(n,0,1)*o)*(1/o)},dr=(...o)=>{const e=o.length;if(!e)return kt;const t=e-1,n=o[0],i=o[t],s=[0],l=[an(n)];for(let p=1;p<t;p++){const d=o[p],c=Cn(d)?d.trim().split(" "):[d],g=c[0],r=c[1];s.push(B(r)?p/t:an(r)/100),l.push(an(g))}return l.push(an(i)),s.push(1),function(d){for(let c=1,g=s.length;c<g;c++){const r=s[c];if(d<=r){const a=s[c-1],u=l[c-1];return u+(l[c]-u)*(d-a)/(r-a)}}return l[l.length-1]}},Ci=(o=10,e=1)=>{const t=[0],n=o-1;for(let i=1;i<n;i++){const s=t[i-1],l=i/n,p=(i+1)/n,d=l+(p-l)*Math.random(),c=l*(1-e)+d*e;t.push(ce(c,s,1))}return t.push(1),dr(...t)},Di=io/2,Po=io*2,Bt=(o=1.68)=>e=>wt(e,+o),Oo={[mt]:Bt,Quad:Bt(2),Cubic:Bt(3),Quart:Bt(4),Quint:Bt(5),Sine:o=>1-ni(o*Di),Circ:o=>1-ei(1-o*o),Expo:o=>o?wt(2,10*o-10):0,Bounce:o=>{let e,t=4;for(;o<((e=wt(2,--t))-1)/11;);return 1/wt(4,3-t)-7.5625*wt((e*3-2)/22-o,2)},Back:(o=1.70158)=>e=>(+o+1)*e*e*e-+o*e*e,Elastic:(o=1,e=.3)=>{const t=ce(+o,1,10),n=ce(+e,L,2),i=n/Po*ii(1/t),s=Po/n;return l=>l===0||l===1?l:-t*wt(2,-10*(1-l))*ti((1-l-i)*s)}},Kn={in:o=>e=>o(e),out:o=>e=>1-o(1-e),inOut:o=>e=>e<.5?o(e*2)/2:1-o(e*-2+2)/2,outIn:o=>e=>e<.5?(1-o(1-e*2))/2:(o(e*2-1)+1)/2},Ii=(o,e,t)=>{if(t[o])return t[o];if(o.indexOf("(")<=-1){const i=Kn[o]||o.includes("Back")||o.includes("Elastic")?e[o]():e[o];return i?t[o]=i:kt}else{const n=o.slice(0,-1).split("("),i=e[n[0]];return i?t[o]=i(...n[1].split(",")):kt}},Pi=(()=>{const o={linear:dr,irregular:Ci,steps:xi,cubicBezier:Si};for(let e in Kn)for(let t in Oo){const n=Oo[t],i=Kn[e];o[e+t]=t===mt||t==="Back"||t==="Elastic"?(s,l)=>i(n(s,l)):i(n)}return o})(),Oi={linear:kt},ko=o=>An(o)?o:Cn(o)?Ii(o,Pi,Oi):kt,Mo={},ki=(o,e,t)=>{if(t===Y.TRANSFORM){const n=Qt.get(o);return n||o}else if(t===Y.CSS||t===Y.ATTRIBUTE&&er(e)&&o in e.style){const n=Mo[o];if(n)return n;{const i=o&&Qr(o);return Mo[o]=i,i}}else return o},Un={deg:1,rad:180/io,turn:360},No={},Mi=(o,e,t,n=!1)=>{const i=e.u,s=e.n;if(e.t===k.UNIT&&i===t)return e;const l=s+i+t,p=No[l];if(!B(p)&&!n)e.n=p;else{let d;if(i in Un)d=s*Un[i]/Un[t];else{const g=o.cloneNode(),r=o.parentNode,a=r&&r!==Pt?r:Pt.body;a.appendChild(g);const u=g.style;u.width=100+i;const f=g.offsetWidth||100;u.width=100+t;const m=g.offsetWidth||100,_=f/m;a.removeChild(g),d=_*s}e.n=d,No[l]=d}return e.t,k.UNIT,e.u=t,e},fr=o=>{if(o._hasChildren)ee(o,fr,!0);else{const e=o;e.pause(),ee(e,t=>{const n=t.property,i=t.target;if(i[oo]){const s=i.style,l=e._inlineStyles[n];if(t._tweenType===Y.TRANSFORM){const p=i[xn];if(B(l)||l===mt?delete p[n]:p[n]=l,t._renderTransforms)if(!Object.keys(p).length)s.removeProperty("transform");else{let d=mt;for(let c in p)d+=Qo[c]+p[c]+") ";s.transform=d}}else B(l)||l===mt?s.removeProperty(n):s[n]=l;e._tail===t&&e.targets.forEach(p=>{p.getAttribute&&p.getAttribute("style")===mt&&p.removeAttribute("style")})}})}return o},C=so(),I=so(),sn={func:null},ln=[null],bt=[null,null],un={to:null};let Ni=0,nt,$e;const Ri=(o,e)=>{const t={};if(Wt(o)){const n=[].concat(...o.map(i=>Object.keys(i))).filter(hn);for(let i=0,s=n.length;i<s;i++){const l=n[i],p=o.map(d=>{const c={};for(let g in d){const r=d[g];hn(g)?g===l&&(c.to=r):c[g]=r}return c});t[l]=p}}else{const n=me(e.duration,re.defaults.duration);Object.keys(o).map(s=>({o:parseFloat(s)/100,p:o[s]})).sort((s,l)=>s.o-l.o).forEach(s=>{const l=s.o,p=s.p;for(let d in p)if(hn(d)){let c=t[d];c||(c=t[d]=[]);const g=l*n;let r=c.length,a=c[r-1];const u={to:p[d]};let f=0;for(let m=0;m<r;m++)f+=c[m].duration;r===1&&(u.from=a.to),p.ease&&(u.ease=p.ease),u.duration=g-(r?f:0),c.push(u)}return s});for(let s in t){const l=t[s];let p;for(let d=0,c=l.length;d<c;d++){const g=l[d],r=g.ease;g.ease=p||void 0,p=r}l[0].duration||l.shift()}}return t};class Bi extends Ai{constructor(e,t,n,i,s=!1,l=0,p=0){super(t,n,i);const d=pi(e),c=d.length,g=t.keyframes,r=g?ai(Ri(g,t),t):t,{delay:a,duration:u,ease:f,playbackEase:m,modifier:_,composition:h,onRender:v}=r,b=n?n.defaults:re.defaults,S=me(m,b.playbackEase),D=S?ko(S):null,M=!B(f)&&!B(f.ease),G=M?f.ease:me(f,D?"linear":b.ease),j=M?f.duration:me(u,b.duration),E=me(a,b.delay),ie=_||b.modifier,X=B(h)&&c>=Ot?Te.none:B(h)?b.composition:h,q={},K=this._offset+(n?n._offset:0);let N=NaN,F=NaN,W=0,Se=0;for(let U=0;U<c;U++){const T=d[U],ne=l||U,ae=p||c;let et=NaN,st=NaN;for(let xe in r)if(hn(xe)){const he=lr(T,xe),Ce=ki(xe,T,he);let we=r[xe];const Mt=Wt(we);if(s&&!Mt&&(bt[0]=we,bt[1]=we,we=bt),Mt){const _e=we.length,Me=!$n(we[0]);_e===2&&Me?(un.to=we,ln[0]=un,nt=ln):_e>2&&Me?(nt=[],we.forEach((de,ge)=>{ge?ge===1?(bt[1]=de,nt.push(bt)):nt.push(de):bt[0]=de})):nt=we}else ln[0]=we,nt=ln;let Le=null,De=null,je=NaN,We=0,te=0;for(let _e=nt.length;te<_e;te++){const Me=nt[te];$n(Me)?$e=Me:(un.to=Me,$e=un),sn.func=null;const de=tt($e.to,T,ne,ae,sn);let ge;$n(de)&&!B(de.to)?($e=de,ge=de.to):ge=de;const ht=tt($e.from,T,ne,ae),Fe=$e.ease,ve=!B(Fe)&&!B(Fe.ease),_t=ve?Fe.ease:Fe||G,z=ve?Fe.duration:tt(me($e.duration,_e>1?tt(j,T,ne,ae)/_e:j),T,ne,ae),He=tt(me($e.delay,te?0:E),T,ne,ae),Ge=tt(me($e.composition,X),T,ne,ae),Ze=Kr(Ge)?Ge:Te[Ge],Kt=$e.modifier||ie,gt=!B(ht),lt=!B(ge),zt=Wt(ge),pr=zt||gt&&lt,Dn=De?We+He:He,In=K+Dn;!Se&&(gt||zt)&&(Se=1);let Ie=De;if(Ze!==Te.none){Le||(Le=lo(T,Ce));let R=Le._head;for(;R&&!R._isOverridden&&R._absoluteStartTime<=In;)if(Ie=R,R=R._nextRep,R&&R._absoluteStartTime>=In)for(;R;)gn(R),R=R._nextRep}if(pr?(Ve(zt?tt(ge[0],T,ne,ae):ht,C),Ve(zt?tt(ge[1],T,ne,ae,sn):ge,I),C.t===k.NUMBER&&(Ie?Ie._valueType===k.UNIT&&(C.t=k.UNIT,C.u=Ie._unit):(Ve(Rt(T,Ce,he,q),ft),ft.t===k.UNIT&&(C.t=k.UNIT,C.u=ft.u)))):(lt?Ve(ge,I):De?Do(De,I):Ve(n&&Ie&&Ie.parent.parent===n?Ie._value:Rt(T,Ce,he,q),I),gt?Ve(ht,C):De?Do(De,C):Ve(n&&Ie&&Ie.parent.parent===n?Ie._value:Rt(T,Ce,he,q),C)),C.o&&(C.n=Co(Ie?Ie._toNumber:Ve(Rt(T,Ce,he,q),ft).n,C.n,C.o)),I.o&&(I.n=Co(C.n,I.n,I.o)),C.t!==I.t){if(C.t===k.COMPLEX||I.t===k.COMPLEX){const R=C.t===k.COMPLEX?C:I,se=C.t===k.COMPLEX?I:C;se.t=k.COMPLEX,se.s=pe(R.s),se.d=R.d.map(()=>se.n)}else if(C.t===k.UNIT||I.t===k.UNIT){const R=C.t===k.UNIT?C:I,se=C.t===k.UNIT?I:C;se.t=k.UNIT,se.u=R.u}else if(C.t===k.COLOR||I.t===k.COLOR){const R=C.t===k.COLOR?C:I,se=C.t===k.COLOR?I:C;se.t=k.COLOR,se.s=R.s,se.d=[0,0,0,1]}}if(C.u!==I.u){let R=I.u?C:I;R=Mi(T,R,I.u?I.u:C.u,!1)}if(I.d&&C.d&&I.d.length!==C.d.length){const R=C.d.length>I.d.length?C:I,se=R===C?I:C;se.d=R.d.map(($i,uo)=>B(se.d[uo])?0:se.d[uo]),se.s=pe(R.s)}const Pn=Q(+z||L,12),en={parent:this,id:Ni++,property:Ce,target:T,_value:null,_func:sn.func,_ease:ko(_t),_fromNumbers:pe(C.d),_toNumbers:pe(I.d),_strings:pe(I.s),_fromNumber:C.n,_toNumber:I.n,_numbers:pe(C.d),_number:C.n,_unit:I.u,_modifier:Kt,_currentTime:0,_startTime:Dn,_delay:+He,_updateDuration:Pn,_changeDuration:Pn,_absoluteStartTime:In,_tweenType:he,_valueType:I.t,_composition:Ze,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};Ze!==Te.none&&ur(en,Le),isNaN(je)&&(je=en._startTime),We=Q(Dn+Pn,12),De=en,W++,St(this,en)}(isNaN(F)||je<F)&&(F=je),(isNaN(N)||We>N)&&(N=We),he===Y.TRANSFORM&&(et=W-te,st=W)}if(!isNaN(et)){let xe=0;ee(this,he=>{xe>=et&&xe<st&&(he._renderTransforms=1,he._composition===Te.blend&&ee(Dt.animation,Ce=>{Ce.id===he.id&&(Ce._renderTransforms=1)})),xe++})}}c||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),F?(ee(this,U=>{U._startTime-U._delay||(U._delay-=F),U._startTime-=F}),N-=F):F=0,N||(N=L,this.iterationCount=0),this.targets=d,this.duration=N===L?L:ao((N+this._loopDelay)*this.iterationCount-this._loopDelay)||L,this.onRender=v||b.onRender,this._ease=D,this._delay=F,this.iterationDuration=N,this._inlineStyles=q,!this._autoplay&&Se&&this.onRender(this)}stretch(e){const t=this.duration;if(t===Yt(e))return this;const n=e/t;return ee(this,i=>{i._updateDuration=Yt(i._updateDuration*n),i._changeDuration=Yt(i._changeDuration*n),i._currentTime*=n,i._startTime*=n,i._absoluteStartTime*=n}),super.stretch(e)}refresh(){return ee(this,e=>{const t=Rt(e.target,e.property,e._tweenType);Ve(t,ft),e._fromNumbers=pe(ft.d),e._fromNumber=ft.n,e._func&&(Ve(e._func(),I),e._toNumbers=pe(I.d),e._strings=pe(I.s),e._toNumber=I.n)}),this}revert(){return super.revert(),fr(this)}then(e){return super.then(e)}}const Re=(o,e)=>new Bi(o,e,null,0,!1).init(),Li=["x","y","z"];[...Li,...ro.filter(o=>["X","Y","Z"].some(e=>o.endsWith(e)))];Ye&&(B(CSS)||Object.hasOwnProperty.call(CSS,"registerProperty"));class Fi{constructor(){this.animationsEnabled=!0,this.currentAnimations=[]}coinMove(e,t,n,i=500){return this.animationsEnabled?new Promise(s=>{const l=Re({targets:e,translateX:t,translateY:n,duration:i,ease:"out(4)",complete:s});this.currentAnimations.push(l)}):Promise.resolve()}coinBounce(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,scale:[1,1.2,1],duration:300,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}correctAnswer(e){return this.animationsEnabled?new Promise(t=>{this.createConfetti();const n=Re({targets:e,scale:[1,1.1,1],backgroundColor:["#ffffff","#95E1D3","#ffffff"],duration:1e3,ease:"inOut(2)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}wrongAnswer(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,translateX:[-5,5,-5,5,0],backgroundColor:["#ffffff","#F38181","#ffffff"],duration:500,ease:"inOut(2)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}tenConversion(e){return this.animationsEnabled?new Promise(t=>{const s=anime({targets:e,translateX:0,translateY:0,scale:[1,.5],rotate:360,duration:800,ease:"inOut(2)",complete:()=>{e.forEach(l=>{l.classList.remove("coin-1"),l.classList.add("coin-10"),l.textContent="10",l.dataset.value="10"});for(let l=1;l<e.length;l++)e[l].remove();Re({targets:e[0],scale:[.5,1.2,1],rotate:[360,0],duration:500,ease:"outElastic(1, .6)",complete:t})}});this.currentAnimations.push(s)}):Promise.resolve()}customerJump(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,translateY:[-20,0],duration:400,ease:"out(4)",loop:3,complete:t});this.currentAnimations.push(n)}):Promise.resolve()}levelUp(e){return this.animationsEnabled?new Promise(t=>{const n=Re({targets:e,scale:[1,1.5,1],rotate:[0,360],duration:1500,ease:"outElastic(1, .6)",complete:t});this.currentAnimations.push(n)}):Promise.resolve()}fadeIn(e,t=500){return this.animationsEnabled?new Promise(n=>{const i=Re({targets:e,opacity:[0,1],translateY:[20,0],duration:t,ease:"out(2)",complete:n});this.currentAnimations.push(i)}):(e.style.opacity="1",Promise.resolve())}fadeOut(e,t=500){return this.animationsEnabled?new Promise(n=>{const i=Re({targets:e,opacity:[1,0],translateY:[0,-20],duration:t,ease:"in(2)",complete:n});this.currentAnimations.push(i)}):(e.style.opacity="0",Promise.resolve())}createConfetti(){const e=document.createElement("div");e.className="confetti-container",document.body.appendChild(e);const t=["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3","#F38181"];for(let n=0;n<30;n++){const i=document.createElement("div");i.style.position="absolute",i.style.width="10px",i.style.height="10px",i.style.backgroundColor=t[Math.floor(Math.random()*t.length)],i.style.left=Math.random()*window.innerWidth+"px",i.style.top="-10px",i.style.borderRadius="50%",e.appendChild(i),Re({targets:i,translateY:window.innerHeight+100,translateX:(Math.random()-.5)*200,rotate:Math.random()*720,duration:Math.random()*2e3+1e3,ease:"in(2)",complete:()=>{i.remove()}})}setTimeout(()=>{e.parentNode&&e.remove()},3e3)}createSparkles(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1000",e.style.position="relative",e.appendChild(t);for(let n=0;n<8;n++){const i=document.createElement("div");i.textContent="✨",i.style.position="absolute",i.style.fontSize="20px",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%",i.style.opacity="0",t.appendChild(i),Re({targets:i,opacity:[0,1,0],scale:[.5,1.5,.5],rotate:Math.random()*360,duration:1e3,delay:n*100,ease:"inOut(2)",complete:()=>{i.remove()}})}setTimeout(()=>{t.parentNode&&t.remove()},1500)}stopAllAnimations(){this.currentAnimations.forEach(e=>{e.pause&&e.pause()}),this.currentAnimations=[]}enableAnimations(){this.animationsEnabled=!0}disableAnimations(){this.animationsEnabled=!1}toggleAnimations(){return this.animationsEnabled=!this.animationsEnabled,this.animationsEnabled}}const ot=new Fi;class Hi{constructor(){this.storageKey="coin-park-game-data",this.defaultData={currentLevel:1,currentProblemIndex:0,completedProblems:[],totalCoins:50,achievements:[],statistics:{correctAnswers:0,totalAttempts:0,totalPlayTime:0,averageTime:0,bestStreaks:0,currentStreak:0},settings:{soundEnabled:!0,animationsEnabled:!0,volume:.7},lastPlayDate:null}}loadGameData(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);return{...this.defaultData,...t}}}catch(e){console.warn("Failed to load game data:",e)}return{...this.defaultData}}saveGameData(e){try{const t={...e,lastPlayDate:new Date().toISOString()};return localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(t){return console.error("Failed to save game data:",t),!1}}updateProgress(e,t,n,i){const s=this.loadGameData();return s.statistics.totalAttempts+=n,s.statistics.totalPlayTime+=i,t?(s.statistics.correctAnswers++,s.statistics.currentStreak++,s.statistics.bestStreaks=Math.max(s.statistics.bestStreaks,s.statistics.currentStreak),s.completedProblems.includes(e)||s.completedProblems.push(e),s.totalCoins+=Math.max(1,4-n)):s.statistics.currentStreak=0,s.statistics.correctAnswers>0&&(s.statistics.averageTime=s.statistics.totalPlayTime/s.statistics.correctAnswers),t&&(s.currentProblemIndex=e+1),this.saveGameData(s),s}updateSettings(e){const t=this.loadGameData();return t.settings={...t.settings,...e},this.saveGameData(t),t.settings}addAchievement(e,t,n){const i=this.loadGameData();return i.achievements.find(s=>s.id===e)?!1:(i.achievements.push({id:e,title:t,description:n,unlockedAt:new Date().toISOString()}),this.saveGameData(i),!0)}checkAchievements(e){const t=[];return[{id:"first_correct",title:"はじめのいっぽ",description:"はじめてせいかいしました！",condition:()=>e.statistics.correctAnswers>=1},{id:"five_correct",title:"がんばりや",description:"5もんせいかいしました！",condition:()=>e.statistics.correctAnswers>=5},{id:"perfect_streak",title:"パーフェクト",description:"3もんれんぞくせいかい！",condition:()=>e.statistics.currentStreak>=3},{id:"coin_collector",title:"コインコレクター",description:"100まいコインをあつめました！",condition:()=>e.totalCoins>=100},{id:"speed_master",title:"はやわざマスター",description:"へいきん10びょう以内でせいかい！",condition:()=>e.statistics.averageTime<=1e4}].forEach(i=>{i.condition()&&!e.achievements.find(s=>s.id===i.id)&&this.addAchievement(i.id,i.title,i.description)&&t.push(i)}),t}resetGameData(){try{return localStorage.removeItem(this.storageKey),!0}catch(e){return console.error("Failed to reset game data:",e),!1}}exportGameData(){const t={...this.loadGameData(),exportedAt:new Date().toISOString(),version:"1.0.0"};return JSON.stringify(t,null,2)}importGameData(e){try{const t=JSON.parse(e);if(!t.statistics||!t.settings)throw new Error("Invalid game data format");const n={...this.defaultData,...t};return this.saveGameData(n),!0}catch(t){return console.error("Failed to import game data:",t),!1}}getPlayStats(){const e=this.loadGameData(),t=e.statistics.totalAttempts>0?(e.statistics.correctAnswers/e.statistics.totalAttempts*100).toFixed(1):0;return{totalProblems:e.completedProblems.length,correctAnswers:e.statistics.correctAnswers,totalAttempts:e.statistics.totalAttempts,accuracyRate:t+"%",totalPlayTime:this.formatTime(e.statistics.totalPlayTime),averageTime:this.formatTime(e.statistics.averageTime),bestStreak:e.statistics.bestStreaks,currentStreak:e.statistics.currentStreak,totalCoins:e.totalCoins,achievements:e.achievements.length}}formatTime(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),i=t%60;return n>0?`${n}分${i}秒`:`${i}秒`}}const Xe=new Hi;class Gi{constructor(){this.calculator=new Hr,this.currentProblem=null,this.registerAmount=0,this.wrongAttempts=0,this.maxAttempts=3,this.problemStartTime=null,this.allProblems=[{items:[{name:"りんご",price:7,emoji:"🍎"},{name:"バナナ",price:5,emoji:"🍌"}],shopType:"くだものやさん"},{items:[{name:"みかん",price:6,emoji:"🍊"},{name:"ぶどう",price:8,emoji:"🍇"}],shopType:"くだものやさん"},{items:[{name:"いちご",price:9,emoji:"🍓"},{name:"もも",price:4,emoji:"🍑"}],shopType:"くだものやさん"},{items:[{name:"にんじん",price:5,emoji:"🥕"},{name:"たまねぎ",price:7,emoji:"🧅"}],shopType:"やおやさん"},{items:[{name:"トマト",price:8,emoji:"🍅"},{name:"きゅうり",price:6,emoji:"🥒"}],shopType:"やおやさん"},{items:[{name:"レタス",price:9,emoji:"🥬"},{name:"だいこん",price:3,emoji:"🌿"}],shopType:"やおやさん"},{items:[{name:"さけ",price:8,emoji:"🐟"},{name:"まぐろ",price:9,emoji:"🐠"}],shopType:"さかなやさん"},{items:[{name:"えび",price:7,emoji:"🦐"},{name:"いか",price:6,emoji:"🦑"}],shopType:"さかなやさん"},{items:[{name:"たこ",price:5,emoji:"🐙"},{name:"かに",price:8,emoji:"🦀"}],shopType:"さかなやさん"},{items:[{name:"チョコ",price:6,emoji:"🍫"},{name:"アメ",price:7,emoji:"🍬"}],shopType:"おかしやさん"},{items:[{name:"ケーキ",price:9,emoji:"🍰"},{name:"クッキー",price:4,emoji:"🍪"}],shopType:"おかしやさん"},{items:[{name:"ドーナツ",price:8,emoji:"🍩"},{name:"アイス",price:5,emoji:"🍦"}],shopType:"おかしやさん"},{items:[{name:"えんぴつ",price:6,emoji:"✏️"},{name:"けしゴム",price:8,emoji:"🧽"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ノート",price:7,emoji:"📓"},{name:"ペン",price:9,emoji:"🖊️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"クレヨン",price:5,emoji:"🖍️"},{name:"はさみ",price:8,emoji:"✂️"}],shopType:"ぶんぼうぐやさん"},{items:[{name:"ボール",price:9,emoji:"⚽"},{name:"つみき",price:4,emoji:"🧱"}],shopType:"おもちゃやさん"},{items:[{name:"ぬいぐるみ",price:8,emoji:"🧸"},{name:"パズル",price:6,emoji:"🧩"}],shopType:"おもちゃやさん"},{items:[{name:"くるま",price:7,emoji:"🚗"},{name:"でんしゃ",price:5,emoji:"🚆"}],shopType:"おもちゃやさん"}],this.totalProblems=10,this.problems=this.generateRandomProblems(),this.gameData=Xe.loadGameData(),this.currentProblemIndex=this.gameData.currentProblemIndex}start(){this.initElements(),this.setupDragAndDrop(),this.setupEventListeners(),this.loadSettings(),this.updateUI(),this.loadProblem()}initElements(){this.walletElement=document.getElementById("wallet"),this.registerElement=document.getElementById("register-coins"),this.registerAmountElement=document.getElementById("register-amount"),this.checkAnswerBtn=document.getElementById("check-answer"),this.feedbackElement=document.getElementById("feedback"),this.feedbackMessageElement=document.getElementById("feedback-message"),this.nextProblemBtn=document.getElementById("next-problem"),this.customerMessageElement=document.getElementById("customer-message"),this.totalAmountElement=document.getElementById("total-amount"),this.totalHintElement=document.getElementById("total-hint"),this.hintButtonElement=document.getElementById("hint-button"),this.shopTitleElement=document.querySelector(".shop-title"),this.shopItemsElement=document.getElementById("shop-items"),this.totalCoinsElement=document.getElementById("total-coins"),this.currentProblemElement=document.getElementById("current-problem"),this.totalProblemsElement=document.getElementById("total-problems")}setupDragAndDrop(){this.tenCoinsSortable=new w(document.getElementById("ten-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Je.play("coin-pickup"),ot.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.oneCoinsSortable=new w(document.getElementById("one-coins"),{group:{name:"coins",pull:!0,put:!0},animation:150,ghostClass:"coin-ghost",onStart:e=>{Je.play("coin-pickup"),ot.coinBounce(e.item)},onAdd:e=>{this.updateRegisterAmount()}}),this.registerSortable=new w(this.registerElement,{group:{name:"coins",pull:!0,put:!0},animation:150,onAdd:e=>{Je.play("coin-drop"),this.updateRegisterAmount(),ot.coinBounce(e.item)},onRemove:e=>{this.updateRegisterAmount()}})}setupEventListeners(){this.checkAnswerBtn.addEventListener("click",()=>{this.checkAnswer()}),this.nextProblemBtn.addEventListener("click",()=>{this.nextProblem()}),this.hintButtonElement.addEventListener("click",()=>{this.showHint()}),document.getElementById("settings-btn").addEventListener("click",()=>{this.showSettings()}),document.getElementById("help-btn").addEventListener("click",()=>{this.showHelp()})}generateRandomProblems(){return[...this.allProblems].sort(()=>Math.random()-.5).slice(0,this.totalProblems)}loadProblem(){if(this.currentProblemIndex>=this.totalProblems){this.showGameComplete();return}this.currentProblem=this.problems[this.currentProblemIndex],this.wrongAttempts=0,this.registerAmount=0,this.problemStartTime=Date.now(),this.registerElement.innerHTML="",this.updateRegisterAmount(),this.updateShopDisplay(),this.updateCustomerMessage();const e=this.currentProblem.items.reduce((t,n)=>t+n.price,0);this.totalAmountElement.textContent=e,this.totalHintElement.style.display="none",this.hintButtonElement.style.display="block",this.initializeCoins(e),this.updateUI()}updateShopDisplay(){this.shopTitleElement.textContent=this.currentProblem.shopType,this.shopItemsElement.innerHTML="",this.currentProblem.items.forEach(e=>{const t=document.createElement("div");t.className="shop-item",t.innerHTML=`
        <div class="item-image">${e.emoji}</div>
        <div class="item-name">${e.name}</div>
        <div class="item-price">${e.price}円</div>
      `,this.shopItemsElement.appendChild(t)})}updateCustomerMessage(){const e=this.currentProblem.items.map(t=>t.name).join("と");this.customerMessageElement.textContent=`${e}ください`}initializeCoins(e){document.getElementById("ten-coins").innerHTML="",document.getElementById("one-coins").innerHTML="";const t=Math.max(2,Math.ceil(e/10)+1),n=Math.max(10,e%10+5);for(let i=0;i<t;i++){const s=this.createCoin(10);document.getElementById("ten-coins").appendChild(s)}for(let i=0;i<n;i++){const s=this.createCoin(1);document.getElementById("one-coins").appendChild(s)}}createCoin(e){const t=document.createElement("div");return t.className=`coin coin-${e}`,t.draggable=!0,t.dataset.value=e,t.textContent=e,t}updateRegisterAmount(){const e=this.registerElement.querySelectorAll(".coin");this.registerAmount=Array.from(e).reduce((t,n)=>t+parseInt(n.dataset.value),0),this.registerAmountElement.textContent=`${this.registerAmount}円`}checkAnswer(){const e=this.currentProblem.items.reduce((t,n)=>t+n.price,0);this.registerAmount===e?this.showCorrectFeedback():(this.wrongAttempts++,this.wrongAttempts>=this.maxAttempts?this.showCorrectAnswerWithExplanation(e):this.showIncorrectFeedback())}showCorrectFeedback(){Je.play("success"),ot.correctAnswer(this.registerElement);const e=Date.now()-this.problemStartTime,t=this.wrongAttempts+1;this.gameData=Xe.updateProgress(this.currentProblemIndex,!0,t,e);const n=Xe.checkAchievements(this.gameData);let i="";n.length>0&&(i='<div class="achievement-notification">',n.forEach(d=>{i+=`<p>🏆 ${d.title}: ${d.description}</p>`}),i+="</div>");const s=Math.max(1,4-t);this.currentProblemIndex>=this.totalProblems-1?(this.feedbackMessageElement.innerHTML=`
        <div class="success-feedback">
          <h2>🎉 せいかい！</h2>
          <p>よくできました！</p>
          <p>💰 ${s}まいコインをゲット！</p>
          ${i}
        </div>
      `,this.showFeedback(),setTimeout(()=>{this.showGameComplete()},2e3)):(this.feedbackMessageElement.innerHTML=`
        <div class="success-feedback">
          <h2>🎉 せいかい！</h2>
          <p>よくできました！</p>
          <p>💰 ${s}まいコインをゲット！</p>
          ${i}
        </div>
      `,this.showFeedback()),this.updateUI();const p=document.querySelector(".customer");ot.customerJump(p),ot.createSparkles(p)}showIncorrectFeedback(){Je.play("wrong"),ot.wrongAnswer(this.registerElement);const e=this.maxAttempts-this.wrongAttempts;let t=`
      <div class="error-feedback">
        <h2>❌ ちがいます</h2>
        <p>もう一度かんがえてみましょう</p>
    `;e===1&&(t+="<p>あと1回だけチャンスがあります</p>"),t+="</div>",this.feedbackMessageElement.innerHTML=t,this.showFeedbackWithChoiceButtons()}showCorrectAnswerWithExplanation(e){Je.play("wrong");const t=this.calculator.visualizeCarryOver(this.currentProblem.items[0].price,this.currentProblem.items[1].price);let n='<div class="calculation-steps">';t.forEach(i=>{n+=`<div class="calculation-step">${i.message||i.action}</div>`}),n+="</div>",this.feedbackMessageElement.innerHTML=`
      <div class="error-feedback">
        <h2>📚 せいかいは ${e}円 です</h2>
        <p>けいさんのしかた：</p>
        ${n}
      </div>
    `,this.showFeedbackWithChoiceButtons()}showFeedback(){this.feedbackElement.style.display="flex",this.feedbackElement.style.opacity="1"}showFeedbackWithChoiceButtons(){this.feedbackElement.style.display="flex",this.feedbackElement.style.opacity="1",this.nextProblemBtn.style.display="none";const e=this.feedbackElement.querySelector(".choice-buttons");e&&e.remove();const t=document.createElement("div");t.className="choice-buttons",this.currentProblemIndex>=this.totalProblems-1?t.innerHTML=`
        <button id="try-again-btn" class="btn btn-primary">もういちど</button>
      `:t.innerHTML=`
        <button id="try-again-btn" class="btn btn-secondary">もういちど</button>
        <button id="skip-problem-btn" class="btn btn-primary">つぎのもんだい</button>
      `,this.feedbackElement.querySelector(".feedback-content").appendChild(t),document.getElementById("try-again-btn").addEventListener("click",()=>{this.tryAgain()});const i=document.getElementById("skip-problem-btn");i&&i.addEventListener("click",()=>{this.nextProblem()})}tryAgain(){this.hideFeedback(),this.registerElement.querySelectorAll(".coin").forEach(t=>{parseInt(t.dataset.value)===10?document.getElementById("ten-coins").appendChild(t):document.getElementById("one-coins").appendChild(t)}),this.updateRegisterAmount()}hideFeedback(){this.feedbackElement.style.display!=="none"&&(this.feedbackElement.style.opacity="0",setTimeout(()=>{this.feedbackElement.style.display="none",this.feedbackElement.style.opacity="1";const e=this.feedbackElement.querySelector(".choice-buttons");e&&e.remove(),this.nextProblemBtn.style.display="block"},300))}nextProblem(){this.hideFeedback(),this.currentProblemIndex++,this.wrongAttempts=0,setTimeout(()=>{console.log(`Loading problem ${this.currentProblemIndex+1}/${this.totalProblems}`),this.loadProblem()},100)}showGameComplete(){this.currentProblemIndex=0,this.gameData.currentProblemIndex=0,Xe.saveGameData(this.gameData);const e=Xe.getPlayStats();this.feedbackMessageElement.innerHTML=`
      <div class="success-feedback">
        <h2>🏆 ゲームクリア！</h2>
        <p>10もんだいすべてクリアしました！</p>
        <p>せいかいりつ: ${e.accuracyRate}</p>
        <p>おつかれさまでした！</p>
      </div>
    `,this.showFeedback(),this.nextProblemBtn.textContent="もう一度あそぶ";const t=this.nextProblemBtn.cloneNode(!0);this.nextProblemBtn.parentNode.replaceChild(t,this.nextProblemBtn),this.nextProblemBtn=t,this.nextProblemBtn.addEventListener("click",()=>{this.currentProblemIndex=0,this.gameData.currentProblemIndex=0,Xe.saveGameData(this.gameData),this.problems=this.generateRandomProblems(),this.hideFeedback(),setTimeout(()=>{console.log("Restarting game with new problems"),this.loadProblem(),this.nextProblemBtn.textContent="つぎのもんだい"},100)})}loadSettings(){Je.enableSound=this.gameData.settings.soundEnabled,Je.setVolume(this.gameData.settings.volume),ot.animationsEnabled=this.gameData.settings.animationsEnabled}updateUI(){this.totalCoinsElement.textContent=this.gameData.totalCoins,this.currentProblemElement.textContent=this.currentProblemIndex+1,this.totalProblemsElement.textContent=this.totalProblems}resetCurrentGame(){this.currentProblemIndex=0,this.problems=this.generateRandomProblems(),this.wrongAttempts=0,this.registerAmount=0,this.registerElement.innerHTML="",this.updateRegisterAmount(),this.feedbackElement.style.display="none",this.loadProblem(),console.log("Game reset to first problem")}showHint(){Je.play("ten-conversion"),this.totalHintElement.style.display="block",this.hintButtonElement.style.display="none",this.totalHintElement.classList.add("fade-in"),setTimeout(()=>{this.totalHintElement.classList.remove("fade-in")},500)}showSettings(){const e=Xe.getPlayStats(),t=`
      <div class="modal-content">
        <div class="modal-header">
          <h3>設定</h3>
          <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">×</button>
        </div>
        <div class="modal-body">
          <div class="setting-item">
            <label>
              <input type="checkbox" id="sound-toggle" ${this.gameData.settings.soundEnabled?"checked":""}>
              音声をONにする
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="animation-toggle" ${this.gameData.settings.animationsEnabled?"checked":""}>
              アニメーションをONにする
            </label>
          </div>
          
          <h4>ゲームとうけい</h4>
          <div class="stats">
            <p>せいかいすう: ${e.correctAnswers}</p>
            <p>せいかいりつ: ${e.accuracyRate}</p>
            <p>さいこうれんぞく: ${e.bestStreak}</p>
            <p>コインすう: ${e.totalCoins}</p>
            <p>じっせき: ${e.achievements}こ</p>
          </div>
          
          <div class="setting-buttons">
            <button onclick="this.closest('.modal-overlay').remove()">とじる</button>
            <button id="reset-game-btn">ゲームをさいしょから</button>
            <button id="reset-data-btn">データリセット</button>
          </div>
        </div>
      </div>
    `,n=document.createElement("div");n.className="modal-overlay",n.innerHTML=t,document.body.appendChild(n),n.querySelector("#sound-toggle").addEventListener("change",i=>{this.gameData.settings.soundEnabled=i.target.checked,Xe.updateSettings(this.gameData.settings),this.loadSettings()}),n.querySelector("#animation-toggle").addEventListener("change",i=>{this.gameData.settings.animationsEnabled=i.target.checked,Xe.updateSettings(this.gameData.settings),this.loadSettings()}),n.querySelector("#reset-game-btn").addEventListener("click",()=>{confirm("げんざいのゲームをリセットして、さいしょからはじめますか？")&&(this.resetCurrentGame(),n.remove())}),n.querySelector("#reset-data-btn").addEventListener("click",()=>{confirm(`すべてのデータ（とうけい、じっせき、コイン）をリセットしますか？
このそうさはもとにもどせません。`)&&(Xe.resetGameData(),location.reload())}),n.addEventListener("click",i=>{i.target===n&&n.remove()})}showHelp(){const e=`
      <div class="modal-content">
        <div class="modal-header">
          <h3>あそびかた</h3>
          <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">×</button>
        </div>
        <div class="modal-body">
          <div class="help-content">
            <p>1. おきゃくさんがほしいものをいいます</p>
            <p>2. おねだんをけいさんします</p>
            <p>3. おさいふからコインをレジにうつします</p>
            <p>4. 「おしはらい」ボタンをおします</p>
            
            <h4>コインについて</h4>
            <p>🪙 10円玉：きんいろのコイン</p>
            <p>🪙 1円玉：ぎんいろのコイン</p>
            
            <h4>けいさんのコツ</h4>
            <p>10になるくみあわせをさがしてみよう！</p>
            <p>たとえば 7 + 5 = 12 のときは</p>
            <p>7 + 3 = 10、あと 2 をたして 12！</p>
            
            <div class="setting-buttons">
              <button onclick="this.closest('.modal-overlay').remove()">とじる</button>
            </div>
          </div>
        </div>
      </div>
    `,t=document.createElement("div");t.className="modal-overlay",t.innerHTML=e,document.body.appendChild(t),t.addEventListener("click",n=>{n.target===t&&t.remove()})}}class Vi{constructor(){this.gameEngine=new Gi,this.init()}init(){document.addEventListener("DOMContentLoaded",()=>{this.gameEngine.start()})}}new Vi;
